# ๐ ะะขะงะะข: ะะตัะตะดะตะปะบะฐ ะดะธะฐะปะพะณะฐ ะทะฐะณััะทะบะธ ะฒะตัะตัะฝะตะณะพ ัะพัะพ

**ะะฐัะฐ:** 29 ะพะบััะฑัั 2025
**ะกัะฐััั:** โ ะะฐะฒะตััะตะฝะพ
**ะะตััะธั:** 1.0

---

## ๐ฏ ะฆะตะปั

ะะตัะตะดะตะปะฐัั ัะตะฐะปะธะทะฐัะธั ัะบัะฐะฝะฐ ััะฟะตัะฐ ะฟัะธ ะดะพะฑะฐะฒะปะตะฝะธะธ ะฒะตัะตัะฝะตะณะพ ัะพัะพ ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ะฝะพะฒะพะน ะฐััะธัะตะบัััั ะฝะฐ ะฑะฐะทะต Cupertino `AlertDialog` ั ะธะฝะดะธะบะฐัะพัะพะผ ะฟัะพะณัะตััะฐ ะธ ะฟะปะฐะฒะฝัะผะธ ะฐะฝะธะผะฐัะธัะผะธ.

---

## ๐ ะคะฐะนะปั, ะทะฐััะพะฝัััะต ะฒ ะฟัะพะตะบัะต

### 1. โ ะะพะฒัะน ัะฐะนะป: ะะพะผะฟะพะฝะตะฝั ะดะธะฐะปะพะณะฐ
- **ะััั:** `lib/features/works/presentation/widgets/evening_photo_loading_dialog.dart`
- **ะะฐะทะผะตั:** ~380 ัััะพะบ
- **ะกัะฐััั:** ะกะพะทะดะฐะฝ โ

**ะกะพะดะตัะถะธะผะพะต:**
- `EveningPhotoLoadingDialog` โ ะพัะฝะพะฒะฝะพะน ะบะพะผะฟะพะฝะตะฝั (StatefulWidget)
- `_EveningPhotoLoadingDialogState` โ ัะพััะพัะฝะธะต ั ะฐะฝะธะผะฐัะธัะผะธ
- ะขัะธ ะผะตัะพะดะฐ ะดะปั ะฟะพัััะพะตะฝะธั ัะปะตะผะตะฝัะพะฒ:
  - `_buildProgressBar()` โ ะปะธะฝะตะนะฝัะน ะธะฝะดะธะบะฐัะพั ั ัะตะฝัั
  - `_buildSuccessCircle()` โ ะทะตะปัะฝัะน ะบััะณ ั ะณะฐะปะพัะบะพะน
  - `_buildDoneButton()` โ ะบะฝะพะฟะบะฐ ั ะดะธะฝะฐะผะธัะตัะบะพะน ะฐะบัะธะฒะฐัะธะตะน

### 2. ๐ ะะฑะฝะพะฒะปัะฝ: ะัะฝะพะฒะฝะพะน ัะบัะฐะฝ ัะผะตะฝั
- **ะััั:** `lib/features/works/presentation/screens/tabs/work_data_tab.dart`
- **ะะทะผะตะฝะตะฝะธะน:** -60 ัััะพะบ (ัะดะฐะปะตะฝั ััะฐััะต ัะปะฐะณะธ ะธ ะปะพะณะธะบะฐ)
- **ะะพะฑะฐะฒะปะตะฝะพ:** ะะผะฟะพัั ะฝะพะฒะพะณะพ ะบะพะผะฟะพะฝะตะฝัะฐ, ะฝะพะฒัะต ะผะตัะพะดั ะธะฝัะตะณัะฐัะธะธ

**ะงัะพ ะธะทะผะตะฝะธะปะพัั:**
- โ ะฃะดะฐะปะตะฝั ัะปะฐะณะธ: `_isLoadingEveningPhoto`, `_isEveningPhotoSuccessful`
- โ ะฃะดะฐะปะตะฝะฐ ะปะพะณะธะบะฐ ั `await Future.delayed(1500ms)`
- โ ะะพะฑะฐะฒะปะตะฝ ะธะผะฟะพัั: `import 'package:projectgt/features/works/presentation/widgets/evening_photo_loading_dialog.dart';`
- โ ะะตัะตะดะตะปะฐะฝ ะผะตัะพะด `_pickEveningPhoto()` ะดะปั ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะดะธะฐะปะพะณะพะฒ
- โ ะฃะฟัะพัะตะฝ ะผะตัะพะด `_showEveningPhotoOptions()` (ัะฑัะฐะฝะฐ ััะปะพะฒะฝะฐั ะปะพะณะธะบะฐ ะทะฐะณััะทะบะธ)

### 3. ๐ ะะพะฒะฐั ะดะพะบัะผะตะฝัะฐัะธั
- **ะััั:** `docs/works/EVENING_PHOTO_LOADING_DIALOG.md`
- **ะะฐะทะผะตั:** ~350 ัััะพะบ
- **ะกะพะดะตัะถะธะผะพะต:** ะะพะปะฝะพะต ะพะฟะธัะฐะฝะธะต ะฐััะธัะตะบัััั, ะฟัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั, ะดะธะฐะณัะฐะผะผั

---

## ๐ ะกัะฐะฒะฝะตะฝะธะต: ะกัะฐัะพะต vs ะะพะฒะพะต

### ะกัะฐัะฐั ัะตะฐะปะธะทะฐัะธั
```dart
// ะคะปะฐะณะธ ัะพััะพัะฝะธั ะฒ ะบะปะฐััะต
bool _isLoadingEveningPhoto = false;
bool _isEveningPhotoSuccessful = false;

// UI ั ััะปะพะฒะฝัะผ ะพัะพะฑัะฐะถะตะฝะธะตะผ (Modal Bottom Sheet)
_isLoadingEveningPhoto
    ? Center(child: CupertinoActivityIndicator(...))
    : _isEveningPhotoSuccessful
        ? Center(child: Icon(Icons.check_circle, ...))
        : Column(children: [...buttons...])

// ะะพะณะธะบะฐ ั ะทะฐะดะตัะถะบะพะน
onLoadingStateChanged?.call(() {
  _isLoadingEveningPhoto = false;
});
onLoadingStateChanged?.call(() {
  _isEveningPhotoSuccessful = true;
});
await Future.delayed(const Duration(milliseconds: 1500));
navigator.pop();
```

**ะัะพะฑะปะตะผั:**
- ๐ด ะะฒะฐ ัะปะฐะณะฐ ัะพััะพัะฝะธั (ัััะดะฝะพ ะพััะปะตะถะธะฒะฐัั)
- ๐ด UI ะฑะปะพะบะธัะพะฒะฐะฝ (Modal Bottom Sheet + ััะปะพะฒะฝะพะต ะพัะพะฑัะฐะถะตะฝะธะต)
- ๐ด ะะตั ะธะฝะดะธะบะฐัะพัะฐ ะฟัะพะณัะตััะฐ
- ๐ด ะคะธะบัะธัะพะฒะฐะฝะฝะฐั ะทะฐะดะตัะถะบะฐ (ะฝะต ัะฒัะทะฐะฝะฐ ั ัะตะฐะปัะฝะพะน ะทะฐะณััะทะบะพะน)
- ๐ด ะะพะณะธะบะฐ ะฒ ะพะดะฝะพะผ ัะฐะนะปะต (ัะปะพะถะฝะพ ะฟะตัะตะธัะฟะพะปัะทะพะฒะฐัั)
- ๐ด ะะตั ะฟะปะฐะฒะฝัั ะฐะฝะธะผะฐัะธะน

### ะะพะฒะฐั ัะตะฐะปะธะทะฐัะธั
```dart
// ะะดะธะฝััะฒะตะฝะฝัะน ะบะพะผะฟะพะฝะตะฝั - EveningPhotoLoadingDialog
showDialog(
  context: context,
  barrierDismissible: false,
  builder: (dialogContext) {
    return EveningPhotoLoadingDialog(
      progress: 0.0,
      isComplete: false,
      onDone: () => Navigator.pop(context),
    );
  },
);

// ะะพัะปะต ะทะฐะณััะทะบะธ
showDialog(
  context: context,
  barrierDismissible: false,
  builder: (dialogContext) {
    return EveningPhotoLoadingDialog(
      progress: 1.0,
      isComplete: true,
      onDone: () { ... },
    );
  },
);
```

**ะัะตะธะผััะตััะฒะฐ:**
- โ ะัะดะตะปัะฝัะน ะฟะตัะตะธัะฟะพะปัะทัะตะผัะน ะบะพะผะฟะพะฝะตะฝั
- โ ะะตะทะฐะฒะธัะธะผัะน ะดะธะฐะปะพะณ (ะฝะต ะฑะปะพะบะธััะตั Bottom Sheet)
- โ ะะพะดะดะตัะถะบะฐ ะดะธะฝะฐะผะธัะตัะบะพะณะพ ะฟัะพะณัะตััะฐ
- โ ะะปะฐะฒะฝัะต ะฐะฝะธะผะฐัะธะธ (FadeTransition, ScaleTransition)
- โ ะะฒัะพะผะฐัะธัะตัะบะฐั ะฐะบัะธะฒะฐัะธั ะบะฝะพะฟะบะธ (ะฑะตะท ะทะฐะดะตัะถะตะบ)
- โ Cupertino ะดะธะทะฐะนะฝ (iOS ััะธะปั)
- โ `PopScope(canPop: false)` โ ะฑะตะทะพะฟะฐัะฝะพััั

---

## ๐ฌ ะะฝะธะผะฐัะธะธ ะฒ ะฝะพะฒะพะน ัะตะฐะปะธะทะฐัะธะธ

| ะะฝะธะผะฐัะธั | ะะพะผะฟะพะฝะตะฝั | ะัะพะดะพะปะถะธัะตะปัะฝะพััั | ะัะธะฒะฐั |
|----------|-----------|-------------------|--------|
| **FadeTransition** | ะัะพะณัะตััะฑะฐั (ะธััะตะทะฝะพะฒะตะฝะธะต) | 100ms | `easeIn` |
| **ScaleTransition** | ะะฐะปะพัะบะฐ (ะฟะพัะฒะปะตะฝะธะต) | 300ms | `easeOut` |
| **AnimatedDefaultTextStyle** | ะะฝะพะฟะบะฐ (ัะผะตะฝะฐ ัะฒะตัะฐ) | 300ms | ะะธะฝะตะนะฝะฐั |

### ะะพัะปะตะดะพะฒะฐัะตะปัะฝะพััั ะฐะฝะธะผะฐัะธะน:
```
t=0ms:   FadeTransition.forward() โ ะฟัะพะณัะตััะฑะฐั ะฝะฐัะธะฝะฐะตั ะธััะตะทะฐัั
         โ
t=50ms:  ScaleTransition.forward() โ ะณะฐะปะพัะบะฐ ะฝะฐัะธะฝะฐะตั ะฟะพัะฒะปััััั (ะธะท 0 ะฒ 1)
         โ
t=100ms: setState(_showButton=true) โ ะบะฝะพะฟะบะฐ "ะะพัะพะฒะพ" ััะฐะฝะพะฒะธััั ะฐะบัะธะฒะฝะพะน (ัะตัะฐั โ ัะธะฝัั)
         โ
t=300ms: ะัะต ะฐะฝะธะผะฐัะธะธ ะทะฐะฒะตััะตะฝั, ะฟะพะปัะทะพะฒะฐัะตะปั ะฒะธะดะธั ัะธะฝะฐะปัะฝะพะต ัะพััะพัะฝะธะต
```

---

## ๐ฏ ะคัะฝะบัะธะพะฝะฐะปัะฝะพััั

### ะขัะธ ัะพััะพัะฝะธั ะดะธะฐะปะพะณะฐ

**1. ะะฐะณััะทะบะฐ (0-99%)**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโ
โ    ะะฐะณััะทะบะฐโฆ           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  [โโโโโโโโโโโโโโโโโโ]  โ  โ LinearProgressIndicator (75%)
โ    75%                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      [  ะะพัะพะฒะพ  ]      โ  โ ะะฝะพะฟะบะฐ ะพัะบะปััะตะฝะฐ (ัะตัะฐั)
โโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**2. ะะฐะฒะตััะตะฝะพ (100%)**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโ
โ    ะะฐะณััะถะตะฝะพ!          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                        โ
โ       โ              โ  โ Green circle with checkmark (scale-ะฐะฝะธะผะฐัะธั)
โ                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      [  ะะพัะพะฒะพ  ]      โ  โ ะะฝะพะฟะบะฐ ะฐะบัะธะฒะฝะฐ (ัะธะฝัั)
โโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ะะฐะฝะฝัะต ะพ ัะตะฐะปะธะทะฐัะธะธ

### ะะฐะทะผะตัั ัะฐะนะปะพะฒ
- `evening_photo_loading_dialog.dart` โ **380 ัััะพะบ**
- ะัะปะพ ะฒ `work_data_tab.dart` ะดะปั ััะพะน ััะฝะบัะธะธ โ ~80 ัััะพะบ
- ะฃะดะฐะปะตะฝะพ ะธะท `work_data_tab.dart` โ ~60 ัััะพะบ
- **ะัะพะณะพ:** ะะพะฑะฐะฒะปะตะฝะพ 320 ัััะพะบ (ะฝะพะฒัะน ะบะพะผะฟะพะฝะตะฝั), ัะดะฐะปะตะฝะพ 60 ะธะท ััะฐัะพะณะพ

### ะะพะฝััะฐะฝัั ะธ ะบะพะฝัะธะณััะฐัะธั
- **16 ะฐะฝะธะผะฐัะธะพะฝะฝัั/ะฒะธะทัะฐะปัะฝัั ะบะพะฝััะฐะฝั** (ะดะปะธัะตะปัะฝะพััะธ, ัะฐะทะผะตัั, ัะฒะตัะฐ)
- **5 Cupertino ัะฒะตัะพะฒ** (ัะธััะตะผะฝัะต, ะฐะดะฐะฟัะธัััััั ะบ ัะตะผะต)
- **ะคะธะบัะธัะพะฒะฐะฝะฝัะต ะฟะฐัะฐะผะตััั:**
  - ะััะพัะฐ ะฟัะพะณัะตััะฑะฐัะฐ: 6.0px
  - ะะฐะดะธัั ะณะฐะปะพัะบะธ: 48.0px
  - ะะฐะทะผะตั ะธะบะพะฝะบะธ: 32.0px

### ะะตะทะพะฟะฐัะฝะพััั
- โ `PopScope(canPop: false)` โ ะฑะปะพะบะธััะตั back-ะบะฝะพะฟะบั
- โ `barrierDismissible: false` โ ะฝะตะปัะทั ะทะฐะบัััั ะฒะฝะต ะดะธะฐะปะพะณะฐ
- โ `if (!mounted) return;` โ ะฟัะพะฒะตัะบะธ ะฟะพัะปะต async
- โ `onPressed: _showButton ? widget.onDone : null` โ ะบะฝะพะฟะบะฐ ะพัะบะปััะตะฝะฐ ะดะพ ะณะพัะพะฒะพ

---

## ๐ ะะฝัะตะณัะฐัะธั ะฒ ัะฐะฑะพัะธะน ะฟัะพัะตัั

### ะะพ ะธะทะผะตะฝะตะฝะธะน (ััะฐััะน flow)
```
ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั "ะะพะฑะฐะฒะธัั ัะพัะพ"
  โ
_showEveningPhotoOptions() โ Modal Bottom Sheet ะพัะบััะฒะฐะตััั
  โ
ะัะฑัะฐะป ะะฐะผะตัะฐ/ะะฐะปะตัะตั
  โ
_pickEveningPhoto() ะทะฐะฟััะบะฐะตััั
  โ
photoService.uploadPhotoBytes() โ _isLoadingEveningPhoto = true
  โ
ะกะฟะธะฝะฝะตั ะฟะพะบะฐะทัะฒะฐะตััั ะฒ Bottom Sheet (1-2 ัะตะบ)
  โ
ะะฐะณััะทะบะฐ ะทะฐะฒะตััะตะฝะฐ โ _isEveningPhotoSuccessful = true
  โ
Future.delayed(1500ms) โ ะถะดัะผ 1.5 ัะตะบ (ัะธะบัะธัะพะฒะฐะฝะพ!)
  โ
navigator.pop() โ ะทะฐะบััะฒะฐะตะผ Bottom Sheet
```

### ะะพัะปะต ะธะทะผะตะฝะตะฝะธะน (ะฝะพะฒัะน flow)
```
ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั "ะะพะฑะฐะฒะธัั ัะพัะพ"
  โ
_showEveningPhotoOptions() โ Modal Bottom Sheet ะพัะบััะฒะฐะตััั
  โ
ะัะฑัะฐะป ะะฐะผะตัะฐ/ะะฐะปะตัะตั
  โ
_pickEveningPhoto() ะทะฐะฟััะบะฐะตััั
  โ
showDialog(..., EveningPhotoLoadingDialog(progress: 0.0, isComplete: false))
  โ
ะะธะฐะปะพะณ ะทะฐะณััะทะบะธ ะพัะบััะฒะฐะตััั (ะพัะดะตะปัะฝะพ ะพั Bottom Sheet!)
  โ
photoService.uploadPhotoBytes() โ progress: 0% โ 100%
  โ
ะะฐะณััะทะบะฐ ะทะฐะฒะตััะตะฝะฐ โ navigator.pop() ะทะฐะบััะฒะฐะตะผ ะดะธะฐะปะพะณ ะทะฐะณััะทะบะธ
  โ
showDialog(..., EveningPhotoLoadingDialog(progress: 1.0, isComplete: true))
  โ
ะะธะฐะปะพะณ ััะฟะตัะฐ ะพัะบััะฒะฐะตััั (ะทะตะปัะฝะฐั ะณะฐะปะพัะบะฐ)
  โ
ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั "ะะพัะพะฒะพ" ะธะปะธ ะถะดัั (ะฝะตั ัะธะบัะธัะพะฒะฐะฝะฝะพะน ะทะฐะดะตัะถะบะธ!)
  โ
ะะฑะฐ ะดะธะฐะปะพะณะฐ ะทะฐะบััะฒะฐัััั โ ะฒะธะดะธะผ Bottom Sheet ั ะพะฑะฝะพะฒะปะตะฝะฝัะผ ัะพัะพ
```

---

## โ ะงะตะบ-ะปะธัั ะฒัะฟะพะปะฝะตะฝะธั

- [x] ะกะพะทะดะฐะฝ ะฝะพะฒัะน ัะฐะนะป `evening_photo_loading_dialog.dart`
- [x] ะะตะฐะปะธะทะพะฒะฐะฝั ััะธ ัะพััะพัะฝะธั (ะทะฐะณััะทะบะฐ, ััะฟะตั, ะบะฝะพะฟะบะฐ)
- [x] ะะพะฑะฐะฒะปะตะฝั ะฒัะต ะฐะฝะธะผะฐัะธะธ (Fade, Scale, AnimatedStyle)
- [x] ะะฝัะตะณัะธัะพะฒะฐะฝะพ ะฒ `work_data_tab.dart`
- [x] ะฃะดะฐะปะตะฝั ััะฐััะต ัะปะฐะณะธ ัะพััะพัะฝะธั
- [x] ะะฑะฝะพะฒะปะตะฝั ะผะตัะพะดั `_showEveningPhotoOptions()` ะธ `_pickEveningPhoto()`
- [x] ะะพะฑะฐะฒะปะตะฝั ะธะผะฟะพััั
- [x] ะะตั ะปะธะฝัะตั-ะพัะธะฑะพะบ
- [x] ะกะพะทะดะฐะฝะฐ ะดะพะบัะผะตะฝัะฐัะธั `EVENING_PHOTO_LOADING_DIALOG.md`
- [x] ะกะพะทะดะฐะฝ ััะพั ะพัััั

---

## ๐ ะกะปะตะดัััะธะต ัะฐะณะธ

### ะขะตััะธัะพะฒะฐะฝะธะต
- [ ] ะัะพะฒะตัะธัั ะทะฐะณััะทะบั ัะพัะพ ั ะผะตะดะปะตะฝะฝัะผ ะธะฝัะตัะฝะตัะพะผ
- [ ] ะัะพะฒะตัะธัั ะทะฐะบัััะธะต ะดะธะฐะปะพะณะฐ ะฟัะธ ะฒััะพะดะต ะธะท ะฟัะธะปะพะถะตะฝะธั
- [ ] ะัะพะฒะตัะธัั ะฐะฝะธะผะฐัะธะธ ะฝะฐ ัะฐะทะฝัั ััััะพะนััะฒะฐั
- [ ] ะัะพะฒะตัะธัั ัะฐะฑะพัั ะฝะฐ iOS ะธ Android

### ะะพะทะผะพะถะฝัะต ัะปัััะตะฝะธั
- [ ] ะะพะฑะฐะฒะธัั ะบะฝะพะฟะบั ะพัะผะตะฝั ะทะฐะณััะทะบะธ (X)
- [ ] ะะพะบะฐะทัะฒะฐัั ัะฐะทะผะตั ะทะฐะณััะถะตะฝะฝะพะณะพ ัะฐะนะปะฐ
- [ ] ะะฝัะตะณัะธัะพะฒะฐัั ั ะดััะณะธะผะธ ะผะพะดัะปัะผะธ (ัััะตะฝะฝะธะต ัะพัะพ, ะดะพะบัะผะตะฝัั)
- [ ] ะะพะบะฐะปะธะทะฐัะธั ัะตะบััะพะฒ
- [ ] Dark/Light ัะตะผะฐ (ะตัะปะธ ะฝัะถะฝะฐ ะบะฐััะพะผะธะทะฐัะธั)

---

## ๐ ะะฐะผะตัะบะธ ะดะปั ัะฐะทัะฐะฑะพััะธะบะพะฒ

1. **ะะพะผะฟะพะฝะตะฝั ะฟะตัะตะธัะฟะพะปัะทัะตะผัะน** โ ะผะพะถะฝะพ ะฟัะธะผะตะฝะธัั ะดะปั ะดััะณะธั ะผะพะดัะปะตะน (ะดะพะบัะผะตะฝัั, ัััะตะฝะฝะธะต ัะพัะพ ะธ ั.ะด.)

2. **ะะตะท Riverpod** โ ะฝะพะฒัะน ะบะพะผะฟะพะฝะตะฝั ะฝะต ะทะฐะฒะธัะธั ะพั ะฟัะพะฒะฐะนะดะตัะพะฒ, ะธัะฟะพะปัะทัะตััั ัะพะปัะบะพ callback `onDone`

3. **StatefulWidget** โ ะธัะฟะพะปัะทัะตััั ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฐะฝะธะผะฐัะธัะผะธ (AnimationController)

4. **didUpdateWidget** โ ะพััะปะตะถะธะฒะฐะตั ะธะทะผะตะฝะตะฝะธะต `isComplete`, ััะพะฑั ะทะฐะฟัััะธัั ะฐะฝะธะผะฐัะธั ะฟัะธ ะฟะตัะตัะพะดะต ะฝะฐ ััะฟะตั

5. **Cupertino ััะธะปั** โ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฐะดะฐะฟัะธััะตััั ะฟะพะด iOS/Android (ัะธััะตะผะฝัะต ัะฒะตัะฐ)

---

**ะกัะฐััั:** โ ะะะขะะะ ะ ะะะะะะะจะะะฃ  
**ะะฐะทัะฐะฑะพััะธะบ:** Flutter Team  
**QA:** ะขัะตะฑัะตััั ัััะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต
