# –ú–æ–¥—É–ª—å Estimates (–°–º–µ—Ç—ã)

**–î–∞—Ç–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏:** 18 —è–Ω–≤–∞—Ä—è 2026 –≥–æ–¥–∞
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:** 
- **–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–∏**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –¥–∏–∞–ª–æ–≥–æ–≤–æ–µ –æ–∫–Ω–æ `EstimateItemDetailsDialog` —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –ø–æ —Å–º–µ—Ç–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏, –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —Å–ø–∏—Å–∫–æ–º –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏–∑ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö (–¥–∞—Ç–∞, –Ω–æ–º–µ—Ä –Ω–∞–∫–ª–∞–¥–Ω–æ–π, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ).
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ (RPC)**: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `get_linked_materials_details`, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–ª–æ –º–≥–Ω–æ–≤–µ–Ω–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É (–Ω–æ–≤—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Å–≤–µ—Ä—Ö—É).
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Context Menu**: –ü—É–Ω–∫—Ç –º–µ–Ω—é ¬´–î–µ—Ç–∞–ª–∏¬ª –≤ —Ç–∞–±–ª–∏—Ü–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –æ–∫–Ω–æ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏.
- **–°—Ç—Ä–æ–≥–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ö–∞–Ω–∏–∑–º 1:1, –∏—Å–∫–ª—é—á–∞—é—â–∏–π –¥–≤–æ–π–Ω—ã–µ –ø—Ä–∏–≤—è–∑–∫–∏ –æ–¥–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –∫ —Ä–∞–∑–Ω—ã–º —Ä–∞–±–æ—Ç–∞–º –≤ —Ä–∞–º–∫–∞—Ö –¥–æ–≥–æ–≤–æ—Ä–∞.
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤**: –°–æ–∑–¥–∞–Ω–∞ RPC —Ñ—É–Ω–∫—Ü–∏—è `get_materials_with_binding_status` –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ –ø—Ä–∏–≤—è–∑–∫–∏.

---

## üìå –í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ
–ú–æ–¥—É–ª—å –≤–ª–∞–¥–µ–µ—Ç —Ç—Ä–µ–º—è –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏: `estimates`, `kit_components` –∏ `material_aliases`. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î —á–µ—Ä–µ–∑ `company_id`. –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π `get_my_company_ids()`.

**Desktop Sidebar:** –°–ø–∏—Å–∫–∏ —Å–º–µ—Ç –≤ –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–π –≤–µ—Ä—Å–∏–∏ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –æ–±—ä–µ–∫—Ç–∞–º –∏ –¥–æ–≥–æ–≤–æ—Ä–∞–º. –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ —Ä–µ–∂–∏–º–µ ¬´–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ¬ª, —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –ø–∞–Ω–µ–ª—å ¬´–ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è¬ª —Ç–æ–≥–æ –∂–µ —Ä–∞–∑–º–µ—Ä–∞ (350px).

---

## üìù –û–ø–∏—Å–∞–Ω–∏–µ
–ú–æ–¥—É–ª—å **Estimates** –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–Ω–æ-—Å–º–µ—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π:
- –°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Å–º–µ—Ç–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π.
- –ò–º–ø–æ—Ä—Ç —Å–º–µ—Ç –∏–∑ Excel (xlsx) —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–∞—Ä—Å–∏–Ω–≥–æ–º —Å–∏—Å—Ç–µ–º –∏ –ø–æ–¥—Å–∏—Å—Ç–µ–º.
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–ª–µ–∫—Ç–∞–º–∏ (BOM) —á–µ—Ä–µ–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Å–º–µ—Ç–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏.
- –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (mapping) –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏–∑ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –∫ —Å–º–µ—Ç–Ω—ã–º –ø–æ–∑–∏—Ü–∏—è–º.
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ñ–∞–∫—Ç–∞ —Ä–∞–±–æ—Ç –∏ –æ—Å—Ç–∞—Ç–∫–æ–≤ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤ –µ–¥–∏–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–¥—É–ª–µ–º "–î–æ–≥–æ–≤–æ—Ä—ã" –∏ "–û–±—ä–µ–∫—Ç—ã".
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–∫—Ç–æ–≤ –ö–°-2.

---

## üîó –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –¢–∞–±–ª–∏—Ü—ã –º–æ–¥—É–ª—è (owner):
- `public.estimates` ‚Äî –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ —Å–º–µ—Ç—ã.
- `public.kit_components` ‚Äî —Å–æ—Å—Ç–∞–≤ –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤.
- `public.material_aliases` ‚Äî —Å–≤—è–∑–∏ –Ω–∞–∑–≤–∞–Ω–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏–∑ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Å–æ —Å–º–µ—Ç–æ–π.

### –¢–∞–±–ª–∏—Ü—ã –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π (usage):
- `public.companies` ‚Äî –≤–ª–∞–¥–µ–ª–µ—Ü –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö.
- `public.materials` / `v_materials_grouped_by_estimate` ‚Äî –¥–∞–Ω–Ω—ã–µ –æ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –∏ –æ—Å—Ç–∞—Ç–∫–∞—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.
- `public.work_items` ‚Äî –¥–∞–Ω–Ω—ã–µ –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞—Ö.
- `public.contracts` / `public.objects` ‚Äî –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞.

---

## üñºÔ∏è –°–ª–æ–π Presentation

### –≠–∫—Ä–∞–Ω—ã:
- `EstimatesListScreen` ‚Äî —Ä–µ–µ—Å—Ç—Ä —Å–º–µ—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è Sidebar.
- `EstimateDesktopView` ‚Äî –¥–µ—Å–∫—Ç–æ–ø–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ –±–∞–∑–µ `Stack` —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π –Ω–∞–ª–æ–∂–µ–Ω–∏—è.
- `EstimateDetailsScreen` ‚Äî –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞ –º–µ–∂–¥—É Desktop –∏ Mobile.
- `EstimateFormScreen` ‚Äî —Ñ–æ—Ä–º–∞ —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–µ–π.
- `EstimateMobileView` ‚Äî –º–æ–±–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–∑–∏—Ü–∏–π.

### –í–∏–¥–∂–µ—Ç—ã:
- `EstimateTableView` ‚Äî –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–µ–∂–∏–º–æ–≤ ¬´–°–º–µ—Ç–∞¬ª / ¬´–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ¬ª –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é.
- `EstimateItemDetailsDialog` ‚Äî –æ–∫–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–∏–Ω—Ñ–æ-–∫–∞—Ä—Ç–æ—á–∫–∏ + —Ç–∞–±–ª–∏—Ü–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö).
- `EstimateCompletionHistoryPanel` ‚Äî –ø–∞–Ω–µ–ª—å –∏—Å—Ç–æ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (—É—á–∞—Å—Ç–æ–∫, —ç—Ç–∞–∂, –¥–∞—Ç–∞).
- `MaterialFromReceiptsPicker` ‚Äî –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –∏ –ø—Ä–∏–≤—è–∑–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏–∑ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö.
- `EstimateSearchField` & `EstimateFilterButtons` ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

### –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã (Riverpod):
- `estimateGroupsProvider` ‚Äî —Å–ø–∏—Å–æ–∫ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Å–º–µ—Ç (RPC `get_estimate_groups`).
- `groupedEstimateFilesProvider` ‚Äî –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è Sidebar.
- `estimateItemsProvider` ‚Äî –ø–æ–∑–∏—Ü–∏–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Å–º–µ—Ç—ã.
- `estimateCompletionByIdsProvider` ‚Äî –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (—Ä–∞–±–æ—Ç—ã + –º–∞—Ç–µ—Ä–∏–∞–ª—ã).
- `linkedMaterialsProvider` ‚Äî (–∏–∑ –º–æ–¥—É–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤) –¥–µ—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫ –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö.

---

## üèóÔ∏è –°–ª–æ–π Domain/Data

- **–°—É—â–Ω–æ—Å—Ç–∏:** `Estimate`, `EstimateCompletionHistory`.
- **Use Cases:** `GetEstimatesUseCase`, `CreateEstimateUseCase`, `UpdateEstimateUseCase`, `DeleteEstimateUseCase`.
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** `EstimateRepositoryImpl`.
- **–ú–æ–¥–µ–ª–∏:** 
    - `EstimateModel` ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å –ë–î.
    - `EstimateCompletionModel` ‚Äî –º–æ–¥–µ–ª—å –¥–ª—è —Ä–µ–∂–∏–º–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (—Ñ–∞–∫—Ç, –æ—Å—Ç–∞—Ç–æ–∫, % –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –º–∞—Ç–µ—Ä–∏–∞–ª—ã).
    - `MaterialBindingModel` ‚Äî –º–æ–¥–µ–ª—å –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø—Ä–∏–≤—è–∑–∫–∏.

---

## üìÇ –î–µ—Ä–µ–≤–æ —Ñ–∞–π–ª–æ–≤
```
lib/features/estimates/
‚îú‚îÄ‚îÄ presentation/
‚îÇ   ‚îú‚îÄ‚îÄ mixins/          # estimate_actions_mixin.dart
‚îÇ   ‚îú‚îÄ‚îÄ providers/       # estimate_providers.dart
‚îÇ   ‚îú‚îÄ‚îÄ screens/         # estimate_desktop_view.dart, estimates_list_screen.dart, etc.
‚îÇ   ‚îú‚îÄ‚îÄ utils/           # estimate_sorter.dart
‚îÇ   ‚îî‚îÄ‚îÄ widgets/         # estimate_table_view.dart, estimate_item_details_dialog.dart, 
‚îÇ                        # material_from_receipts_picker.dart, etc.
lib/domain/
‚îú‚îÄ‚îÄ entities/            # estimate.dart
‚îú‚îÄ‚îÄ repositories/        # estimate_repository.dart
‚îî‚îÄ‚îÄ usecases/estimate/   # create_estimate_usecase.dart, etc.
lib/data/
‚îú‚îÄ‚îÄ datasources/         # estimate_data_source.dart
‚îú‚îÄ‚îÄ models/              # estimate_model.dart, estimate_completion_model.dart
‚îú‚îÄ‚îÄ repositories/        # estimate_repository_impl.dart
‚îî‚îÄ‚îÄ services/            # excel_estimate_service.dart
```

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Audit)

### ‚öôÔ∏è RPC –§—É–Ω–∫—Ü–∏–∏
1.  **`get_estimate_completion_by_ids`**: –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç (`work_items`) –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (`v_materials_grouped_by_estimate`) –ø–æ —Å–ø–∏—Å–∫—É ID.
2.  **`get_materials_with_binding_status`**: –ü–æ–∏—Å–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏–≤—è–∑–∫–∏ (available, current, conflict).
3.  **`get_estimate_groups`**: –ë—ã—Å—Ç—Ä–∞—è –≤—ã–±–æ—Ä–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Å–º–µ—Ç –¥–ª—è —Ä–µ–µ—Å—Ç—Ä–∞.
4.  **`get_linked_materials_details`**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –ø–æ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–º –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –ø–æ –¥–∞—Ç–µ.

### –¢–∞–±–ª–∏—Ü–∞ `estimates`
- **RLS:** ‚úÖ –í–∫–ª—é—á—ë–Ω. –ü–æ–ª–∏—Ç–∏–∫–∞: `company_id IN (SELECT get_my_company_ids())`.
- **–ò–Ω–¥–µ–∫—Å—ã:** `idx_estimates_grouping` (title, object, contract), `idx_estimates_sort` (system, subsystem, number).

---

## ‚öôÔ∏è –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
1. **–°–≤—è–∑—å –†–∞–±–æ—Ç—ã-–ú–∞—Ç–µ—Ä–∏–∞–ª—ã:**
   - **–ê–ª–∏–∞—Å—ã:** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É `material_aliases`. –ü—Ä–∏–≤—è–∑–∫–∞ 1:1 –≤ —Ä–∞–º–∫–∞—Ö –¥–æ–≥–æ–≤–æ—Ä–∞.
   - **–ü–µ—Ä–µ—Å—á–µ—Ç (Multiplier):** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–∏ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è.
2. **–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è (Position Insights):**
   - –ù–∞–∂–∞—Ç–∏–µ ¬´–î–µ—Ç–∞–ª–∏¬ª –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–≤–æ–¥–Ω–æ–µ –æ–∫–Ω–æ, –≥–¥–µ –¥–∞–Ω–Ω—ã–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–∏–∑ `EstimateCompletionModel`) –¥–æ–ø–æ–ª–Ω—è—é—Ç—Å—è —Å–ø–∏—Å–∫–æ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–∞—Ä—Ç–∏–π –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (—á–µ—Ä–µ–∑ `linkedMaterialsProvider`), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∏–¥–µ—Ç—å, –∏–∑ –∫–∞–∫–∏—Ö –∏–º–µ–Ω–Ω–æ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –ø—Ä–∏—à–µ–ª –º–∞—Ç–µ—Ä–∏–∞–ª –¥–ª—è —ç—Ç–æ–π —Ä–∞–±–æ—Ç—ã.
3. **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** 
   - –ü—Ä–∞–≤–∞—è –∫–Ω–æ–ø–∫–∞ –º—ã—à–∏ –≤ `EstimateTableView` –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π: –î–µ—Ç–∞–ª–∏, –°–ø–∏—Å–∞—Ç—å (–ø—Ä–∏–≤—è–∑–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤), –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, –£–¥–∞–ª–∏—Ç—å.
4. **FIFO –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –û—Å—Ç–∞—Ç–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤ —Å–º–µ—Ç–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∞–ª–∏–∞—Å–æ–≤ –∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Å–ø–∏—Å–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç.

---

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **Edge Functions:** `ks2_operations` (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–∫—Ç–æ–≤).
- **Excel:** –ò–º–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ `excel` –ø–∞–∫–µ—Ç —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

---

## üó∫Ô∏è Roadmap
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤ –æ—Ç—á–µ—Ç –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏.
- ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –∏ –æ–∫–Ω–æ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–∑–∏—Ü–∏–∏.
- ‚úÖ –ü—Ä–∏–≤—è–∑–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏–∑ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Å–º–µ—Ç—ã.
- ‚úÖ –°—Ç—Ä–æ–≥–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å 1:1 –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –¥–æ–≥–æ–≤–æ—Ä–∞.
- üü¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö —Å–º–µ—Ç –Ω–∞ –ø–µ—á–∞—Ç–Ω—ã–µ —Ñ–æ—Ä–º—ã.
- üü° –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (–∞—É–¥–∏—Ç) —Ü–µ–Ω –≤ —Å–º–µ—Ç–µ.
- üî¥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ì—Ä–∞–Ω–¥-–°–º–µ—Ç–æ–π (xml/arps).
