═══════════════════════════════════════════════════════════════════════════════
  СИСТЕМА УПРАВЛЕНИЯ ВЕРСИЯМИ ПРИЛОЖЕНИЯ — КРАТКОЕ РЕЗЮМЕ
═══════════════════════════════════════════════════════════════════════════════

📱 ЧТО ЭТО?
───────────────────────────────────────────────────────────────────────────────
Модуль для управления версиями приложения в production. Позволяет админам
мгновенно блокировать старые версии через Realtime синхронизацию.

✨ КЛЮЧЕВЫЕ ВОЗМОЖНОСТИ:
───────────────────────────────────────────────────────────────────────────────
✅ Блокировка старых версий приложения
✅ Realtime синхронизация (обновление за ~1 сек)
✅ Единая версия для iOS, Android, Web
✅ Админ-панель управления
✅ Экран принудительного обновления
✅ RLS защита (только админы могут менять)

📊 ТАБЛИЦА БД: app_versions
───────────────────────────────────────────────────────────────────────────────
Строк:             1 (всегда одна)
Колонки:           7 (id, current_version, minimum_version, force_update, 
                      update_message, created_at, updated_at)
RLS:               ✅ Включен
Realtime:          ✅ Активирован
Текущие данные:    1.0.3 (current) / 1.0.2 (minimum) / true (force_update)

🔧 ОСНОВНЫЕ ФАЙЛЫ:
───────────────────────────────────────────────────────────────────────────────
lib/core/constants/app_constants.dart       — версия приложения (1.0.2)
lib/core/utils/version_utils.dart           — сравнение версий
lib/data/repositories/version_repository.dart — API к БД
lib/features/version_control/             — UI экраны
lib/main.dart (119-155)                     — Realtime слушатель
supabase/migrations/...sql                 — Миграция БД

🚀 КАК РАБОТАЕТ:
───────────────────────────────────────────────────────────────────────────────
1. Админ открывает: /settings/version-management
2. Меняет minimum_version (e.g. 1.0.1 → 1.0.2)
3. Нажимает сохранить
4. Supabase Realtime публикует событие (~1 сек)
5. Все приложения получают обновление
6. Если текущая версия < minimum → redirect на /force-update
7. Пользователи видят экран обновления

📚 ДОКУМЕНТАЦИЯ:
───────────────────────────────────────────────────────────────────────────────
1. INDEX_VERSION_MANAGEMENT.md       — Навигация и быстрые ссылки
2. VERSION_QUICK_REFERENCE.md        — Краткая справка + примеры
3. VERSION_MANAGEMENT.md             — Полная техническая документация

💡 БЫСТРЫЙ СТАРТ:
───────────────────────────────────────────────────────────────────────────────
Новичку:
  1. Прочитай INDEX_VERSION_MANAGEMENT.md (5 мин)
  2. Посмотри примеры в VERSION_QUICK_REFERENCE.md (10 мин)
  3. Поэкспериментируй с админ-панелью (5 мин)
  → Готов к работе за 20 мин

Нужна конкретная информация:
  1. Откройте INDEX_VERSION_MANAGEMENT.md
  2. Найдите вопрос в разделе "Где найти ответы на вопросы?"
  3. Перейдите по ссылке
  → Ответ за 2-3 мин

🔒 БЕЗОПАСНОСТЬ:
───────────────────────────────────────────────────────────────────────────────
✅ Чтение:   Все аутентифицированные пользователи
✅ Запись:   Только администраторы (role='admin')
✅ Realtime: Supabase контролирует доступ
✅ Валидация: Формат версии ^\\d+\\.\\d+\\.\\d+$

❓ ЧАСТО ЗАДАВАЕМЫЕ ВОПРОСЫ:
───────────────────────────────────────────────────────────────────────────────
Q: Как обновить версию?
A: На админ-панели /settings/version-management измените minimum_version

Q: Где текущая версия приложения?
A: lib/core/constants/app_constants.dart: AppConstants.appVersion = '1.0.2'

Q: Как это работает на клиенте?
A: main.dart слушает watchAppVersionProvider и редиректит на /force-update

Q: Какой формат версии?
A: Семантический версионинг major.minor.patch (1.0.3)

Q: Как тестировать?
A: Откройте на двух устройствах, измените версию на админ-панели

📈 СОСТОЯНИЕ:
───────────────────────────────────────────────────────────────────────────────
✅ MVP                — блокировка/разблокировка версий
✅ Realtime           — мгновенное обновление во всех приложениях
✅ Admin UI           — панель управления для администраторов
✅ Все платформы      — iOS, Android, Web (единая версия)
✅ RLS защита         — только админы могут менять
✅ Документация       — полная и актуальная

🔄 ПЛАНЫ РАЗВИТИЯ:
───────────────────────────────────────────────────────────────────────────────
🟡 Platform-specific  — отдельные версии для iOS/Android (Q4 2025)
🟡 Gradual rollout    — выпуск версии поэтапно (Q1 2026)
🟢 Analytics          — аналитика обновлений (Q2 2026)

═══════════════════════════════════════════════════════════════════════════════
Дата: 16 октября 2025
Статус: ✅ Готово к использованию
Контакт: dev-team
═══════════════════════════════════════════════════════════════════════════════
