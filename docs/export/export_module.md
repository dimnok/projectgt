# –ú–æ–¥—É–ª—å –í—ã–≥—Ä—É–∑–∫–∞ (Export)

**–î–∞—Ç–∞:** 22.01.2026
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ (–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è Excel –∏ PDF –≤—ã–≥—Ä—É–∑–æ–∫ –í–û–†, –≤–Ω–µ–¥—Ä–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —É—á–µ—Ç–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–π)

## üìå –í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ
–ú–æ–¥—É–ª—å —è–≤–ª—è–µ—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ –≤—Å–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º —Ä–∞–±–æ—Ç–∞–º. –û–Ω –Ω–µ –≤–ª–∞–¥–µ–µ—Ç –¥–∞–Ω–Ω—ã–º–∏ –Ω–∞–ø—Ä—è–º—É—é, –∞ –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ —Ç–∞–±–ª–∏—Ü `works` –∏ `work_items`. 

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –†–∞–±–æ—Ç–∞–µ—Ç –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –Ω–∞ Desktop-–≤–µ—Ä—Å–∏—è—Ö (—à–∏—Ä–∏–Ω–∞ > 900px).
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **—Å–µ—Ä–≤–µ—Ä–Ω—É—é –ø–∞–≥–∏–Ω–∞—Ü–∏—é** (Server-side Pagination) –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö (100 000+ –∑–∞–ø–∏—Å–µ–π).
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **—Å–µ—Ä–≤–µ—Ä–Ω—É—é –∞–≥—Ä–µ–≥–∞—Ü–∏—é** (Server-side Aggregation) –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –∏—Ç–æ–≥–æ–≤.
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∞–ø–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —à–∏—Ä–∏–Ω—ã –∫–æ–ª–æ–Ω–æ–∫.

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ
–ú–æ–¥—É–ª—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –æ–±—ä–µ–∫—Ç–∞–º, –¥–∞—Ç–∞–º, —Å–∏—Å—Ç–µ–º–∞–º, —É—á–∞—Å—Ç–∫–∞–º –∏ —ç—Ç–∞–∂–∞–º. –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏ –∏ —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö.

### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—é —Ä–∞–±–æ—Ç/–º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (ILike).
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–µ—Ä–∏–æ–¥—É –¥–∞—Ç.
- –ö–∞—Å–∫–∞–¥–Ω—ã–π Multi-select (–≤—ã–±–æ—Ä –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–∏—Å—Ç–µ–º, —É—á–∞—Å—Ç–∫–æ–≤ –∏ —ç—Ç–∞–∂–µ–π).
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏ —Å—É–º–º—ã –ø–æ –≤—Å–µ–π –≤—ã–±–æ—Ä–∫–µ.
- –ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –¥–µ—Ç–∞–ª—è–º —Å–º–µ–Ω—ã –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø–æ–∑–∏—Ü–∏–∏ (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤) —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é.

## üîó –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- **–í–ª–∞–¥–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü–∞–º–∏ (Owner):** –ù–µ—Ç (–º–æ–¥—É–ª—å —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞–µ—Ç –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç).
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü (Usage):**
  - `works` ‚Äî –¥–∞–Ω–Ω—ã–µ –æ —Å–º–µ–Ω–∞—Ö (–¥–∞—Ç—ã, –æ–±—ä–µ–∫—Ç—ã, —Å—Ç–∞—Ç—É—Å—ã).
  - `work_items` ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ —Ä–∞–±–æ—Ç –≤ —Å–º–µ–Ω–∞—Ö.
  - `estimates` ‚Äî —Ü–µ–Ω–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∏ –Ω–æ–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–π.
  - `objects` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.
  - `contracts` ‚Äî –Ω–æ–º–µ—Ä–∞ –¥–æ–≥–æ–≤–æ—Ä–æ–≤ —á–µ—Ä–µ–∑ —Å–º–µ—Ç—ã.

## üé® –°–ª–æ–π Presentation

### –≠–∫—Ä–∞–Ω—ã –∏ –¢–∞–±—ã:
- `ExportScreen` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω –º–æ–¥—É–ª—è.
- `ExportTabSearch` ‚Äî –≤–∫–ª–∞–¥–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤–∏–¥–∂–µ—Ç —Ç–∞–±–ª–∏—Ü—ã.

### –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã (Riverpod):
- `workSearchProvider` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–∏—Å–∫–∞ –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (`WorkSearchState`).
- `workSearchFilterValuesProvider` ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è —á–∏–ø–æ–≤-—Ñ–∏–ª—å—Ç—Ä–æ–≤.
- `exportSearchFilterProvider` ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ (—Å–∏—Å—Ç–µ–º—ã, —É—á–∞—Å—Ç–∫–∏, —ç—Ç–∞–∂–∏).
- `exportSelectedObjectIdProvider` ‚Äî —Ç–µ–∫—É—â–∏–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç.
- `workSearchDateRangeProvider` ‚Äî –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –¥–∞—Ç.

### –í–∏–¥–∂–µ—Ç—ã (Design System):
- `ExportResultsTableView` ‚Äî –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ (–∞–Ω–∞–ª–æ–≥ —Å–º–µ—Ç–Ω–æ–π). 
  - **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫—Ä–æ–ª–ª**: –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ –¥–∞–Ω–Ω—ã—Ö.
  - **Dynamic Width**: —Ä–∞—Å—á–µ—Ç —à–∏—Ä–∏–Ω—ã 11 –∫–æ–ª–æ–Ω–æ–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ (`_measureText`).
  - **Footer**: –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –∏—Ç–æ–≥–æ–≤, –≤—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–¥—è—â–∞—è—Å—è –≤ –∫–æ–Ω—Ü–µ —Å–ø–∏—Å–∫–∞.
- `ExportSearchFilterChips` ‚Äî –∫–∞—Å–∫–∞–¥–Ω—ã–µ —á–∏–ø—ã Multi-select.
- `ExportSearchAction` ‚Äî –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞ –≤ AppBar.
- `WorkSearchDateRangeAction` ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –≤—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞ –¥–∞—Ç.
- `WorkSearchExportAction` ‚Äî –∫–Ω–æ–ø–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞.

## ‚öôÔ∏è –°–ª–æ–π Domain/Data

### –°—É—â–Ω–æ—Å—Ç–∏ (Entities):
- `WorkSearchResult` ‚Äî –º–æ–¥–µ–ª—å —Å—Ç—Ä–æ–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (immutable, Freezed).
- `WorkSearchPaginatedResult` ‚Äî –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è –ø–∞–≥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã—Ö (totalCount, totalSum).

### –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:
- `WorkSearchRepository` ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º –ø–æ–∏—Å–∫–∞.
- `WorkSearchDataSourceImpl` ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ Supabase. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `GtFormatters` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞—Ç –≤ API.

## üìÇ –î–µ—Ä–µ–≤–æ —Ñ–∞–π–ª–æ–≤
```text
lib/features/export/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ datasources/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ work_search_data_source.dart
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ work_search_data_source_impl.dart
‚îÇ   ‚îî‚îÄ‚îÄ repositories/
‚îÇ       ‚îî‚îÄ‚îÄ work_search_repository_impl.dart
‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îú‚îÄ‚îÄ entities/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ work_search_result.dart
‚îÇ   ‚îî‚îÄ‚îÄ repositories/
‚îÇ       ‚îî‚îÄ‚îÄ work_search_repository.dart
‚îî‚îÄ‚îÄ presentation/
    ‚îú‚îÄ‚îÄ providers/
    ‚îÇ   ‚îú‚îÄ‚îÄ repositories_providers.dart
    ‚îÇ   ‚îú‚îÄ‚îÄ work_search_date_provider.dart
    ‚îÇ   ‚îî‚îÄ‚îÄ work_search_provider.dart
    ‚îú‚îÄ‚îÄ screens/
    ‚îÇ   ‚îú‚îÄ‚îÄ export_screen.dart
    ‚îÇ   ‚îî‚îÄ‚îÄ tabs/
    ‚îÇ       ‚îî‚îÄ‚îÄ export_tab_search.dart
    ‚îî‚îÄ‚îÄ widgets/
        ‚îú‚îÄ‚îÄ export_results_table_view.dart   # –ù–æ–≤–∞—è –∫–∞—Å—Ç–æ–º–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞
        ‚îú‚îÄ‚îÄ export_search_action.dart
        ‚îú‚îÄ‚îÄ export_search_filter_chips.dart
        ‚îú‚îÄ‚îÄ export_work_item_edit_modal.dart
        ‚îî‚îÄ‚îÄ work_search_date_filter.dart
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Audit)

### SQL –§—É–Ω–∫—Ü–∏–∏ (RPC):
1. **`get_work_items_available_filters`**:
   - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã, —É—á–∞—Å—Ç–∫–∏ –∏ —ç—Ç–∞–∂–∏ —Å —É—á–µ—Ç–æ–º –∫–∞—Å–∫–∞–¥–∞.
   - **RLS:** ‚úÖ –í–∫–ª—é—á—ë–Ω (Security Defininer).
2. **`get_work_items_aggregates`**:
   - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –†–∞—Å—á–µ—Ç `total_count`, `total_quantity` –∏ `total_sum` –ø–æ –≤—Å–µ–π –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω–æ–π –≤—ã–±–æ—Ä–∫–µ.
3. **`search_work_items_paginated`**:
   - **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–∞–≥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–∏—Å–∫ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –ø–æ –¥–∞—Ç–µ —á–µ—Ä–µ–∑ `JOIN works`.
   - **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** –í—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã + `p_from`, `p_to`.

### –ò–Ω–¥–µ–∫—Å—ã:
- `idx_works_date_desc` ‚Äî –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –¥–∞—Ç–µ.
- `idx_work_items_name_gin` ‚Äî –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞.

## üß† –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:
- –í –º–æ–¥—É–ª–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ —Ä—É—á–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –∏ —á–∏—Å–µ–ª. 
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∞–ª–∏–∞—Å—ã –∏–∑ `lib/core/utils/formatters.dart`: `formatRuDate`, `formatCurrency`, `formatQuantity`.
- –î–ª—è API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `GtFormatters.formatDateForApi`.

### –ü—Ä–æ—Ü–µ—Å—Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç **–û–±—ä–µ–∫—Ç** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ).
2. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —á–µ—Ä–µ–∑ RPC –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è —ç—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.
3. –ü—Ä–∏ –≤—ã–±–æ—Ä–µ **–°–∏—Å—Ç–µ–º—ã**, —Å–ø–∏—Å–æ–∫ **–£—á–∞—Å—Ç–∫–æ–≤** —Å—É–∂–∞–µ—Ç—Å—è (—Å–µ—Ä–≤–µ—Ä–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è).
4. –ü—Ä–∏ –≤–≤–æ–¥–µ —Ç–µ–∫—Å—Ç–∞ –≤ –ø–æ–∏—Å–∫, –∏ —Ñ–∏–ª—å—Ç—Ä—ã, –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (debounce 500ms).
5. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:** –î–∞–Ω–Ω—ã–µ –≤—Å–µ–≥–¥–∞ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –¥–∞—Ç–µ —Å–º–µ–Ω—ã (`works.date`) –≤ –ø–æ—Ä—è–¥–∫–µ —É–±—ã–≤–∞–Ω–∏—è (–Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É), –∑–∞—Ç–µ–º –ø–æ `id` –∑–∞–ø–∏—Å–∏. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î —á–µ—Ä–µ–∑ RPC.

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **Edge Functions:**
  - `generate_vor`: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Excel-–æ—Ç—á–µ—Ç–∞ –í–û–†. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–º—ã –∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è, —É—á–∏—Ç—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–∏–æ–¥–∞.
  - `generate_vor_pdf`: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF-–æ—Ç—á–µ—Ç–∞ –í–û–†. –ò–¥–µ–Ω—Ç–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å Excel-–≤–µ—Ä—Å–∏–µ–π.
  - `export-work-search-all` / `export-work-search-pto`: –≠–∫—Å–ø–æ—Ä—Ç –æ–±—â–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞.
- **Supabase RPC:** –í—Å–µ —Ç—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ —Ö—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã.

## üß† –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤—ã–≥—Ä—É–∑–∫–∏ –í–û–† (Excel/PDF)

### 1. –£—á–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ (Historical Usage)
–î–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏ —Å–º–µ—Ç—ã (`estimate_id`) —Å–∏—Å—Ç–µ–º–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç —Å—É–º–º–∞—Ä–Ω—ã–π –æ–±—ä–µ–º —Ä–∞–±–æ—Ç, –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π **—Å—Ç—Ä–æ–≥–æ –¥–æ** –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞ (`dateFrom`) –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ—Å—Ç–∞—Ç–æ–∫ –ª–∏–º–∏—Ç–∞ –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É –Ω–∞ –º–æ–º–µ–Ω—Ç —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞.

### 2. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–±—ä–µ–º–æ–≤ (Overrun Splitting)
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–¥–µ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –Ω–∞ –¥–≤–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
- **–í –ø—Ä–µ–¥–µ–ª–∞—Ö –¥–æ–≥–æ–≤–æ—Ä–∞ (–ù–æ—Ä–º–∞):** –û–±—ä–µ–º, –∫–æ—Ç–æ—Ä—ã–π —É–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –≤ –æ—Å—Ç–∞—Ç–æ–∫ –ø–æ —Å–º–µ—Ç–µ (`–õ–∏–º–∏—Ç - –í—ã–ø–æ–ª–Ω–µ–Ω–æ_—Ä–∞–Ω–µ–µ`).
- **–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ (Overrun):** –û–±—ä–µ–º, –≤—ã—Ö–æ–¥—è—â–∏–π –∑–∞ —Ä–∞–º–∫–∏ —Å–º–µ—Ç–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞, –ª–∏–±–æ —Ä–∞–±–æ—Ç—ã –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ —Å–º–µ—Ç–µ.

### 3. –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–µ–∫—Ü–∏–π:** –í –æ—Ç—á–µ—Ç–∞—Ö (–∏ Excel, –∏ PDF) —Å–µ–∫—Ü–∏—è –ø—Ä–µ–≤—ã—à–µ–Ω–∏–π –æ—Ç–¥–µ–ª—è–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º "–ü–†–ï–í–´–®–ï–ù–ò–ï –û–ë–™–ï–ú–û–í –ò –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ê–ë–û–¢–´...".
- **–í–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ:** –í Excel —Å—Ç—Ä–æ–∫–∞-—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –∏–º–µ–µ—Ç —Å–µ—Ä—ã–π —Ñ–æ–Ω (`#EEEEEE`).
- **–ü–æ–¥–ø–∏—Å–∏ —Å—Ç–æ—Ä–æ–Ω:** –î–∞–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∞–Ω—Ç–æ–≤ (–§–ò–û, –¥–æ–ª–∂–Ω–æ—Å—Ç—å) –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `contracts` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞.

## üó∫Ô∏è Roadmap
- [x] –°–µ—Ä–≤–µ—Ä–Ω–∞—è –ø–∞–≥–∏–Ω–∞—Ü–∏—è (250 —Å—Ç—Ä–æ–∫/—Å—Ç—Ä).
- [x] –ö–∞—Å–∫–∞–¥–Ω—ã–π Multi-select —Ñ–∏–ª—å—Ç—Ä–æ–≤.
- [x] –°–µ—Ä–≤–µ—Ä–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è –∏—Ç–æ–≥–æ–≤.
- [x] –ö–∞—Å—Ç–æ–º–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º (—Å—Ç–∞–Ω–¥–∞—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞).
- [x] –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`GtFormatters`).
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –¥–∞—Ç–µ (—á–µ—Ä–µ–∑ RPC).
- [x] –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è Excel –∏ PDF –≤—ã–≥—Ä—É–∑–æ–∫ (—É—á–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–π).
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –¥–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ (>50–∫ —Å—Ç—Ä–æ–∫).
- [ ] –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –≤–∫–ª–∞–¥–∫–∏ –ø–æ–∏—Å–∫–∞ (–∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞).
