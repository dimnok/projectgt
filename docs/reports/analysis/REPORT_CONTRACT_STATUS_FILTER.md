# ‚úÖ –§–ò–õ–¨–¢–†–ê–¶–ò–Ø –ü–û –°–¢–ê–¢–£–°–£ –î–û–ì–û–í–û–†–ê

## üéØ –ß–¢–û –°–î–ï–õ–ê–ù–û

### 1Ô∏è‚É£ –î–æ–≥–æ–≤–æ—Ä—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ —Å—Ç–∞—Ç—É—Å—É
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–æ–≥–æ–≤–æ—Ä—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º **`ContractStatus.active`** ("–≤ —Ä–∞–±–æ—Ç–µ")
- ‚úÖ –î–æ–≥–æ–≤–æ—Ä—ã —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ `suspended` (–ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω) –∏ `completed` (–∑–∞–≤–µ—Ä—à—ë–Ω) **–ù–ï –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è**

### 2Ô∏è‚É£ –û–±—ä–µ–∫—Ç—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ –Ω–∞–ª–∏—á–∏—é –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç—ã, —É –∫–æ—Ç–æ—Ä—ã—Ö **–µ—Å—Ç—å —Ö–æ—Ç—è –±—ã 1 –∞–∫—Ç–∏–≤–Ω—ã–π –¥–æ–≥–æ–≤–æ—Ä**
- ‚úÖ –û–±—ä–µ–∫—Ç—ã –±–µ–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤ **–ù–ï –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è** –≤ —Ñ–∏–ª—å—Ç—Ä–µ

### 3Ô∏è‚É£ –ö–∞—Å–∫–∞–¥–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- ‚úÖ –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –æ–±—ä–µ–∫—Ç–∞ ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ–≥–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã
- ‚úÖ –°–∏—Å—Ç–µ–º—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞–º –∏ –¥–æ–≥–æ–≤–æ—Ä–∞–º

---

## üíª –ß–¢–û –ò–ó–ú–ï–ù–ò–õ–û–°–¨

### `estimate_completion_filter_provider.dart`

```dart
// –ò–º–ø–æ—Ä—Ç —Ç–∏–ø–∞ ContractStatus
import 'package:projectgt/domain/entities/contract.dart';
```

#### 1. –ü—Ä–æ–≤–∞–π–¥–µ—Ä –æ–±—ä–µ–∫—Ç–æ–≤ ‚Äî —Ç–æ–ª—å–∫–æ —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏

```dart
/// –ü—Ä–æ–≤–∞–π–¥–µ—Ä –æ–±—ä–µ–∫—Ç–æ–≤ ‚Äî —Ç–æ–ª—å–∫–æ —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏
final availableObjectsForCompletionProvider = Provider<List<dynamic>>((ref) {
  final filter = ref.watch(estimateCompletionFilterProvider);
  final contractState = ref.watch(contractProvider);

  // –ü–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã
  final activeContracts = contractState.contracts
      .where((c) => c.status == ContractStatus.active)
      .toList();

  // –°–æ–±–∏—Ä–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ ID –æ–±—ä–µ–∫—Ç–æ–≤ —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏
  final objectIds = activeContracts.map((c) => c.objectId).toSet();

  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç—ã –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –≤ –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–æ–≥–æ–≤–æ—Ä–∞—Ö
  return filter.objects.where((o) => objectIds.contains(o.id)).toList();
});
```

#### 2. –ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–æ–≤ ‚Äî —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ

```dart
/// –ü—Ä–æ–≤–∞–π–¥–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–æ–≤ ‚Äî —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ (–≤ —Ä–∞–±–æ—Ç–µ)
final availableContractsForCompletionProvider = Provider<List<dynamic>>((ref) {
  final filter = ref.watch(estimateCompletionFilterProvider);
  final contractState = ref.watch(contractProvider);

  final selectedObjectIds = filter.objectIds;

  // –§–∏–ª—å—Ç—Ä—É–µ–º –¥–æ–≥–æ–≤–æ—Ä—ã: —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–≤ —Ä–∞–±–æ—Ç–µ"
  return contractState.contracts
      .where((c) {
        // –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π —Å—Ç–∞—Ç—É—Å
        if (c.status != ContractStatus.active) return false;

        // –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω—ã –æ–±—ä–µ–∫—Ç—ã, –¥–æ–≥–æ–≤–æ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–ª—è –Ω–∏—Ö
        if (selectedObjectIds.isNotEmpty &&
            !selectedObjectIds.contains(c.objectId)) {
          return false;
        }

        return true;
      })
      .toList();
});
```

---

## üìä –õ–û–ì–ò–ö–ê –†–ê–ë–û–¢–´

### –°—Ç–∞—Ç—É—Å—ã –¥–æ–≥–æ–≤–æ—Ä–æ–≤ (ContractStatus enum)
```dart
enum ContractStatus {
  active,      // ‚úÖ –í —Ä–∞–±–æ—Ç–µ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è)
  suspended,   // ‚ùå –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è)
  completed,   // ‚ùå –ó–∞–≤–µ—Ä—à—ë–Ω (–ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è)
}
```

### –ü—Ä–∏–º–µ—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

#### –ü—Ä–∏–º–µ—Ä 1: –£ –æ–±—ä–µ–∫—Ç–∞ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –∏ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã
```
–û–±—ä–µ–∫—Ç "–°—Ç—Ä–æ–π–∫–∞ ‚Ññ1"
‚îú‚îÄ –î–æ–≥–æ–≤–æ—Ä A (active) ‚Üí ‚úÖ –ü–û–ö–ê–ó–´–í–ê–ï–¢–°–Ø
‚îú‚îÄ –î–æ–≥–æ–≤–æ—Ä B (completed) ‚Üí ‚ùå –ù–ï –ü–û–ö–ê–ó–´–í–ê–ï–¢–°–Ø
‚îî‚îÄ –î–æ–≥–æ–≤–æ—Ä C (active) ‚Üí ‚úÖ –ü–û–ö–ê–ó–´–í–ê–ï–¢–°–Ø
```

#### –ü—Ä–∏–º–µ—Ä 2: –û–±—ä–µ–∫—Ç –±–µ–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤
```
–û–±—ä–µ–∫—Ç "–°—Ç–∞—Ä–∞—è —Å—Ç—Ä–æ–π–∫–∞"
‚îú‚îÄ –î–æ–≥–æ–≤–æ—Ä D (completed)
‚îú‚îÄ –î–æ–≥–æ–≤–æ—Ä E (suspended)
‚îî‚îÄ –î–æ–≥–æ–≤–æ—Ä F (completed)

‚Üì –†–ï–ó–£–õ–¨–¢–ê–¢: –û–±—ä–µ–∫—Ç –ù–ï –ü–û–ö–ê–ó–´–í–ê–ï–¢–°–Ø –≤ —Ñ–∏–ª—å—Ç—Ä–µ
```

#### –ü—Ä–∏–º–µ—Ä 3: –û–±—ä–µ–∫—Ç —Å —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏
```
–û–±—ä–µ–∫—Ç "–ù–æ–≤–∞—è —Å—Ç—Ä–æ–π–∫–∞"
‚îú‚îÄ –î–æ–≥–æ–≤–æ—Ä X (active)
‚îú‚îÄ –î–æ–≥–æ–≤–æ—Ä Y (active)
‚îî‚îÄ –î–æ–≥–æ–≤–æ—Ä Z (active)

‚Üì –†–ï–ó–£–õ–¨–¢–ê–¢: –û–±—ä–µ–∫—Ç –ü–û–ö–ê–ó–´–í–ê–ï–¢–°–Ø, –≤—Å–µ 3 –¥–æ–≥–æ–≤–æ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ã
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê

```
‚úÖ estimate_completion_filter_provider.dart - NO LINTER ERRORS
‚úÖ –ò–º–ø–æ—Ä—Ç ContractStatus –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
‚úÖ –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Å—Ç–∞—Ç—É—Å—É —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ –û–±—ä–µ–∫—Ç—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
‚úÖ –î–æ–≥–æ–≤–æ—Ä—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
‚úÖ –ö–∞—Å–∫–∞–¥–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
```

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç:
1. ‚úÖ **–í –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ –æ–±—ä–µ–∫—Ç–æ–≤** ‚Äî —Ç–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç—ã —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏
2. ‚úÖ **–í –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ –¥–æ–≥–æ–≤–æ—Ä–æ–≤** ‚Äî —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã (—Å—Ç–∞—Ç—É—Å = "–≤ —Ä–∞–±–æ—Ç–µ")
3. ‚ùå **–ù–ï –≤–∏–¥–∏—Ç** –¥–æ–≥–æ–≤–æ—Ä—ã —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏:
   - `suspended` (–ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
   - `completed` (–∑–∞–≤–µ—Ä—à—ë–Ω)

---

**–°—Ç–∞—Ç—É—Å:** üéâ **–ì–û–¢–û–í–û**

**–î–∞—Ç–∞:** 2025-10-19
