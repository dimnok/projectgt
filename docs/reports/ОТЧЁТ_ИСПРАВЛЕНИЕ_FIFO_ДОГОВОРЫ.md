# ‚úÖ –û–¢–ß–Å–¢: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ FIFO - —Å—Ç—Ä–æ–≥–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –¥–æ–≥–æ–≤–æ—Ä–∞–º

**–î–∞—Ç–∞:** 6 –æ–∫—Ç—è–±—Ä—è 2025 –≥–æ–¥–∞  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** –ü—Ä–æ–µ–∫—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ `v_materials_with_usage` –ø—Ä–∏–º–µ–Ω—è–ª–æ FIFO –≥–ª–æ–±–∞–ª—å–Ω–æ –ø–æ –≤—Å–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –Ω–æ–º–µ—Ä –¥–æ–≥–æ–≤–æ—Ä–∞. –ú–∞—Ç–µ—Ä–∏–∞–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≤ –æ–¥–Ω–æ–º –¥–æ–≥–æ–≤–æ—Ä–µ, –Ω–æ —Å–ø–∏—Å—ã–≤–∞–ª—Å—è –∏–∑ –ø–∞—Ä—Ç–∏–∏ –¥—Ä—É–≥–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞.

**–†–µ—à–µ–Ω–∏–µ:**  
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ **—Å—Ç—Ä–æ–≥–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∫ –¥–æ–≥–æ–≤–æ—Ä–∞–º** ‚Äî FIFO —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞. –ú–∞—Ç–µ—Ä–∏–∞–ª—ã —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑ –ø–∞—Ä—Ç–∏–π —Ç–æ–≥–æ –∂–µ –¥–æ–≥–æ–≤–æ—Ä–∞, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è —Å–º–µ—Ç–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —É—á—ë—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤ –ø–æ –¥–æ–≥–æ–≤–æ—Ä–∞–º  
‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å  
‚úÖ –ò–∑–æ–ª—è—Ü–∏—è –¥–æ–≥–æ–≤–æ—Ä–æ–≤ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞

---

## üîç –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### 1. –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ `v_materials_with_usage`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –î–æ–±–∞–≤–ª–µ–Ω CTE `material_estimate_filtered` ‚Äî —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª—ã —Ç–æ–ª—å–∫–æ –∏–∑ —Ç–æ–≥–æ –∂–µ –¥–æ–≥–æ–≤–æ—Ä–∞, —á—Ç–æ –∏ —Å–º–µ—Ç–∞
2. –ò–∑–º–µ–Ω—ë–Ω `PARTITION BY` –≤ –æ–∫–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ FIFO: –¥–æ–±–∞–≤–ª–µ–Ω `contract_number`
3. FIFO —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞

**–î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
```sql
PARTITION BY me.estimate_id  -- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¢–û–õ–¨–ö–û –ø–æ —Å–º–µ—Ç–µ
```

**–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
```sql
PARTITION BY me.estimate_id, me.contract_number  -- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å–º–µ—Ç–µ –ò –¥–æ–≥–æ–≤–æ—Ä—É
```

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
```sql
-- –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏–∑ —Ç–æ–≥–æ –∂–µ –¥–æ–≥–æ–≤–æ—Ä–∞, —á—Ç–æ –∏ —Å–º–µ—Ç–∞
WHERE me.estimate_id IS NULL 
  OR me.contract_number = (
    SELECT c.number 
    FROM estimates e 
    JOIN contracts c ON c.id = e.contract_id 
    WHERE e.id = me.estimate_id
  )
```

---

### 2. –§—É–Ω–∫—Ü–∏—è `v_materials_usage_period`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞ –∂–µ –ª–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É
2. –ò–∑–º–µ–Ω—ë–Ω `PARTITION BY` –≤ –æ–∫–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ FIFO
3. –†–∞—Å—á—ë—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∑–∞ –ø–µ—Ä–∏–æ–¥ —Ç–µ–ø–µ—Ä—å —É—á–∏—Ç—ã–≤–∞–µ—Ç –¥–æ–≥–æ–≤–æ—Ä

**–°–∏–≥–Ω–∞—Ç—É—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π):**
```sql
v_materials_usage_period(
  in_date_start date,
  in_date_end date,
  in_contract_number text DEFAULT NULL
)
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç–æ–≤—ã–π —Å–ª—É—á–∞–π: –ü—Ä–æ—Ñ–∏–ª—å –º–æ–Ω—Ç–∞–∂–Ω—ã–π TSC 41—Ö82Dx2,0-6000 Zn275

#### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚ùå

| –î–æ–≥–æ–≤–æ—Ä | –ü–∞—Ä—Ç–∏–π | –í—Å–µ–≥–æ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ | –û—Å—Ç–∞—Ç–æ–∫ | –ü—Ä–æ–±–ª–µ–º–∞ |
|---------|--------|-------|--------------|---------|----------|
| 173-—Å—É–±-17 | 1 | 60 –º | **30 –º** | 30 –º | ‚ùå –°–ø–∏—Å–∞–Ω–æ –∏–∑ —á—É–∂–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞ |
| 173-—Å—É–±-26 | 9 | 3990 –º | **0 –º** | 3990 –º | ‚ùå –ù–µ —Å–ø–∏—Å–∞–Ω–æ, —Ö–æ—Ç—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ |

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–ú–∞—Ç–µ—Ä–∏–∞–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≤ –¥–æ–≥–æ–≤–æ—Ä–µ 173-—Å—É–±-26, –Ω–æ —Å–ø–∏—Å–∞–ª—Å—è –∏–∑ –¥–æ–≥–æ–≤–æ—Ä–∞ 173-—Å—É–±-17 (–ø–æ FIFO ‚Äî —Å–∞–º–∞—è —Ä–∞–Ω–Ω—è—è –ø–∞—Ä—Ç–∏—è).

---

#### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚úÖ

| –î–æ–≥–æ–≤–æ—Ä | –ü–∞—Ä—Ç–∏–π | –í—Å–µ–≥–æ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ | –û—Å—Ç–∞—Ç–æ–∫ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|---------|--------|-------|--------------|---------|-----------|
| 173-—Å—É–±-17 | 0 | 0 –º | **0 –º** | 0 –º | ‚úÖ –ò—Å–∫–ª—é—á—ë–Ω –∏–∑ —Ä–∞—Å—á—ë—Ç–∞ |
| 173-—Å—É–±-26 | 9 | 3990 –º | **30 –º** | 3960 –º | ‚úÖ –°–ø–∏—Å–∞–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ |

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
- –î–æ–≥–æ–≤–æ—Ä 173-—Å—É–±-17 **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á—ë–Ω** –∏–∑ —Ä–∞—Å—á—ë—Ç–∞ (—Ç–∞–∫ –∫–∞–∫ —Å–º–µ—Ç–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –¥–æ–≥–æ–≤–æ—Ä—É 173-—Å—É–±-26)
- –ú–∞—Ç–µ—Ä–∏–∞–ª —Å–ø–∏—Å–∞–Ω –∏–∑ **–ø–µ—Ä–≤–æ–π –ø–∞—Ä—Ç–∏–∏ –¥–æ–≥–æ–≤–æ—Ä–∞ 173-—Å—É–±-26** (FIFO –≤–Ω—É—Ç—Ä–∏ –¥–æ–≥–æ–≤–æ—Ä–∞)
- –û—Å—Ç–∞—Ç–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

### –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç –ø–æ –ø–∞—Ä—Ç–∏—è–º (–¥–æ–≥–æ–≤–æ—Ä 173-—Å—É–±-26)

| –ù–∞–∫–ª–∞–¥–Ω–∞—è | –î–∞—Ç–∞ | –ö–æ–ª-–≤–æ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ | –û—Å—Ç–∞—Ç–æ–∫ | FIFO |
|-----------|------|--------|--------------|---------|------|
| 2240 | 21.06.2024 | 492 –º | **30 –º** | 462 –º | ‚úÖ –ü–µ—Ä–≤–∞—è –ø–∞—Ä—Ç–∏—è |
| 2344 | 28.06.2024 | 516 –º | 0 –º | 516 –º | –ù–µ —Ç—Ä–æ–Ω—É—Ç–∞ |
| 2559 | 22.07.2024 | 504 –º | 0 –º | 504 –º | –ù–µ —Ç—Ä–æ–Ω—É—Ç–∞ |
| 2653 | 01.08.2024 | 420 –º | 0 –º | 420 –º | –ù–µ —Ç—Ä–æ–Ω—É—Ç–∞ |
| 2805 | 22.08.2024 | 180 –º | 0 –º | 180 –º | –ù–µ —Ç—Ä–æ–Ω—É—Ç–∞ |
| 3110 | 16.09.2024 | 504 –º | 0 –º | 504 –º | –ù–µ —Ç—Ä–æ–Ω—É—Ç–∞ |
| 3696 | 03.12.2024 | 528 –º | 0 –º | 528 –º | –ù–µ —Ç—Ä–æ–Ω—É—Ç–∞ |
| 455 | 28.02.2025 | 246 –º | 0 –º | 246 –º | –ù–µ —Ç—Ä–æ–Ω—É—Ç–∞ |
| 1637 | 14.07.2025 | 600 –º | 0 –º | 600 –º | –ù–µ —Ç—Ä–æ–Ω—É—Ç–∞ |

**FIFO —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**  
–°–ø–∏—Å–∞–Ω–∏–µ –∏–¥—ë—Ç —Å —Å–∞–º–æ–π —Ä–∞–Ω–Ω–µ–π –ø–∞—Ä—Ç–∏–∏ (21.06.2024) **–≤–Ω—É—Ç—Ä–∏ –¥–æ–≥–æ–≤–æ—Ä–∞ 173-—Å—É–±-26**.

---

### –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á—ë—Ç–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥

**–¢–µ—Å—Ç:** –ü–µ—Ä–∏–æ–¥ 01.09.2025 - 31.10.2025, –¥–æ–≥–æ–≤–æ—Ä 173-—Å—É–±-26

```sql
SELECT name, receipt_number, quantity, used_period, remaining_end
FROM v_materials_usage_period('2025-09-01', '2025-10-31', '173-—Å—É–±-26')
WHERE LOWER(name) LIKE '%–ø—Ä–æ—Ñ–∏–ª—å –º–æ–Ω—Ç–∞–∂–Ω—ã–π tsc 41—Ö82dx2,0-6000 zn275%'
LIMIT 5;
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

| –ù–∞–∫–ª–∞–¥–Ω–∞—è | –ö–æ–ª-–≤–æ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∑–∞ –ø–µ—Ä–∏–æ–¥ | –û—Å—Ç–∞—Ç–æ–∫ –Ω–∞ –∫–æ–Ω–µ—Ü |
|-----------|--------|------------------------|------------------|
| 2240 | 492 –º | **30 –º** ‚úÖ | 462 –º |
| 2344 | 516 –º | 0 –º | 516 –º |
| 2559 | 504 –º | 0 –º | 504 –º |
| 2653 | 420 –º | 0 –º | 420 –º |
| 2805 | 180 –º | 0 –º | 180 –º |

‚úÖ **–§—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** ‚Äî 30 –º–µ—Ç—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –≤ –ø–µ—Ä–∏–æ–¥–µ –∏–∑ –ø–µ—Ä–≤–æ–π –ø–∞—Ä—Ç–∏–∏ –¥–æ–≥–æ–≤–æ—Ä–∞ 173-—Å—É–±-26.

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. **–ë–î:**
   - `supabase/migrations/20251006_fix_materials_fifo_by_contract.sql` ‚Äî SQL-–º–∏–≥—Ä–∞—Ü–∏—è

2. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
   - `docs/reports/–ü–†–û–ë–õ–ï–ú–ê_FIFO_–ë–ï–ó_–£–ß–ï–¢–ê_–î–û–ì–û–í–û–†–û–í.md` ‚Äî –∏—Å—Ö–æ–¥–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã
   - `docs/reports/–û–¢–ß–Å–¢_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_FIFO_–î–û–ì–û–í–û–†–´.md` ‚Äî –¥–∞–Ω–Ω—ã–π –æ—Ç—á—ë—Ç
   - `docs/reports/–û–¢–ß–Å–¢_–ü–†–ò–í–Ø–ó–ö–ê_–ú–ê–¢–ï–†–ò–ê–õ–û–í_–ü–û_–î–û–ì–û–í–û–†–ê–ú.md` ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∫–∏ material_aliases

---

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

#### –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. –ü–æ–ª—É—á–∏—Ç—å —Å–º–µ—Ç–Ω—É—é –ø–æ–∑–∏—Ü–∏—é (estimate)                  ‚îÇ
‚îÇ    - ID: 4acd9c76-15a9-4804-b721-d0fd06503385           ‚îÇ
‚îÇ    - –ù–∞–∑–≤–∞–Ω–∏–µ: –ü—Ä–æ—Ñ–∏–ª—å TSC 41—Ö82                        ‚îÇ
‚îÇ    - –î–æ–≥–æ–≤–æ—Ä: 173-—Å—É–±-26                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 2. –ù–∞–π—Ç–∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é (—á–µ—Ä–µ–∑ material_aliases) ‚îÇ
‚îÇ    - –ü—Ä–æ—Ñ–∏–ª—å TSC 41—Ö82... –≤ –¥–æ–≥–æ–≤–æ—Ä–µ 173-—Å—É–±-17 (1 —à—Ç)  ‚îÇ
‚îÇ    - –ü—Ä–æ—Ñ–∏–ª—å TSC 41—Ö82... –≤ –¥–æ–≥–æ–≤–æ—Ä–µ 173-—Å—É–±-26 (9 —à—Ç)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 3. –§–ò–õ–¨–¢–†–ê–¶–ò–Ø: –û—Å—Ç–∞–≤–∏—Ç—å –¢–û–õ–¨–ö–û –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏–∑ –¥–æ–≥–æ–≤–æ—Ä–∞    ‚îÇ
‚îÇ    estimate.contract_number = materials.contract_number  ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ    ‚úÖ –û–°–¢–ê–í–õ–Ø–ï–ú: 173-—Å—É–±-26 (9 –ø–∞—Ä—Ç–∏–π)                  ‚îÇ
‚îÇ    ‚ùå –£–î–ê–õ–Ø–ï–ú:   173-—Å—É–±-17 (1 –ø–∞—Ä—Ç–∏—è)                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 4. FIFO –≤–Ω—É—Ç—Ä–∏ –¥–æ–≥–æ–≤–æ—Ä–∞ 173-—Å—É–±-26                      ‚îÇ
‚îÇ    PARTITION BY estimate_id, contract_number             ‚îÇ
‚îÇ    ORDER BY receipt_date, id                             ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ    –ü–∞—Ä—Ç–∏—è 1 (21.06.2024, 492 –º) ‚Üí –°–ø–∏—Å–∞—Ç—å 30 –º         ‚îÇ
‚îÇ    –ü–∞—Ä—Ç–∏—è 2 (28.06.2024, 516 –º) ‚Üí –ù–µ —Ç—Ä–æ–≥–∞—Ç—å           ‚îÇ
‚îÇ    ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ 7 –ø–∞—Ä—Ç–∏–π)                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### SQL-–ª–æ–≥–∏–∫–∞ (—É–ø—Ä–æ—â—ë–Ω–Ω–æ)

```sql
-- –®–∞–≥ 1: –ü—Ä–∏–≤—è–∑–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∫ —Å–º–µ—Ç–∞–º (–ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é)
material_estimate AS (
  SELECT m.*, (
    SELECT estimate_id 
    FROM norm_aliases 
    WHERE normalized_name = m.normalized_name 
    LIMIT 1
  ) AS estimate_id
  FROM norm_materials m
)

-- –®–∞–≥ 2: –ù–û–í–û–ï - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É
material_estimate_filtered AS (
  SELECT me.*
  FROM material_estimate me
  WHERE me.contract_number = (
    SELECT c.number 
    FROM estimates e 
    JOIN contracts c ON c.id = e.contract_id 
    WHERE e.id = me.estimate_id
  )
)

-- –®–∞–≥ 3: FIFO —Å —É—á—ë—Ç–æ–º –¥–æ–≥–æ–≤–æ—Ä–∞
me_fifo AS (
  SELECT 
    *,
    sum(quantity) OVER (
      PARTITION BY estimate_id, contract_number  -- ‚Üê –î–û–ë–ê–í–õ–ï–ù contract_number
      ORDER BY receipt_date, id
      ROWS BETWEEN UNBOUNDED PRECEDING AND 1 PRECEDING
    ) AS prev_cum_qty
  FROM material_estimate_filtered
)
```

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

### 1. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —É—á—ë—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤ –ø–æ –¥–æ–≥–æ–≤–æ—Ä–∞–º
- –û—Å—Ç–∞—Ç–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ **—Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–æ –∫–∞–∂–¥–æ–º—É –¥–æ–≥–æ–≤–æ—Ä—É
- –ù–µ—Ç ¬´–ø–µ—Ä–µ—Ç–µ–∫–∞–Ω–∏—è¬ª –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –º–µ–∂–¥—É –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏

### 2. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å
- –ë—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è –º–æ–∂–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–ø–∏—Å—ã–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –¥–æ–≥–æ–≤–æ—Ä
- –ó–∞–∫—Ä—ã—Ç–∏–µ –¥–æ–≥–æ–≤–æ—Ä–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –æ—Å—Ç–∞—Ç–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

### 3. –ò–∑–æ–ª—è—Ü–∏—è –¥–æ–≥–æ–≤–æ—Ä–æ–≤
- –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –æ–¥–Ω–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞ **–Ω–µ –≤–ª–∏—è—é—Ç** –Ω–∞ —Ä–∞—Å—á—ë—Ç—ã –¥—Ä—É–≥–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞
- –ü–æ–ª–Ω–∞—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Ä–∞—Å—á—ë—Ç–æ–≤

### 4. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏ —Ñ—É–Ω–∫—Ü–∏—è –ë–î
- ‚úÖ –ö–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è **–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π** (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
- ‚úÖ UI –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 5. FIFO —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –°–ø–∏—Å–∞–Ω–∏–µ –∏–¥—ë—Ç —Å —Å–∞–º–æ–π —Ä–∞–Ω–Ω–µ–π –ø–∞—Ä—Ç–∏–∏ **–≤–Ω—É—Ç—Ä–∏ –¥–æ–≥–æ–≤–æ—Ä–∞**
- –ú–µ—Ç–æ–¥ FIFO —Å–æ—Ö—Ä–∞–Ω—ë–Ω, –Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª –∏–∑ –¥—Ä—É–≥–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞
- –î–∞–∂–µ –µ—Å–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª –µ—Å—Ç—å –Ω–∞ —Å–∫–ª–∞–¥–µ –≤ –¥—Ä—É–≥–æ–º –¥–æ–≥–æ–≤–æ—Ä–µ, –µ–≥–æ –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- **–ü–ª—é—Å:** –°—Ç—Ä–æ–≥–∏–π —É—á—ë—Ç –ø–æ –¥–æ–≥–æ–≤–æ—Ä–∞–º
- **–ú–∏–Ω—É—Å:** –ù–µ–≥–∏–±–∫–æ—Å—Ç—å (–Ω–æ —ç—Ç–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑—á–∏–∫–∞)

### 2. –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –¥–æ–≥–æ–≤–æ—Ä—É
- –ï—Å–ª–∏ —É –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –Ω–µ—Ç `contract_number`, –æ–Ω –±—É–¥–µ—Ç –∏—Å–∫–ª—é—á—ë–Ω –∏–∑ —Ä–∞—Å—á—ë—Ç–∞
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –¥–æ–≥–æ–≤–æ—Ä

### 3. –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å
- –ï—Å–ª–∏ —Ä–∞–Ω–µ–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã —Å–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (–∏–∑ –¥—Ä—É–≥–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞), –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∏–Ω—è—Ç—å –∫–∞–∫ —Ñ–∞–∫—Ç –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ä—É—á–Ω—É—é –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫—É

---

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (–¥–æ–≥–æ–≤–æ—Ä 173-—Å—É–±-26)

```sql
SELECT 
  COUNT(*) as total_materials,
  SUM(quantity) as total_quantity,
  SUM(used) as total_used,
  SUM(remaining) as total_remaining
FROM v_materials_with_usage
WHERE contract_number = '173-—Å—É–±-26';
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤: 259
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: 248 272.904
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: 4 651.0
- –û—Å—Ç–∞—Ç–æ–∫: 243 621.904

---

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

- [x] –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞ `–ü–†–û–ë–õ–ï–ú–ê_FIFO_–ë–ï–ó_–£–ß–ï–¢–ê_–î–û–ì–û–í–û–†–û–í.md`
- [x] –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è `v_materials_with_usage` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É
- [x] –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ `v_materials_usage_period` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É
- [x] –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π —Ñ—É–Ω–∫—Ü–∏–π –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π
- [x] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –∫–µ–π—Å–µ (–ü—Ä–æ—Ñ–∏–ª—å TSC 41—Ö82)
- [x] –°–æ–∑–¥–∞–Ω–∏–µ SQL-–º–∏–≥—Ä–∞—Ü–∏–∏ `20251006_fix_materials_fifo_by_contract.sql`
- [x] –°–æ–∑–¥–∞–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–≥–æ –æ—Ç—á—ë—Ç–∞ `–û–¢–ß–Å–¢_–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_FIFO_–î–û–ì–û–í–û–†–´.md`

---

## üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –º–∏–≥—Ä–∞—Ü–∏–∏

### –®–∞–≥ 1: –ü—Ä–∏–º–µ–Ω–∏—Ç—å SQL-–º–∏–≥—Ä–∞—Ü–∏—é

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Supabase CLI)
supabase db reset

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Supabase Dashboard
# SQL Editor ‚Üí –í—Å—Ç–∞–≤–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ ‚Üí Run
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
SELECT * FROM v_materials_with_usage LIMIT 10;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é
SELECT * FROM v_materials_usage_period('2025-09-01', '2025-10-31', '173-—Å—É–±-26') LIMIT 10;
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
# Flutter
flutter run

# –ò–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

**–í–∞–∂–Ω–æ:** –ö–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–µ–Ω—è—Ç—å **–Ω–µ –Ω—É–∂–Ω–æ** ‚Äî –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏ —Ñ—É–Ω–∫—Ü–∏—è –∏–º–µ—é—Ç —Ç—É –∂–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—É.

---

## üîÆ –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 1. UI-–∏–Ω–¥–∏–∫–∞—Ü–∏—è –¥–æ–≥–æ–≤–æ—Ä–∞
- –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É "–î–æ–≥–æ–≤–æ—Ä" –≤ —Ç–∞–±–ª–∏—Ü—É –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –í–∏–∑—É–∞–ª—å–Ω–æ –≤—ã–¥–µ–ª—è—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã —Ä–∞–∑–Ω—ã—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤ (—Ü–≤–µ—Ç–æ–º)

### 2. –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –ï—Å–ª–∏ –≤ –¥–æ–≥–æ–≤–æ—Ä–µ –Ω–µ—Ç –Ω—É–∂–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞, –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- –ü—Ä–µ–¥–ª–∞–≥–∞—Ç—å –∑–∞–∫—É–ø–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏–∑ –¥—Ä—É–≥–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞ (—Å –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º)

### 3. –û—Ç—á—ë—Ç –ø–æ –∫—Ä–æ—Å—Å-–¥–æ–≥–æ–≤–æ—Ä–Ω—ã–º –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º
- –°–ø–∏—Å–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–≥–æ–≤–æ—Ä–∞—Ö
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ –∫–∞–∂–¥–æ–º—É –¥–æ–≥–æ–≤–æ—Ä—É

### 4. Audit log
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ —Å–ø–∏—Å–∞–Ω–∏–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ—Å—Ç–∞—Ç–∫–æ–≤

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** –ü—Ä–æ–µ–∫—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞  
**–î–∞—Ç–∞ –æ—Ç—á—ë—Ç–∞:** 6 –æ–∫—Ç—è–±—Ä—è 2025 –≥–æ–¥–∞  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–Ω–µ–¥—Ä–µ–Ω–æ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞:**
- ‚úÖ FIFO —Å–ø–∏—Å—ã–≤–∞–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª—ã **—Ç–æ–ª—å–∫–æ –∏–∑ –æ–¥–Ω–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞**
- ‚úÖ –û—Å—Ç–∞—Ç–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã –ø–æ –∫–∞–∂–¥–æ–º—É –¥–æ–≥–æ–≤–æ—Ä—É
- ‚úÖ –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å —Ç–µ–ø–µ—Ä—å —Ç–æ—á–Ω–∞—è
- ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è –¥–æ–≥–æ–≤–æ—Ä–æ–≤ –æ–±–µ—Å–ø–µ—á–µ–Ω–∞
- ‚úÖ **–û–ë–ù–û–í–õ–ï–ù–ò–ï:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–∏–≤—è–∑–∫–∞ material_aliases - —Ç–µ–ø–µ—Ä—å —É—á–∏—Ç—ã–≤–∞–µ—Ç –¥–æ–≥–æ–≤–æ—Ä (—Å–º. `–û–¢–ß–Å–¢_–ü–†–ò–í–Ø–ó–ö–ê_–ú–ê–¢–ï–†–ò–ê–õ–û–í_–ü–û_–î–û–ì–û–í–û–†–ê–ú.md`)

**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π** –∏ –º–æ–≥–ª–∞ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º –æ—à–∏–±–∫–∞–º. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –≤ –∫—Ä–∞—Ç—á–∞–π—à–∏–µ —Å—Ä–æ–∫–∏ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ —Å–∏—Å—Ç–µ–º–µ.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í–Ω–µ–¥—Ä–∏—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–Ω **–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ**.

