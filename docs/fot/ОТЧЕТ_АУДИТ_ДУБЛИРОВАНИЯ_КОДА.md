# üîç –ê—É–¥–∏—Ç –º–æ–¥—É–ª—è –§–û–¢: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è:** 4 –æ–∫—Ç—è–±—Ä—è 2025 –≥–æ–¥–∞  
**–í–µ—Ä—Å–∏—è –º–æ–¥—É–ª—è:** –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞  
**–ê—É–¥–∏—Ç–æ—Ä:** AI Code Reviewer (Senior Flutter/Dart Developer)

---

## üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–æ–¥—É–ª—è

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤ (–±–µ–∑ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö) | 35 |
| –§–∞–π–ª–æ–≤ Dart (–æ—Å–Ω–æ–≤–Ω—ã—Ö) | 35 |
| –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ (*.g.dart, *.freezed.dart) | 7 |
| –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ (3 —Ç–∞–±–ª–∏—á–Ω—ã—Ö –≤–∏–¥–∂–µ—Ç–∞) | 1010 |
| –ü—É—Å—Ç—ã—Ö –ø–∞–ø–æ–∫ | 1 (`domain/repositories/`) |

---

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### 1. ‚ùå –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å UseCase (–ö–†–ò–¢–ò–ß–ù–û)

**–°–µ—Ä—å—ë–∑–Ω–æ—Å—Ç—å:** üî¥ **–í—ã—Å–æ–∫–∞—è**  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π

#### –ü—Ä–æ–±–ª–µ–º–∞:
–î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å **bonus** UseCase —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫ **—Ñ—É–Ω–∫—Ü–∏–∏-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã**, –∞ –¥–ª—è **penalty** –∏ **payout** ‚Äî –∫–∞–∫ **–æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã**.

#### –î–µ—Ç–∞–ª–∏:

**–ü–æ–¥—Ö–æ–¥ 1: –§—É–Ω–∫—Ü–∏–∏ (bonus)** ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π
```dart
// lib/features/fot/presentation/providers/bonus_providers.dart (75-103)
final createBonusUseCaseProvider =
    Provider<Future<void> Function(PayrollBonusModel)>((ref) {
  final repo = ref.watch(payrollBonusRepositoryProvider);
  return (PayrollBonusModel bonus) async {
    await repo.createBonus(bonus);
  };
});

final updateBonusUseCaseProvider = // –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ
final deleteBonusUseCaseProvider = // –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ
```

**–ü–æ–¥—Ö–æ–¥ 2: –ö–ª–∞—Å—Å—ã (penalty/payout)** ‚ùå –ò–∑–±—ã—Ç–æ—á–Ω—ã–π
```dart
// lib/features/fot/domain/usecases/create_penalty_usecase.dart (21 —Å—Ç—Ä–æ–∫–∞)
class CreatePenaltyUseCase {
  final PayrollPenaltyRepository repository;
  CreatePenaltyUseCase(this.repository);
  
  Future<PayrollPenaltyModel> call(PayrollPenaltyModel penalty) {
    return repository.createPenalty(penalty);
  }
}

// –ò –µ—â—ë 5 –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:
- create_payout_usecase.dart
- update_penalty_usecase.dart
- update_payout_usecase.dart
- delete_penalty_usecase.dart
- delete_payout_usecase.dart
```

#### –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:
1. **–ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞ KISS** (Keep It Simple, Stupid)
2. **–ò–∑–±—ã—Ç–æ—á–Ω—ã–π –∫–æ–¥:** 6 —Ñ–∞–π–ª–æ–≤ UseCase (126+ —Å—Ç—Ä–æ–∫) –¥–ª—è –ø—Ä–æ—Å—Ç–æ–π –¥–µ–ª–µ–≥–∞—Ü–∏–∏ –≤—ã–∑–æ–≤–æ–≤
3. **–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å:** —Ä–∞–∑–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –¥–ª—è –∏–¥–µ–Ω—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
4. **–£—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏:** –Ω–æ–≤—ã–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –Ω–µ—è—Å–Ω–æ, –∫–∞–∫–æ–π –ø–∞—Ç—Ç–µ—Ä–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
**–í–∞—Ä–∏–∞–Ω—Ç A (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):** –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫–ª–∞—Å—Å—ã UseCase –∏ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
```dart
// –£–¥–∞–ª–∏—Ç—å 6 —Ñ–∞–π–ª–æ–≤ –∏–∑ lib/features/fot/domain/usecases/
// –î–æ–±–∞–≤–∏—Ç—å –≤ penalty_providers.dart –∏ payroll_providers.dart:

final createPenaltyUseCaseProvider =
    Provider<Future<void> Function(PayrollPenaltyModel)>((ref) {
  final repo = ref.watch(payrollPenaltyRepositoryProvider);
  return (penalty) async => await repo.createPenalty(penalty);
});
```

**–í–∞—Ä–∏–∞–Ω—Ç B (–¥–æ–ø—É—Å—Ç–∏–º–æ):** –°–¥–µ–ª–∞—Ç—å –≤—Å–µ —á–µ—Ä–µ–∑ –∫–ª–∞—Å—Å—ã UseCase, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏—è 3 –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è bonus

**–í—ã–≤–æ–¥:** UseCase-—Å–ª–æ–π –∏–∑–±—ã—Ç–æ—á–µ–Ω –¥–ª—è –ø—Ä–æ—Å—Ç–æ–π CRUD-–ª–æ–≥–∏–∫–∏. –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –Ω–∞–ø—Ä—è–º—É—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

---

### 2. ‚ö†Ô∏è –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö bonus/penalty

**–°–µ—Ä—å—ë–∑–Ω–æ—Å—Ç—å:** üü° **–°—Ä–µ–¥–Ω—è—è**  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è UseCase

#### –ü—Ä–æ–±–ª–µ–º–∞:
–¢–∞–±–ª–∏—Ü—ã `PayrollBonusTableWidget` (280 —Å—Ç—Ä–æ–∫) –∏ `PayrollPenaltyTableWidget` (286 —Å—Ç—Ä–æ–∫) —Å–æ–¥–µ—Ä–∂–∞—Ç **~85% –∏–¥–µ–Ω—Ç–∏—á–Ω–æ–≥–æ –∫–æ–¥–∞**.

#### –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –±–ª–æ–∫–∏:

**1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã (60+ —Å—Ç—Ä–æ–∫)**
```dart
// –û–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫–æ–¥ –≤ –æ–±–æ–∏—Ö –≤–∏–¥–∂–µ—Ç–∞—Ö:
- LayoutBuilder –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏
- SingleChildScrollView –¥–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞
- DataTable —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏
- –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–∞ minTableWidth, needsHorizontalScroll
```

**2. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ DataRow (120+ —Å—Ç—Ä–æ–∫)**
```dart
// –ò–¥–µ–Ω—Ç–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞:
- –ü–æ–ª—É—á–µ–Ω–∏–µ employee –∏–∑ employees.firstWhereOrNull
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –§–ò–û: [lastName, firstName, middleName].join(' ')
- –ü–æ–ª—É—á–µ–Ω–∏–µ object –∏–∑ objects.firstWhereOrNull
- DataCell —Å –Ω–æ–º–µ—Ä–æ–º, –§–ò–û, –¥–æ–ª–∂–Ω–æ—Å—Ç—å—é
- PopupMenuButton —Å "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" –∏ "–£–¥–∞–ª–∏—Ç—å"
- showModalBottomSheet –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- showDialog –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è
```

**3. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å—Ç–∏–ª–∏ (30+ —Å—Ç—Ä–æ–∫)**
```dart
// –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ NumberFormat, DateFormat, theme.textTheme
final numberFormat = NumberFormat.currency(locale: 'ru_RU', symbol: '‚ÇΩ', decimalDigits: 2);
final dateStr = date != null ? DateFormat('dd.MM.yyyy').format(date!) : '';
```

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
–°–æ–∑–¥–∞—Ç—å **–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤–∏–¥–∂–µ—Ç** –¥–ª—è —Å—Ç—Ä–æ–∫ —Ç–∞–±–ª–∏—Ü—ã:

```dart
// lib/features/fot/presentation/widgets/payroll_transaction_table_row.dart
class PayrollTransactionTableRow extends StatelessWidget {
  final PayrollTransaction transaction;
  final List<Employee> employees;
  final List<Object> objects;
  final PayrollTransactionType type;
  final VoidCallback onEdit;
  final VoidCallback onDelete;
  
  // ... –æ–±—â–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è bonus/penalty
}
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~150 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞

---

### 3. üì¶ –ü—É—Å—Ç–∞—è –ø–∞–ø–∫–∞ domain/repositories

**–°–µ—Ä—å—ë–∑–Ω–æ—Å—Ç—å:** üü¢ **–ù–∏–∑–∫–∞—è**  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** –ú–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å

#### –ü—Ä–æ–±–ª–µ–º–∞:
–ü–∞–ø–∫–∞ `lib/features/fot/domain/repositories/` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –ø—É—Å—Ç–∞—è.

#### –ê–Ω–∞–ª–∏–∑:
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è:** `lib/features/fot/data/repositories/`
- **–≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:** –í Clean Architecture –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –º–æ–≥—É—Ç –±—ã—Ç—å –≤ `data/` –∏–ª–∏ `domain/`
- **–¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã (interfaces) –≤ `data/repositories/`, impl —Ç–∞–º –∂–µ

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
**–í–∞—Ä–∏–∞–Ω—Ç A (—á–∏—Å—Ç–æ—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã):**
```
domain/repositories/
  - payroll_bonus_repository.dart (abstract)
  - payroll_penalty_repository.dart (abstract)
  - payroll_payout_repository.dart (abstract)

data/repositories/
  - payroll_bonus_repository_impl.dart
  - payroll_penalty_repository_impl.dart
  - payroll_payout_repository_impl.dart
```

**–í–∞—Ä–∏–∞–Ω—Ç B (—Ç–µ–∫—É—â–∏–π, –¥–æ–ø—É—Å—Ç–∏–º–æ):**
–£–¥–∞–ª–∏—Ç—å –ø—É—Å—Ç—É—é –ø–∞–ø–∫—É `domain/repositories/`, –æ—Å—Ç–∞–≤–∏—Ç—å –≤—Å—ë –≤ `data/repositories/`

**–í—ã–≤–æ–¥:** –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç. –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –ø—É—Å—Ç—É—é –ø–∞–ø–∫—É.

---

## ‚úÖ –ß–¢–û –°–î–ï–õ–ê–ù–û –ü–†–ê–í–ò–õ–¨–ù–û

### 1. ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Ç–∞–±–æ–≤
–¢–∞–±—ã `PayrollTabBonuses`, `PayrollTabPenalties`, `PayrollTabPayouts` –∏–º–µ—é—Ç **–∏–¥–µ–Ω—Ç–∏—á–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É** (60-67 —Å—Ç—Ä–æ–∫), –Ω–æ —ç—Ç–æ **–æ–ø—Ä–∞–≤–¥–∞–Ω–Ω–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –ß—ë—Ç–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- –õ–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### 2. ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–µ–π
–ú–æ–¥–µ–ª–∏ `PayrollBonusModel`, `PayrollPenaltyModel` –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–∏–¥–µ–Ω—Ç–∏—á–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É**:
- –û–±–∞ —Ä–µ–∞–ª–∏–∑—É—é—Ç `PayrollTransaction`
- Freezed + json_serializable
- –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–æ–ª—è (id, employee_id, type, amount, reason, date, created_at, object_id)

**–≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω** ‚Äî –º–æ–¥–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã.

### 3. ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ `PayrollBonusRepositoryImpl`, `PayrollPenaltyRepositoryImpl`, `PayrollPayoutRepositoryImpl` –∏–º–µ—é—Ç **–∏–¥–µ–Ω—Ç–∏—á–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É CRUD-–æ–ø–µ—Ä–∞—Ü–∏–π**, –Ω–æ —ç—Ç–æ **–æ–ø—Ä–∞–≤–¥–∞–Ω–æ**:
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ API

---

## üìã –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ü–†–ò–û–†–ò–¢–ï–¢–ê–ú

### üî¥ –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—Å–¥–µ–ª–∞—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)

1. **–£–¥–∞–ª–∏—Ç—å –∫–ª–∞—Å—Å—ã UseCase** –¥–ª—è penalty/payout (6 —Ñ–∞–π–ª–æ–≤)
2. **–ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã** –≤ `penalty_providers.dart` –∏ `payroll_providers.dart`
3. **–û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã** –≤ –≤–∏–¥–∂–µ—Ç–∞—Ö

**–≠–∫–æ–Ω–æ–º–∏—è:** ~126 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞, —É–ª—É—á—à–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–π —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏

### üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—Å–ª–µ–¥—É—é—â–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è)

1. **–ò–∑–≤–ª–µ—á—å –æ–±—â—É—é –ª–æ–≥–∏–∫—É** –∏–∑ `PayrollBonusTableWidget` –∏ `PayrollPenaltyTableWidget`
2. **–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤–∏–¥–∂–µ—Ç** –¥–ª—è —Å—Ç—Ä–æ–∫ —Ç–∞–±–ª–∏—Ü—ã
3. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—á–Ω—ã–µ –≤–∏–¥–∂–µ—Ç—ã** –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—â–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

**–≠–∫–æ–Ω–æ–º–∏—è:** ~150 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞

### üü¢ –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **–£–¥–∞–ª–∏—Ç—å –ø—É—Å—Ç—É—é –ø–∞–ø–∫—É** `domain/repositories/` –∏–ª–∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ —Ç—É–¥–∞
2. **–î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã** –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

---

## üìä –§–ò–ù–ê–õ–¨–ù–ê–Ø –û–¶–ï–ù–ö–ê

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å** | 6/10 | UseCase –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã |
| **DRY (Don't Repeat Yourself)** | 7/10 | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö bonus/penalty |
| **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞** | 8/10 | –•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –Ω–æ –º–Ω–æ–≥–æ —Ñ–∞–π–ª–æ–≤ |
| **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** | 7/10 | –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å UseCase –∑–∞—Ç—Ä—É–¥–Ω—è–µ—Ç |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | 9/10 | –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º |
| **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** | 8/10 | –•–æ—Ä–æ—à–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ |

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** 7.5/10 ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ

---

## üéØ –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –≠—Ç–∞–ø 1: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ UseCase (2-3 —á–∞—Å–∞)

```bash
# 1. –£–¥–∞–ª–∏—Ç—å –∫–ª–∞—Å—Å—ã UseCase
rm lib/features/fot/domain/usecases/create_penalty_usecase.dart
rm lib/features/fot/domain/usecases/update_penalty_usecase.dart
rm lib/features/fot/domain/usecases/delete_penalty_usecase.dart
rm lib/features/fot/domain/usecases/create_payout_usecase.dart
rm lib/features/fot/domain/usecases/update_payout_usecase.dart
rm lib/features/fot/domain/usecases/delete_payout_usecase.dart

# 2. –û–±–Ω–æ–≤–∏—Ç—å penalty_providers.dart
# –ó–∞–º–µ–Ω–∏—Ç—å –∫–ª–∞—Å—Å—ã UseCase –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ bonus_providers.dart)

# 3. –û–±–Ω–æ–≤–∏—Ç—å payroll_providers.dart
# –ó–∞–º–µ–Ω–∏—Ç—å –∫–ª–∞—Å—Å—ã UseCase –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏-–ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã
flutter analyze lib/features/fot
```

### –≠—Ç–∞–ø 2: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ç–∞–±–ª–∏—Ü (4-5 —á–∞—Å–æ–≤)

```dart
// 1. –°–æ–∑–¥–∞—Ç—å lib/features/fot/presentation/widgets/common/
//    - payroll_transaction_table_row.dart (–æ–±—â–∞—è —Å—Ç—Ä–æ–∫–∞)
//    - payroll_transaction_table_header.dart (–æ–±—â–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫)

// 2. –û–±–Ω–æ–≤–∏—Ç—å PayrollBonusTableWidget –∏ PayrollPenaltyTableWidget
//    –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

// 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö
```

### –≠—Ç–∞–ø 3: –û—á–∏—Å—Ç–∫–∞ –∏ Clean Architecture (‚úÖ –ó–ê–í–ï–†–®–ï–ù–û - 04.10.2025)

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
```bash
# ‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –≤ domain/repositories/
- domain/repositories/payroll_bonus_repository.dart (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- domain/repositories/payroll_penalty_repository.dart (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- domain/repositories/payroll_payout_repository.dart (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)

# ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Å—Ç–∞–ª–∏—Å—å –≤ data/repositories/
- data/repositories/payroll_bonus_repository_impl.dart
- data/repositories/payroll_penalty_repository_impl.dart
- data/repositories/payroll_payout_repository_impl.dart

# ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞—Ö
# ‚úÖ –î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ —Å—Ç—Ä–æ–≥–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ—ë–≤ —Å–æ–≥–ª–∞—Å–Ω–æ Clean Architecture
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–≤–µ—Ä—Å–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: domain ‚Üí data
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (–∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏) –≤ domain/
- –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ data/
- –ü–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º Clean Architecture

---

## üìù –í–´–í–û–î–´

### ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –º–æ–¥—É–ª—è:
1. –•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–¥–∞
2. –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö
3. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Freezed –∏ json_serializable
4. –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã —Å —Ö–æ—Ä–æ—à–∏–º UX
5. –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–ª–æ—ë–≤

### ‚ùå –ü—Ä–æ–±–ª–µ–º—ã:
1. **–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å UseCase** ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö** ‚Äî ~150 —Å—Ç—Ä–æ–∫ –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–π—Å—è –ª–æ–≥–∏–∫–∏
3. **–ò–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å —Å–ª–æ—è UseCase** ‚Äî –ø—Ä–æ—Å—Ç–∞—è CRUD –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤
4. **–ü—É—Å—Ç–∞—è –ø–∞–ø–∫–∞ repositories** ‚Äî –º–µ–ª–∫–∞—è, –Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

### üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:
1. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ UseCase (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏)
2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ–±—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Ç–∞–±–ª–∏—Ü (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
3. –û—á–∏—Å—Ç–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫ (–∫–æ—Å–º–µ—Ç–∏–∫–∞)

---

## üìå –ó–ê–ú–ï–¢–ö–ò –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–û–í

### –ü–æ—á–µ–º—É UseCase –∏–∑–±—ã—Ç–æ—á–Ω—ã –¥–ª—è –§–û–¢?

–í Clean Architecture UseCase –æ–ø—Ä–∞–≤–¥–∞–Ω—ã –∫–æ–≥–¥–∞:
- –°–ª–æ–∂–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (—Ä–∞—Å—á—ë—Ç—ã, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)
- –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞—É–¥–∏—Ç, —Å–æ–±—ã—Ç–∏—è

–î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö CRUD –æ–ø–µ—Ä–∞—Ü–∏–π (—Å–æ–∑–¥–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ bonus/penalty/payout):
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞–ø—Ä—è–º—É—é –≤—ã–∑—ã–≤–∞–µ—Ç Supabase
- UseCase –ø—Ä–æ—Å—Ç–æ –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –≤—ã–∑–æ–≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é
- –≠—Ç–æ –ª–∏—à–Ω–∏–π —Å–ª–æ–π –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –±–µ–∑ –ø–æ–ª—å–∑—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–ª—è –§–û–¢ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ Riverpod –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏, –≤—ã–∑—ã–≤–∞—é—â–∏–º–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞–ø—Ä—è–º—É—é.

### –ö–æ–≥–¥–∞ UseCase –Ω—É–∂–Ω—ã –≤ –§–û–¢?

–ï—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞:
```dart
// –ü—Ä–∏–º–µ—Ä —Å–ª–æ–∂–Ω–æ–≥–æ UseCase (–æ–ø—Ä–∞–≤–¥–∞–Ω)
class CalculateMonthlyPayrollUseCase {
  Future<PayrollCalculation> call(String employeeId, DateTime month) async {
    // 1. –ü–æ–ª—É—á–∏—Ç—å —á–∞—Å—ã –∏–∑ work_hours
    // 2. –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞–≤–∫–∏ –∏–∑ employee_rates
    // 3. –ü–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å—ã/—à—Ç—Ä–∞—Ñ—ã
    // 4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
    // 5. –í–µ—Ä–Ω—É—Ç—å —Ä–∞—Å—á—ë—Ç
  }
}
```

–ù–æ –¥–ª—è `createBonus/createPenalty/createPayout` ‚Äî —ç—Ç–æ –∏–∑–±—ã—Ç–æ—á–Ω–æ.

---

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**  
1. –û–±—Å—É–¥–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å –∫–æ–º–∞–Ω–¥–æ–π
2. –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø–æ—ç—Ç–∞–ø–Ω–æ
4. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –º–æ–¥—É–ª—è `fot_module.md`

**–ö–æ–Ω—Ç–∞–∫—Ç:** AI Code Reviewer  
**–î–∞—Ç–∞ —Å–ª–µ–¥—É—é—â–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:** –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ UseCase

