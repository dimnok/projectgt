# –ú–æ–¥—É–ª—å –§–û–¢ (–§–æ–Ω–¥ –æ–ø–ª–∞—Ç—ã —Ç—Ä—É–¥–∞, Payroll)

**–î–∞—Ç–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏:** 12 —è–Ω–≤–∞—Ä—è 2026 –≥–æ–¥–∞
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç—É–∞–ª—å–Ω–æ (Clean Architecture, Mobile-First UX, Server-side Filtering, Yearly PDF Report)

---

## üìÇ –û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª—è
–ú–æ–¥—É–ª—å **–§–û–¢** –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –∑–∞—Ä–∞–±–æ—Ç–Ω–æ–π –ø–ª–∞—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤. –û–Ω –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ–± –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —á–∞—Å–∞—Ö, —Å—Ç–∞–≤–∫–∞—Ö, –ø—Ä–µ–º–∏—è—Ö, —à—Ç—Ä–∞—Ñ–∞—Ö –∏ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ—á–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç–∞—Ö.

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- **Hybrid-—Ä–∞—Å—á–µ—Ç:** –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ë–î (PostgreSQL RPC) —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç (Dart) –ø—Ä–∏ —Å–±–æ—è—Ö.
- **Mobile-First UX (Extreme Minimalism):** –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—á–Ω—ã–º –≤–∏–¥–æ–º (Desktop/Tablet) –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–ø–∏—Å–∫–æ–º (Mobile).
    - **Ultra-Clean Header:** –í –º–æ–±–∏–ª—å–Ω–æ–º –≤–∏–¥–µ —É–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –º–æ–¥—É–ª–µ–π –∏ –ø–µ—Ä–∏–æ–¥–æ–≤ (¬´–§–û–¢ —è–Ω–≤–∞—Ä—å 2026¬ª –∏ —Ç.–¥.) –Ω–∞–¥ —Å–ø–∏—Å–∫–∞–º–∏, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —É–∂–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ AppBar.
    - **AppBar De-cluttering:** –ò–∫–æ–Ω–∫–∏ –ø–æ–∏—Å–∫–∞ –∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ Excel —Å–∫—Ä—ã—Ç—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
    - **Compact iOS Tab Switcher:** –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–∞–±–æ–≤ (`CupertinoSlidingSegmentedControl`) –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –∏–º–µ–µ—Ç —É–º–µ–Ω—å—à–µ–Ω–Ω—É—é –≤—ã—Å–æ—Ç—É (padding 4pt), —É–º–µ–Ω—å—à–µ–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç (12pt) –∏ –ø–ª–æ—Ç–Ω—É—é –∫–æ–º–ø–æ–Ω–æ–≤–∫—É –¥–ª—è 100% –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –æ—â—É—â–µ–Ω–∏—è iOS.
    - **Expandable Cards:** –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã —Å–∫—Ä—ã—Ç—ã –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –®—Ä–∏—Ñ—Ç –§–ò–û –∏ –∏—Ç–æ–≥–æ–≤ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–æ 14pt –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤.
    - **Sticky Bottom Summary (Compact):** –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å –∏—Ç–æ–≥–æ–≤ –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞ —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏.
- **Yearly PDF Report (Advanced):** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –æ—Ç—á–µ—Ç–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∑–∞ –≥–æ–¥. 
    - **Dynamic Rate Breakdown:** –£—á–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–∞—Å–æ–≤–æ–π —Å—Ç–∞–≤–∫–∏ –≤–Ω—É—Ç—Ä–∏ –º–µ—Å—è—Ü–∞. –ï—Å–ª–∏ —Å—Ç–∞–≤–∫–∞ –º–µ–Ω—è–ª–∞—Å—å, –æ—Ç—á–µ—Ç —Ä–∞–∑–±–∏–≤–∞–µ—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –ø–æ –∫–∞–∂–¥–æ–π —Å—Ç–∞–≤–∫–µ –æ—Ç–¥–µ–ª—å–Ω–æ.
    - **Payment History:** –í—ã–≤–æ–¥ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã–ø–ª–∞—Ç —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –¥–∞—Ç.
    - **Cross-Platform PDF Viewing:** 
        - **macOS:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º —Å–∏—Å—Ç–µ–º–Ω–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤—â–∏–∫–µ (Preview.app) –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –≤ Sandbox.
        - **iOS/Android/Windows:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤ –ø–µ—á–∞—Ç–∏ –∏ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (`Printing.layoutPdf`).
        - **Web:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ `FileSaver`.
- **Server-side Filtering (First 1000 Fix):** –†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –ª–∏–º–∏—Ç–∞ –≤ 1000 –∑–∞–ø–∏—Å–µ–π —á–µ—Ä–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –¥–∞—Ç–∞–º –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞.
- **–≠–∫—Å–ø–æ—Ä—Ç –≤ Excel (–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π):** 
    - –í—ã–≥—Ä—É–∑–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –º–µ—Å—è—Ü.
    - **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–∏–∫–æ–≤:** –í —Ñ–∞–π–ª –ø–æ–ø–∞–¥–∞—é—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Å –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è–º–∏ –≤ —Ç–µ–∫—É—â–µ–º –º–µ—Å—è—Ü–µ, –Ω–æ –∏ –≤—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏, –∏–º–µ—é—â–∏–µ –Ω–µ–Ω—É–ª–µ–≤–æ–π –±–∞–ª–∞–Ω—Å (–∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–ø–ª–∞—Ç—É), —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –ø–æ–ª–Ω–æ—Ç—É –æ—Ç—á–µ—Ç–∞.
    - **–ò—Ç–æ–≥–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:** –†–∞—Å—á–µ—Ç —Å—É–º–º–∞—Ä–Ω—ã—Ö –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π, –≤—ã–ø–ª–∞—Ç –∏ –æ–±—â–µ–≥–æ —Å–∞–ª—å–¥–æ –ø–æ –≤—Å–µ–º –∞–∫—Ç–∏–≤–Ω—ã–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º.
- **Unified Totals:** –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á–µ—Ç –∏—Ç–æ–≥–æ–≤ –≤–æ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
–ú–æ–¥—É–ª—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º **Clean Architecture**.

### –°–ª–æ–π Presentation (UI)
- `lib/features/fot/presentation/screens/payroll_list_screen.dart` ‚Äî –û—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω.
- `lib/features/fot/presentation/widgets/payroll_table_view.dart` ‚Äî –¢–∞–±–ª–∏—Ü–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–º –º–µ–Ω—é –∏ –ª–æ–≥–∏–∫–æ–π –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏.
- `lib/features/fot/presentation/services/`
    - `payroll_pdf_service.dart` ‚Äî –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `pdf` –∏ `printing`. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã `Inter` –∏–∑ –∞—Å—Å–µ—Ç–æ–≤ –¥–ª—è 100% —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã.
    - `payroll_excel_service.dart` ‚Äî –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel.

### –°–ª–æ–π Domain/Data
- `lib/features/fot/domain/entities/payroll_calculation.dart` ‚Äî –°—É—â–Ω–æ—Å—Ç—å —Ä–∞—Å—á–µ—Ç–∞.
- `lib/features/fot/data/models/payroll_payout_model.dart` ‚Äî –ú–æ–¥–µ–ª—å –≤—ã–ø–ª–∞—Ç.

---

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ RLS

### –¢–∞–±–ª–∏—Ü—ã (Owner)
1. `employee_rates` ‚Äî –ò—Å—Ç–æ—Ä–∏—è —Å—Ç–∞–≤–æ–∫. **RLS: Enabled** (–¥–æ—Å—Ç—É–ø –ø–æ `company_id`).
2. `payroll_payout` ‚Äî –í—ã–ø–ª–∞—Ç—ã. **RLS: Enabled** (–¥–æ—Å—Ç—É–ø –ø–æ `company_id`).
3. `payroll_bonus` ‚Äî –ü—Ä–µ–º–∏–∏. **RLS: Enabled** (–¥–æ—Å—Ç—É–ø –ø–æ `company_id`).
4. `payroll_penalty` ‚Äî –®—Ç—Ä–∞—Ñ—ã. **RLS: Enabled** (–¥–æ—Å—Ç—É–ø –ø–æ `company_id`).

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–∞–±–ª–∏—Ü—ã (Usage)
- `work_hours`, `employee_attendance`, `employees`, `works`, `companies`.

---

## ‚öô –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (Audit)

### –ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è (Multi-tenancy)
–ú–æ–¥—É–ª—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É Multi-tenancy:
- –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ `company_id` (NOT NULL).
- RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –Ω–∞ –æ—Å–Ω–æ–≤–µ —á–ª–µ–Ω—Å—Ç–≤–∞ –≤ –∫–æ–º–ø–∞–Ω–∏–∏ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `get_my_company_ids()`.
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ `activeCompanyId`.
- RPC —Ñ—É–Ω–∫—Ü–∏–∏ `calculate_payroll_for_month` –∏ `calculate_employee_balances_before_date` –ø—Ä–∏–Ω–∏–º–∞—é—Ç `p_company_id` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –±–∞—Ç—á-—Ä–∞—Å—á–µ—Ç–∞ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏.

### –ê–ª–≥–æ—Ä–∏—Ç–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è Excel-–≤—ã–≥—Ä—É–∑–∫–∏
1.  **–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö:**
    - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π –∑–∞ –º–µ—Å—è—Ü (`payrolls`).
    - –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (`aggregatedBalance`).
    - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã–ø–ª–∞—Ç –∑–∞ –º–µ—Å—è—Ü (–º–µ—Ç–æ–¥ FIFO).
2.  **–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤ (–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –ø–æ–ª–Ω–æ—Ç–∞):**
    - –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É—é—Ç—Å—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –Ω–µ–Ω—É–ª–µ–≤–æ–π –±–∞–ª–∞–Ω—Å, –Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –≤ —Ç–µ–∫—É—â–µ–º –ø–µ—Ä–∏–æ–¥–µ.
    - –î–ª—è —Ç–∞–∫–∏—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏ —Å –Ω—É–ª–µ–≤—ã–º–∏ —Ä–∞–±–æ—á–∏–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏.
3.  **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞:**
    - –î–∞–Ω–Ω—ã–µ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É.
    - –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∏—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞, —Å—É–º–º–∏—Ä—É—é—â–∞—è –≤—Å–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏.
    - –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä —à–∏—Ä–∏–Ω—ã –∫–æ–ª–æ–Ω–æ–∫.

### –ê–ª–≥–æ—Ä–∏—Ç–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è Yearly PDF Report
1.  **–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö:**
    - –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Å—Ç–∞–≤–æ–∫ –∏–∑ `employee_rates` –∑–∞ –≤–µ—Å—å –≥–æ–¥.
    - –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –∑–∞–∫—Ä—ã—Ç—ã—Ö —á–∞—Å–æ–≤ –∏–∑ `work_hours` –∏ `employee_attendance`.
    - –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –≤—ã–ø–ª–∞—Ç –∏–∑ `payroll_payout`.
2.  **–†–∞—Å—á–µ—Ç –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç–∞–≤–æ–∫:**
    - –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –¥–∞—Ç—ã —Ä–∞–±–æ—Ç—ã –∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ `[valid_from, valid_to]` –≤ –∏—Å—Ç–æ—Ä–∏–∏ —Å—Ç–∞–≤–æ–∫.
    - –ß–∞—Å—ã –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ —Å—Ç–∞–≤–∫–∞–º –¥–ª—è –≤—ã–≤–æ–¥–∞ –≤ –æ—Ç—á–µ—Ç–µ –≤–∏–¥–∞: `80—á x 700—Ä = 56000—Ä`.
3.  **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è:**
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞–∫–µ—Ç `pdf` —Å –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ–º –ª–æ–∫–∞–ª—å–Ω—ã—Ö —à—Ä–∏—Ñ—Ç–æ–≤ `Inter` (Regular, Bold).
    - –î–ª—è macOS —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –æ–±—Ö–æ–¥ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π Sandbox —á–µ—Ä–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ `url_launcher`.

---

## üå≤ –î–µ—Ä–µ–≤–æ —Ñ–∞–π–ª–æ–≤
```text
lib/features/fot/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ models/             # DTO (bonus, penalty, payout)
‚îÇ   ‚îî‚îÄ‚îÄ repositories/       # –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ API (Supabase)
‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îú‚îÄ‚îÄ entities/           # PayrollCalculation, PayrollTransaction
‚îÇ   ‚îî‚îÄ‚îÄ repositories/       # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îî‚îÄ‚îÄ presentation/
    ‚îú‚îÄ‚îÄ providers/          # Riverpod State (payouts, bonuses, filters)
    ‚îú‚îÄ‚îÄ screens/            # UI –≠–∫—Ä–∞–Ω—ã –∏ –¢–∞–±—ã
    ‚îú‚îÄ‚îÄ services/           # PDF & Excel Export Services
    ‚îú‚îÄ‚îÄ widgets/            # –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –º–æ–¥–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã
    ‚îî‚îÄ‚îÄ utils/              # BalanceUtils, PayoutConverters, FilterHelpers
```

---

## üó∫ Roadmap
- üü¢ Hybrid-—Ä–∞—Å—á–µ—Ç (RPC + Fallback) ‚Äî **Done**
- üü¢ Yearly PDF Report —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ —Å—Ç–∞–≤–∫–∞–º ‚Äî **Done**
- üü¢ FIFO —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—ã–ø–ª–∞—Ç ‚Äî **Done**
- üü¢ –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel ‚Äî **Done**
- üü¢ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä PDF –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º (macOS Sandbox Fix) ‚Äî **Done**
- üü¢ –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ –∏–Ω–ª–∞–π–Ω–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø–µ—Ä–∏–æ–¥–∞ –∏ –æ–±—ä–µ–∫—Ç–æ–≤ ‚Äî **Done**
- üü¢ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ –§–û–¢ ‚Äî **Done**
- üü¢ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ AppBar (—Å–∫—Ä—ã—Ç–∏–µ –ø–æ–∏—Å–∫–∞/—ç–∫—Å–ø–æ—Ä—Ç–∞) ‚Äî **Done**
- üü¢ –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π iOS-—Å—Ç–∏–ª—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è —Ç–∞–±–æ–≤ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö ‚Äî **Done**
- üü¢ –û—á–∏—Å—Ç–∫–∞ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –æ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ ‚Äî **Done**