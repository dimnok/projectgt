# –û—Ç—á—ë—Ç: –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –≤ –º–æ–¥—É–ª–µ –§–û–¢

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 4 –æ–∫—Ç—è–±—Ä—è 2025 –≥–æ–¥–∞  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 5 –æ–∫—Ç—è–±—Ä—è 2025 –≥–æ–¥–∞ (–≥–ª—É–±–æ–∫–∏–π –∞—É–¥–∏—Ç + —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–µ–π)  
**–ê–≤—Ç–æ—Ä:** Cursor AI Assistant  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ + –ê—É–¥–∏—Ç + –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–µ–π

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#–æ–±–∑–æ—Ä-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Ñ–∞–π–ª–æ–≤)
3. [–û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –§–û–¢](#–æ—Å–Ω–æ–≤–Ω–∞—è-—Ç–∞–±–ª–∏—Ü–∞-—Ñ–æ—Ç)
4. [–¢–∞–±–ª–∏—Ü–∞ –ø—Ä–µ–º–∏–π](#—Ç–∞–±–ª–∏—Ü–∞-–ø—Ä–µ–º–∏–π)
5. [–¢–∞–±–ª–∏—Ü–∞ —à—Ç—Ä–∞—Ñ–æ–≤](#—Ç–∞–±–ª–∏—Ü–∞-—à—Ç—Ä–∞—Ñ–æ–≤)
6. [–¢–∞–±–ª–∏—Ü–∞ –≤—ã–ø–ª–∞—Ç](#—Ç–∞–±–ª–∏—Ü–∞-–≤—ã–ø–ª–∞—Ç)
7. [–ú–æ–¥–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã](#–º–æ–¥–∞–ª—å–Ω—ã–µ-—Ñ–æ—Ä–º—ã)
8. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ-–ø–∞—Ç—Ç–µ—Ä–Ω—ã)
9. [–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å](#–∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å)
10. [–°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∏ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ](#—Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è-–∏-–≤–∏–∑—É–∞–ª—å–Ω–æ–µ-–µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ)
11. [–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å](#–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
12. [üîç –ê—É–¥–∏—Ç: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞](#–∞—É–¥–∏—Ç-–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ-–∫–æ–¥–∞)
13. [üêõ –ê—É–¥–∏—Ç: –ú—ë—Ä—Ç–≤—ã–π –∫–æ–¥](#–∞—É–¥–∏—Ç-–º—ë—Ä—Ç–≤—ã–π-–∫–æ–¥)
14. [‚ö†Ô∏è –ê—É–¥–∏—Ç: –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã](#–∞—É–¥–∏—Ç-–ª–æ–≥–∏—á–µ—Å–∫–∏–µ-–ø—Ä–æ–±–ª–µ–º—ã)
15. [üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–ø–æ-—É–ª—É—á—à–µ–Ω–∏—é)
16. [‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–µ–π (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ)](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–¥—É–±–ª–µ–π-–≤—ã–ø–æ–ª–Ω–µ–Ω–æ)
17. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)

---

## üèóÔ∏è –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–ú–æ–¥—É–ª—å –§–û–¢ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–º–æ–¥—É–ª—å–Ω—É—é —Ç—Ä—ë—Ö—Å–ª–æ–π–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              PayrollTableWidget (Main Widget)                   ‚îÇ
‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ         ‚îÇ  –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö    ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ (LayoutBuilder)   ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫—Ä–æ–ª–ª–∏–Ω–≥–æ–º               ‚îÇ               ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ                         ‚îÇ                                        ‚îÇ
‚îÇ                         ‚ñº                                        ‚îÇ
‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ         ‚îÇ   PayrollTableRowBuilder              ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ DataRow –¥–ª—è –∫–∞–∂–¥–æ–≥–æ ‚îÇ  ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞                      ‚îÇ  ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞        ‚îÇ  ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ –ü–æ–¥—Å—á—ë—Ç –∏—Ç–æ–≥–æ–≤—ã—Ö —Å—É–º–º           ‚îÇ  ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ               ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ                         ‚îÇ                                        ‚îÇ
‚îÇ                         ‚ñº                                        ‚îÇ
‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ         ‚îÇ   PayrollTableCellBuilder             ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —è—á–µ–µ–∫            ‚îÇ  ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è (—Ü–≤–µ—Ç–∞, —à—Ä–∏—Ñ—Ç—ã)      ‚îÇ  ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã —è—á–µ–µ–∫:         ‚îÇ  ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  - –°–æ—Ç—Ä—É–¥–Ω–∏–∫                    ‚îÇ  ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  - –ß–∞—Å—ã                         ‚îÇ  ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  - –î–µ–Ω–µ–∂–Ω—ã–µ —Å—É–º–º—ã               ‚îÇ  ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  - –ü—Ä–µ–º–∏–∏/—à—Ç—Ä–∞—Ñ—ã                ‚îÇ  ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  - –ë–∞–ª–∞–Ω—Å                       ‚îÇ  ‚îÇ               ‚îÇ
‚îÇ         ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ               ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **Separation of Concerns (–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏)**
   - **Widget:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º, —Å–∫—Ä–æ–ª–ª–∏–Ω–≥, layout
   - **RowBuilder:** –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞, –∏—Ç–æ–≥–∏
   - **CellBuilder:** –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —è—á–µ–µ–∫

2. **Single Responsibility Principle (–ï–¥–∏–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å)**
   - –ö–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–¥–Ω—É –∑–∞–¥–∞—á—É
   - –£–ø—Ä–æ—â–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É

3. **Reusability (–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)**
   - CellBuilder –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
   - RowBuilder –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω –¥–ª—è –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π
   - Constants —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ PayrollTableConstants

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
lib/features/fot/presentation/widgets/
‚îú‚îÄ‚îÄ payroll_table_widget.dart             # –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –§–û–¢ (354 —Å—Ç—Ä–æ–∫–∏)
‚îú‚îÄ‚îÄ payroll_table_row_builder.dart        # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ (449 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ payroll_table_cells.dart              # –Ø—á–µ–π–∫–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (245 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ payroll_bonus_table_widget.dart       # –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–µ–º–∏–π (280 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ payroll_penalty_table_widget.dart     # –¢–∞–±–ª–∏—Ü–∞ —à—Ç—Ä–∞—Ñ–æ–≤ (286 —Å—Ç—Ä–æ–∫)
‚îî‚îÄ‚îÄ payroll_payout_table_widget.dart      # –¢–∞–±–ª–∏—Ü–∞ –≤—ã–ø–ª–∞—Ç (444 —Å—Ç—Ä–æ–∫–∏)
```

**–û–±—â–∏–π –æ–±—ä—ë–º –∫–æ–¥–∞ —Ç–∞–±–ª–∏—Ü:** ~2058 —Å—Ç—Ä–æ–∫  
**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤:** 6

---

## üìä –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –§–û–¢

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–ì–ª–∞–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –º–æ–¥—É–ª—è, –æ—Ç–æ–±—Ä–∞–∂–∞—é—â–∞—è —Ä–∞—Å—á—ë—Ç—ã –∑–∞—Ä–ø–ª–∞—Ç—ã –ø–æ –≤—Å–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º –∑–∞ —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü.

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

#### 1. **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º**

```dart
// –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –∑–∞–ø–∏—Å–∏ –ø–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º
final Map<String?, List<PayrollCalculation>> groupedPayrolls = {};

for (final payroll in widget.payrolls) {
  final employeeKey = payroll.employeeId ?? 'unknown';
  if (!groupedPayrolls.containsKey(employeeKey)) {
    groupedPayrolls[employeeKey] = [];
  }
  groupedPayrolls[employeeKey]!.add(payroll);
}
```

#### 2. **–î–≤–æ–π–Ω–æ–π —Å–∫—Ä–æ–ª–ª–∏–Ω–≥**

- **–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π:** –î–ª—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —Å—Ç—Ä–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π:** –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –∫–æ–ª–æ–Ω–æ–∫ –Ω–∞ —É–∑–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö

```dart
Scrollbar(
  controller: _verticalController,
  thumbVisibility: true,
  child: SingleChildScrollView(
    controller: _verticalController,
    child: Scrollbar(
      controller: _horizontalController,
      thumbVisibility: needsHorizontalScroll,
      scrollbarOrientation: ScrollbarOrientation.bottom,
      child: SingleChildScrollView(
        controller: _horizontalController,
        scrollDirection: Axis.horizontal,
        // ...
      ),
    ),
  ),
)
```

#### 3. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏**

| –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ | –ö–æ–ª–æ–Ω–∫–∏                                                                                   | –®–∏—Ä–∏–Ω–∞ —Ç–∞–±–ª–∏—Ü—ã |
|------------|-------------------------------------------------------------------------------------------|----------------|
| **Desktop** | –°–æ—Ç—Ä—É–¥–Ω–∏–∫, –ß–∞—Å—ã, –°—Ç–∞–≤–∫–∞, –ë–∞–∑–æ–≤–∞—è —Å—É–º–º–∞, –ü—Ä–µ–º–∏–∏, –®—Ç—Ä–∞—Ñ—ã, –ö–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ—á–Ω—ã–µ, –ö –≤—ã–ø–ª–∞—Ç–µ, –í—ã–ø–ª–∞—Ç—ã, –ë–∞–ª–∞–Ω—Å | 1200px         |
| **Tablet**  | –°–æ—Ç—Ä—É–¥–Ω–∏–∫, –ß–∞—Å—ã, –ë–∞–∑–æ–≤–∞—è —Å—É–º–º–∞, –ü—Ä–µ–º–∏–∏, –ö–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ—á–Ω—ã–µ, –ö –≤—ã–ø–ª–∞—Ç–µ, –í—ã–ø–ª–∞—Ç—ã, –ë–∞–ª–∞–Ω—Å      | 900px          |
| **Mobile**  | –°–æ—Ç—Ä—É–¥–Ω–∏–∫, –ß–∞—Å—ã, –ö–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ—á–Ω—ã–µ, –ö –≤—ã–ø–ª–∞—Ç–µ, –í—ã–ø–ª–∞—Ç—ã, –ë–∞–ª–∞–Ω—Å                              | 100% —à–∏—Ä–∏–Ω—ã    |

#### 4. **–°—Ç–∏–ª–∏–∑–∞—Ü–∏—è DataTable**

```dart
DataTable(
  // –°—Ç–∏–ª—å –∑–∞–≥–æ–ª–æ–≤–∫–∞
  headingTextStyle: theme.textTheme.titleSmall?.copyWith(
    fontWeight: FontWeight.bold,
  ),
  
  // –°—Ç–∏–ª—å –¥–∞–Ω–Ω—ã—Ö
  dataTextStyle: theme.textTheme.bodyMedium,
  
  // –¶–≤–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞
  headingRowColor: WidgetStateProperty.resolveWith<Color>((states) {
    return theme.colorScheme.surface;
  }),
  
  // –ì—Ä–∞–Ω–∏—Ü—ã —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é 0.2
  border: TableBorder.all(
    color: theme.colorScheme.outline.withValues(alpha: 0.2),
    width: 1,
  ),
  
  // –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É –∫–æ–ª–æ–Ω–∫–∞–º–∏
  columnSpacing: ResponsiveUtils.adaptiveValue(
    context: context,
    mobile: 12,
    tablet: 16,
    desktop: 24,
  ),
  
  // –í—ã—Å–æ—Ç–∞ —Å—Ç—Ä–æ–∫
  headingRowHeight: 48,
  dataRowMinHeight: 52,
  dataRowMaxHeight: 52,
)
```

#### 5. **–ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**

–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:

```dart
if (widget.payrolls.isEmpty) {
  return Center(
    child: Column(
      mainAxisAlignment: MainAxisAlignment.center,
      children: [
        Icon(Icons.assignment_late_outlined, size: 64),
        const SizedBox(height: 16),
        Text('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è'),
        const SizedBox(height: 8),
        Text('–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –∏–ª–∏ –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π –ø–µ—Ä–∏–æ–¥'),
      ],
    ),
  );
}
```

---

## üé® PayrollTableRowBuilder

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å—Ç—Ä–æ–∫ —Ç–∞–±–ª–∏—Ü—ã —Å –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –∏ –ø–æ–¥—Å—á—ë—Ç–æ–º –∏—Ç–æ–≥–æ–≤.

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

#### 1. **buildDataRows() ‚Äî –≥–ª–∞–≤–Ω—ã–π –º–µ—Ç–æ–¥**

```dart
static List<DataRow> buildDataRows({
  required Map<String?, List<PayrollCalculation>> groupedPayrolls,
  required ThemeData theme,
  required List<dynamic> employees,
  required List<dynamic> timesheetEntries,
  required Map<String, double> payoutsByEmployee,
  required Map<String, double> aggregatedBalance,
  required bool isMobile,
  required bool isTablet,
  required bool isDesktop,
  required PayrollTotals totals,
}) {
  // 1. –°–æ–∑–¥–∞—ë–º –∫–∞—Ä—Ç—É –ø–æ–∑–∏—Ü–∏–π
  // 2. –°–æ—Ä—Ç–∏—Ä—É–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
  // 3. –°–æ–∑–¥–∞—ë–º —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
  // 4. –î–æ–±–∞–≤–ª—è–µ–º –∏—Ç–æ–≥–æ–≤—É—é —Å—Ç—Ä–æ–∫—É
}
```

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:** –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É (–§–∞–º–∏–ª–∏—è + –ò–º—è + –û—Ç—á–µ—Å—Ç–≤–æ)
2. **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫:** –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è `DataRow`
3. **–ü–æ–¥—Å—á—ë—Ç –∏—Ç–æ–≥–æ–≤:** –ê–≥—Ä–µ–≥–∏—Ä—É—é—Ç—Å—è —Å—É–º–º—ã –ø–æ –≤—Å–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º
4. **–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞:** –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫–æ–Ω–µ—Ü —Ç–∞–±–ª–∏—Ü—ã —Å –∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º

#### 2. **_buildRowCells() ‚Äî –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —è—á–µ–π–∫–∏**

–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ –Ω–∞–±–æ—Ä—ã —è—á–µ–µ–∫:

```dart
if (isDesktop) {
  cells.addAll(_buildDesktopCells(...));     // –í—Å–µ –∫–æ–ª–æ–Ω–∫–∏
} else if (isTablet) {
  cells.addAll(_buildTabletCells(...));      // –°–æ–∫—Ä–∞—â—ë–Ω–Ω—ã–π –Ω–∞–±–æ—Ä
} else {
  cells.addAll(_buildMobileCells(...));      // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä
}
```

#### 3. **PayrollTotals ‚Äî –∫–ª–∞—Å—Å –¥–ª—è –∏—Ç–æ–≥–æ–≤**

```dart
class PayrollTotals {
  double hours = 0;      // –°—É–º–º–∞—Ä–Ω—ã–µ —á–∞—Å—ã
  double base = 0;       // –°—É–º–º–∞—Ä–Ω–∞—è –±–∞–∑–æ–≤–∞—è —Å—É–º–º–∞
  double bonus = 0;      // –°—É–º–º–∞—Ä–Ω—ã–µ –ø—Ä–µ–º–∏–∏
  double penalty = 0;    // –°—É–º–º–∞—Ä–Ω—ã–µ —à—Ç—Ä–∞—Ñ—ã
  double amount = 0;     // –°—É–º–º–∞—Ä–Ω–∞—è –∫ –≤—ã–ø–ª–∞—Ç–µ
  double trip = 0;       // –°—É–º–º–∞—Ä–Ω—ã–µ –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ—á–Ω—ã–µ
  double payout = 0;     // –°—É–º–º–∞—Ä–Ω—ã–µ –≤—ã–ø–ª–∞—Ç—ã
  double balance = 0;    // –°—É–º–º–∞—Ä–Ω—ã–π –±–∞–ª–∞–Ω—Å
}
```

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
```dart
static void _updateTotals(
  PayrollTotals totals,
  PayrollCalculation payroll,
  Map<String, double> payoutsByEmployee,
  Map<String, double> aggregatedBalance,
) {
  totals.hours += payroll.hoursWorked;
  totals.base += payroll.baseSalary;
  totals.bonus += payroll.bonusesTotal;
  totals.penalty += payroll.penaltiesTotal;
  totals.amount += payroll.netSalary;
  totals.trip += payroll.businessTripTotal;
  totals.payout += payoutsByEmployee[payroll.employeeId] ?? 0;
  totals.balance += (aggregatedBalance[payroll.employeeId ?? ''] ?? 0) +
      payroll.netSalary -
      (payoutsByEmployee[payroll.employeeId] ?? 0);
}
```

---

## üß© PayrollTableCellBuilder

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–£—Ç–∏–ª–∏—Ç–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —è—á–µ–µ–∫ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–µ–π.

### –¢–∏–ø—ã —è—á–µ–µ–∫

#### 1. **buildEmployeeCell() ‚Äî —è—á–µ–π–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞**

```dart
DataCell(
  Row(
    crossAxisAlignment: CrossAxisAlignment.center,
    children: [
      // –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä (—Ç–æ–ª—å–∫–æ –Ω–∞ desktop)
      if (!isMobile)
        Container(
          width: 24,
          height: 24,
          margin: const EdgeInsets.only(right: 8),
          decoration: BoxDecoration(
            color: theme.colorScheme.surfaceContainerHighest,
            borderRadius: BorderRadius.circular(12),
          ),
          child: Center(
            child: Text(
              index.toString(),
              style: theme.textTheme.bodySmall?.copyWith(
                color: theme.colorScheme.onSurface,
                fontWeight: FontWeight.bold,
              ),
            ),
          ),
        ),
      
      // –§–ò–û –∏ –¥–æ–ª–∂–Ω–æ—Å—Ç—å
      Expanded(
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Text(employeeName.trim(), style: ...),
            if (position.isNotEmpty && !isMobile)
              Text(position, style: ...),
          ],
        ),
      ),
    ],
  ),
)
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ö—Ä—É–≥–ª—ã–π –±–µ–π–¥–∂ —Å –Ω–æ–º–µ—Ä–æ–º (—Ç–æ–ª—å–∫–æ desktop)
- –§–ò–û –∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º
- –î–æ–ª–∂–Ω–æ—Å—Ç—å —Å–µ—Ä—ã–º —à—Ä–∏—Ñ—Ç–æ–º (—Ç–æ–ª—å–∫–æ desktop)
- Overflow: ellipsis –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –∏–º—ë–Ω

#### 2. **buildHoursCell() ‚Äî —á–∞—Å—ã**

```dart
static DataCell buildHoursCell(double hours) {
  return DataCell(
    Text(
      hours % 1 == 0 
        ? hours.toInt().toString()        // –¶–µ–ª—ã–µ —á–∞—Å—ã: "8"
        : hours.toStringAsFixed(1),       // –î—Ä–æ–±–Ω—ã–µ: "8.5"
    ),
  );
}
```

#### 3. **buildCurrencyCell() ‚Äî –¥–µ–Ω–µ–∂–Ω–∞—è —Å—É–º–º–∞**

```dart
static DataCell buildCurrencyCell(double amount, {
  Color? textColor,
  FontWeight? fontWeight,
}) {
  return DataCell(
    Text(
      NumberFormat.currency(
        locale: 'ru_RU',
        symbol: '‚ÇΩ',
        decimalDigits: 2,
      ).format(amount),
      style: TextStyle(
        color: textColor,
        fontWeight: fontWeight,
      ),
    ),
  );
}
```

**–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –õ–æ–∫–∞–ª—å: `ru_RU`
- –°–∏–º–≤–æ–ª: `‚ÇΩ`
- –î–µ—Å—è—Ç–∏—á–Ω—ã–µ –∑–Ω–∞–∫–∏: 2
- –ü—Ä–∏–º–µ—Ä: `12 345,67 ‚ÇΩ`

#### 4. **buildBonusCell() ‚Äî –ø—Ä–µ–º–∏–∏**

```dart
static DataCell buildBonusCell(double bonusesTotal, ThemeData theme) {
  return DataCell(
    Text(
      bonusesTotal > 0 
        ? _numberFormat.format(bonusesTotal) 
        : '‚Äî',
      style: bonusesTotal > 0
        ? theme.textTheme.bodyMedium?.copyWith(
            color: PayrollTableConstants.bonusColor,  // –ó–µ–ª—ë–Ω—ã–π #2E7D32
            fontWeight: FontWeight.w500,
          )
        : null,
    ),
  );
}
```

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ > 0: –∑–µ–ª—ë–Ω—ã–π —Ü–≤–µ—Ç, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞
- –ï—Å–ª–∏ 0: —Å–µ—Ä—ã–π —Ç–∏—Ä–µ `‚Äî`

#### 5. **buildPenaltyCell() ‚Äî —à—Ç—Ä–∞—Ñ—ã**

```dart
static DataCell buildPenaltyCell(double penaltiesTotal, ThemeData theme) {
  return DataCell(
    Text(
      penaltiesTotal > 0 
        ? _numberFormat.format(penaltiesTotal) 
        : '‚Äî',
      style: penaltiesTotal > 0
        ? theme.textTheme.bodyMedium?.copyWith(
            color: PayrollTableConstants.penaltyColor,  // –ö—Ä–∞—Å–Ω—ã–π #C62828
            fontWeight: FontWeight.w500,
          )
        : null,
    ),
  );
}
```

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ > 0: –∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞
- –ï—Å–ª–∏ 0: —Å–µ—Ä—ã–π —Ç–∏—Ä–µ `‚Äî`

#### 6. **buildPayoutCell() ‚Äî –≤—ã–ø–ª–∞—Ç—ã**

```dart
static DataCell buildPayoutCell(double? payoutAmount, ThemeData theme) {
  final hasPayouts = payoutAmount != null && payoutAmount > 0;
  return DataCell(
    Text(
      hasPayouts 
        ? _numberFormat.format(payoutAmount) 
        : '‚Äî',
      style: hasPayouts
        ? theme.textTheme.bodyMedium?.copyWith(
            color: PayrollTableConstants.payoutColor,  // –°–∏–Ω–∏–π #1565C0
            fontWeight: FontWeight.w500,
          )
        : null,
    ),
  );
}
```

#### 7. **buildBalanceCell() ‚Äî –±–∞–ª–∞–Ω—Å**

```dart
static DataCell buildBalanceCell(double balance, ThemeData theme) {
  return DataCell(
    BalanceUtils.buildBalanceWidget(
      balance,
      theme,
      showIcon: true,              // –ü–æ–∫–∞–∑–∞—Ç—å –∏–∫–æ–Ω–∫—É
      showDescription: false,      // –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ
      textStyle: theme.textTheme.bodyMedium,
    ),
  );
}
```

**–¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è:**
- üü¢ **–ó–µ–ª—ë–Ω—ã–π:** –±–∞–ª–∞–Ω—Å > 0 (–∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º)
- üî¥ **–ö—Ä–∞—Å–Ω—ã–π:** –±–∞–ª–∞–Ω—Å < 0 (–ø–µ—Ä–µ–ø–ª–∞—Ç–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É)
- ‚ö™ **–°–µ—Ä—ã–π:** –±–∞–ª–∞–Ω—Å = 0 (—Ä–∞—Å—á—ë—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã)

#### 8. **buildNetSalaryCell() ‚Äî –∫ –≤—ã–ø–ª–∞—Ç–µ**

```dart
static DataCell buildNetSalaryCell(double netSalary, ThemeData theme) {
  return DataCell(
    Text(
      _numberFormat.format(netSalary),
      style: theme.textTheme.bodyMedium?.copyWith(
        fontWeight: FontWeight.bold,  // –ñ–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç
      ),
    ),
  );
}
```

#### 9. **buildTotalCell() ‚Äî –∏—Ç–æ–≥–æ–≤–∞—è —è—á–µ–π–∫–∞**

```dart
static DataCell buildTotalCell(
  double amount,
  ThemeData theme, {
  Color? backgroundColor,
}) {
  return DataCell(
    Container(
      padding: const EdgeInsets.symmetric(vertical: 4, horizontal: 8),
      decoration: BoxDecoration(
        color: backgroundColor ?? theme.colorScheme.primaryContainer,
        borderRadius: BorderRadius.circular(4),
      ),
      child: Text(
        amount > 0 ? _numberFormat.format(amount) : '‚Äî',
        style: theme.textTheme.bodyMedium?.copyWith(
          fontWeight: FontWeight.bold,
          color: backgroundColor != null
            ? PayrollTableConstants.payoutColor
            : theme.colorScheme.onPrimaryContainer,
        ),
      ),
    ),
  );
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Ñ–æ–Ω–æ–º
- –°–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–µ —É–≥–ª—ã
- –ñ–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç
- –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### 10. **buildTotalBalanceCell() ‚Äî –∏—Ç–æ–≥–æ–≤—ã–π –±–∞–ª–∞–Ω—Å**

```dart
static DataCell buildTotalBalanceCell(double balance, ThemeData theme) {
  return DataCell(
    Container(
      padding: const EdgeInsets.symmetric(vertical: 4, horizontal: 8),
      decoration: BoxDecoration(
        color: BalanceUtils.getBalanceColor(balance, theme)
            .withValues(alpha: 0.1),  // –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–æ–Ω
        borderRadius: BorderRadius.circular(4),
      ),
      child: BalanceUtils.buildBalanceWidget(
        balance,
        theme,
        showIcon: true,
        showDescription: false,
        textStyle: theme.textTheme.bodyMedium?.copyWith(
          fontWeight: FontWeight.bold,
        ),
      ),
    ),
  );
}
```

---

## üéÅ –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–µ–º–∏–π

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

- **–§–∞–π–ª:** `payroll_bonus_table_widget.dart`
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** 280
- **–ö–æ–ª–æ–Ω–∫–∏:** –°–æ—Ç—Ä—É–¥–Ω–∏–∫, –û–±—ä–µ–∫—Ç, –°—É–º–º–∞, –î–∞—Ç–∞, –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

#### 1. **–ü—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (ConsumerWidget)**

```dart
class PayrollBonusTableWidget extends ConsumerWidget {
  const PayrollBonusTableWidget({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
    final bonuses = ref.watch(filteredBonusesProvider);
    // ...
  }
}
```

#### 2. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —Å –¥–æ–ª–∂–Ω–æ—Å—Ç—å—é**

```dart
DataCell(Row(
  children: [
    // –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä
    Text('${i + 1}. ', style: ...),
    
    // –§–ò–û –∏ –¥–æ–ª–∂–Ω–æ—Å—Ç—å
    Expanded(
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Text(fio.trim(), style: ...),
          if (position.isNotEmpty)
            Text(position, style: ...),
        ],
      ),
    ),
    
    // –ú–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π
    PopupMenuButton<String>(
      icon: const Icon(Icons.more_vert),
      onSelected: (value) async {
        if (value == 'edit') { /* –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ */ }
        else if (value == 'delete') { /* –£–¥–∞–ª–µ–Ω–∏–µ */ }
      },
      itemBuilder: (context) => [
        // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
        PopupMenuItem(value: 'edit', child: Row(...)),
        // –£–¥–∞–ª–∏—Ç—å
        PopupMenuItem(value: 'delete', child: Row(...)),
      ],
    ),
  ],
)),
```

#### 3. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã**

```dart
final dateStr = bonus.createdAt != null
  ? DateFormat('dd.MM.yyyy').format(bonus.createdAt!)
  : '';
```

#### 4. **–î–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è**

```dart
showCupertinoDialog(
  context: context,
  builder: (ctx) => CupertinoAlertDialog(
    title: const Text('–£–¥–∞–ª–∏—Ç—å –ø—Ä–µ–º–∏—é?'),
    content: const Text('–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –ø—Ä–µ–º–∏—é?'),
    actions: [
      CupertinoDialogAction(
        child: const Text('–û—Ç–º–µ–Ω–∞'),
        onPressed: () => Navigator.of(ctx).pop(),
      ),
      CupertinoDialogAction(
        isDestructiveAction: true,
        child: const Text('–£–¥–∞–ª–∏—Ç—å'),
        onPressed: () async {
          Navigator.of(ctx).pop();
          final deleteBonus = ref.read(deleteBonusUseCaseProvider);
          await deleteBonus(bonus.id);
          ref.invalidate(allBonusesProvider);
          ref.invalidate(employeeAggregatedBalanceProvider);
          if (context.mounted) {
            SnackBarUtils.showSuccess(context, '–ü—Ä–µ–º–∏—è —É–¥–∞–ª–µ–Ω–∞');
          }
        },
      ),
    ],
  ),
);
```

**–°—Ç–∏–ª—å:** CupertinoAlertDialog (iOS-—Å—Ç–∏–ª—å)

#### 5. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ ModalBottomSheet**

```dart
showModalBottomSheet(
  context: context,
  isScrollControlled: true,
  backgroundColor: Colors.transparent,
  constraints: BoxConstraints(
    maxHeight: MediaQuery.of(context).size.height -
        MediaQuery.of(context).padding.top -
        kToolbarHeight,
  ),
  builder: (ctx) => PayrollTransactionFormModal(
    transactionType: PayrollTransactionType.bonus,
    transaction: bonus,
  ),
);
```

---

## üí∏ –¢–∞–±–ª–∏—Ü–∞ —à—Ç—Ä–∞—Ñ–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

- **–§–∞–π–ª:** `payroll_penalty_table_widget.dart`
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** 286
- **–ö–æ–ª–æ–Ω–∫–∏:** –°–æ—Ç—Ä—É–¥–Ω–∏–∫, –û–±—ä–µ–∫—Ç, –°—É–º–º–∞, –î–∞—Ç–∞, –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ

### –ò–¥–µ–Ω—Ç–∏—á–Ω–∞ —Ç–∞–±–ª–∏—Ü–µ –ø—Ä–µ–º–∏–π

**–û—Ç–ª–∏—á–∏—è:**
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: "–®—Ç—Ä–∞—Ñ—ã" –≤–º–µ—Å—Ç–æ "–ü—Ä–µ–º–∏–∏"
- –¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: `PayrollTransactionType.penalty`
- –ü—Ä–æ–≤–∞–π–¥–µ—Ä: `filteredPenaltiesProvider`
- UseCase –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è: `deletePenaltyUseCaseProvider`
- –î–∏–∞–ª–æ–≥: "–£–¥–∞–ª–∏—Ç—å —à—Ç—Ä–∞—Ñ?"

---

## üí∞ –¢–∞–±–ª–∏—Ü–∞ –≤—ã–ø–ª–∞—Ç

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

- **–§–∞–π–ª:** `payroll_payout_table_widget.dart`
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** 444
- **–ö–æ–ª–æ–Ω–∫–∏:** –°–æ—Ç—Ä—É–¥–Ω–∏–∫, –ë–∞–ª–∞–Ω—Å –¥–æ –≤—ã–ø–ª–∞—Ç—ã, –°—É–º–º–∞ –≤—ã–ø–ª–∞—Ç—ã, –î–∞—Ç–∞ –≤—ã–ø–ª–∞—Ç—ã, –¢–∏–ø, –°–ø–æ—Å–æ–±

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

#### 1. **Stateful Widget —Å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏**

```dart
class PayrollPayoutTableWidget extends ConsumerStatefulWidget {
  const PayrollPayoutTableWidget({super.key});

  @override
  ConsumerState<PayrollPayoutTableWidget> createState() =>
      _PayrollPayoutTableWidgetState();
}

class _PayrollPayoutTableWidgetState
    extends ConsumerState<PayrollPayoutTableWidget> {
  final ScrollController _verticalController = ScrollController();
  final ScrollController _horizontalController = ScrollController();

  @override
  void dispose() {
    _verticalController.dispose();
    _horizontalController.dispose();
    super.dispose();
  }
  // ...
}
```

#### 2. **–ö–æ–ª–æ–Ω–∫–∞ "–ë–∞–ª–∞–Ω—Å –¥–æ –≤—ã–ø–ª–∞—Ç—ã"**

```dart
DataCell(
  BalanceUtils.buildBalanceWidget(
    balance,
    theme,
    showIcon: true,
    showDescription: false,
    textStyle: theme.textTheme.bodyMedium?.copyWith(
      fontWeight: FontWeight.w600,
    ),
  ),
),
```

**–õ–æ–≥–∏–∫–∞:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è: –∑–µ–ª—ë–Ω—ã–π/–∫—Ä–∞—Å–Ω—ã–π/—Å–µ—Ä—ã–π
- –ü–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, —Å–∫–æ–ª—å–∫–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã–ø–ª–∞—á–µ–Ω–æ

#### 3. **–ö–æ–ª–æ–Ω–∫–∞ "–°—É–º–º–∞ –≤—ã–ø–ª–∞—Ç—ã"**

```dart
DataCell(Text(
  numberFormat.format(payout.amount),
  style: theme.textTheme.bodyMedium?.copyWith(
    color: Colors.blue.shade600,  // –°–∏–Ω–∏–π —Ü–≤–µ—Ç
    fontWeight: FontWeight.w600,
  ),
)),
```

#### 4. **–¢–∏–ø—ã –≤—ã–ø–ª–∞—Ç**

```dart
String _getPayoutTypeName(String type) {
  switch (type) {
    case 'salary':
      return '–ó–∞—Ä–ø–ª–∞—Ç–∞';
    case 'advance':
      return '–ê–≤–∞–Ω—Å';
    default:
      return type;
  }
}
```

#### 5. **–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã**

```dart
String _getPayoutMethodName(String method) {
  switch (method) {
    case 'cash':
      return '–ù–∞–ª–∏—á–Ω—ã–µ';
    case 'bank_transfer':
      return '–ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥';
    case 'card':
      return '–ö–∞—Ä—Ç–∞';
    default:
      return method;
  }
}
```

#### 6. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (Future Providers)**

```dart
return payoutsAsync.when(
  data: (payouts) {
    return balanceAsync.when(
      data: (balanceMap) {
        // –†–µ–Ω–¥–µ—Ä–∏–º —Ç–∞–±–ª–∏—Ü—É
      },
      loading: () => const Center(child: CircularProgressIndicator()),
      error: (e, st) => Center(child: Text('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±–∞–ª–∞–Ω—Å–∞: $e')),
    );
  },
  loading: () => const Center(child: CircularProgressIndicator()),
  error: (e, st) => Center(child: Text('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—ã–ø–ª–∞—Ç: $e')),
);
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π: loading, data, error
- –ù–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ —Ä—É—á–Ω–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–≥—Ä—É–∑–∫–æ–π
- –†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö

---

## üèõÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### 1. **Builder Pattern (–°—Ç—Ä–æ–∏—Ç–µ–ª—å)**

```dart
// –û—Å–Ω–æ–≤–Ω–æ–π –≤–∏–¥–∂–µ—Ç
PayrollTableWidget

// –°—Ç—Ä–æ–∏—Ç–µ–ª–∏
PayrollTableRowBuilder.buildDataRows(...)
PayrollTableCellBuilder.buildEmployeeCell(...)
PayrollTableCellBuilder.buildCurrencyCell(...)
// ...
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –Ω–∞ –ø—Ä–æ—Å—Ç—ã–µ —à–∞–≥–∏
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª–µ–π
- –õ—ë–≥–∫–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —è—á–µ–µ–∫

### 2. **Strategy Pattern (–°—Ç—Ä–∞—Ç–µ–≥–∏—è)**

```dart
if (isDesktop) {
  cells.addAll(_buildDesktopCells(...));
} else if (isTablet) {
  cells.addAll(_buildTabletCells(...));
} else {
  cells.addAll(_buildMobileCells(...));
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –†–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Å–º–∞—Ä—Ç-—á–∞—Å–æ–≤)

### 3. **Separation of Concerns (–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏)**

| –°–ª–æ–π | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å | –ü—Ä–∏–º–µ—Ä |
|------|----------------|--------|
| **Widget** | UI, —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Å–∫—Ä–æ–ª–ª–∏–Ω–≥ | `PayrollTableWidget` |
| **RowBuilder** | –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ | `PayrollTableRowBuilder` |
| **CellBuilder** | –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —è—á–µ–µ–∫ | `PayrollTableCellBuilder` |
| **Constants** | –¶–≤–µ—Ç–∞, —Ä–∞–∑–º–µ—Ä—ã | `PayrollTableConstants` |
| **Utils** | –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ | `ResponsiveUtils`, `BalanceUtils` |

### 4. **Dependency Injection —á–µ—Ä–µ–∑ Riverpod**

```dart
// –ù–µ —Å–æ–∑–¥–∞—ë–º —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –≤—Ä—É—á–Ω—É—é, –∞ –ø–æ–ª—É—á–∞–µ–º –∏–∑ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
final employees = ref.watch(employeeProvider.select((s) => s.employees));
final workHours = ref.watch(payrollWorkHoursProvider);
final balanceAsync = ref.watch(employeeAggregatedBalanceProvider);
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å (–º–æ–∂–Ω–æ –ø–æ–¥–º–µ–Ω–∏—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –≤ —Ç–µ—Å—Ç–∞—Ö)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- –†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö)

### 5. **Responsive Design —á–µ—Ä–µ–∑ LayoutBuilder**

```dart
LayoutBuilder(
  builder: (context, constraints) {
    final isDesktop = constraints.maxWidth >= 900;
    final isTablet = constraints.maxWidth >= 600 && constraints.maxWidth < 900;
    final isMobile = constraints.maxWidth < 600;
    
    // –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∏—Ä–∏–Ω—ã
    // ...
  },
)
```

---

## üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

### ResponsiveUtils

```dart
class ResponsiveUtils {
  static bool isMobile(BuildContext context) {
    return MediaQuery.of(context).size.width < 600;
  }

  static bool isTablet(BuildContext context) {
    final width = MediaQuery.of(context).size.width;
    return width >= 600 && width < 1024;
  }

  static bool isDesktop(BuildContext context) {
    return MediaQuery.of(context).size.width >= 1024;
  }

  static T adaptiveValue<T>({
    required BuildContext context,
    required T mobile,
    required T tablet,
    required T desktop,
  }) {
    if (isDesktop(context)) return desktop;
    if (isTablet(context)) return tablet;
    return mobile;
  }
}
```

### Breakpoints

| –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ | –®–∏—Ä–∏–Ω–∞ —ç–∫—Ä–∞–Ω–∞ | –ü—Ä–∏–º–µ—Ä—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤ |
|------------|---------------|-------------------|
| **Mobile** | < 600px       | iPhone, Android Phone |
| **Tablet** | 600px - 1024px | iPad, Android Tablet |
| **Desktop** | ‚â• 1024px      | MacBook, Desktop PC |

### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

```dart
// –û—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É –∫–æ–ª–æ–Ω–∫–∞–º–∏
columnSpacing: ResponsiveUtils.adaptiveValue(
  context: context,
  mobile: 12,
  tablet: 16,
  desktop: 24,
),

// –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø
horizontalMargin: ResponsiveUtils.adaptiveValue(
  context: context,
  mobile: 6,
  tablet: 8,
  desktop: 12,
),
```

### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏

| –ö–æ–ª–æ–Ω–∫–∞ | Mobile | Tablet | Desktop |
|---------|--------|--------|---------|
| –°–æ—Ç—Ä—É–¥–Ω–∏–∫ | ‚úÖ | ‚úÖ | ‚úÖ |
| –ß–∞—Å—ã | ‚úÖ | ‚úÖ | ‚úÖ |
| –°—Ç–∞–≤–∫–∞ | ‚ùå | ‚ùå | ‚úÖ |
| –ë–∞–∑–æ–≤–∞—è —Å—É–º–º–∞ | ‚ùå | ‚úÖ | ‚úÖ |
| –ü—Ä–µ–º–∏–∏ | ‚ùå | ‚úÖ | ‚úÖ |
| –®—Ç—Ä–∞—Ñ—ã | ‚ùå | ‚ùå | ‚úÖ |
| –ö–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ—á–Ω—ã–µ | ‚úÖ | ‚úÖ | ‚úÖ |
| –ö –≤—ã–ø–ª–∞—Ç–µ | ‚úÖ | ‚úÖ | ‚úÖ |
| –í—ã–ø–ª–∞—Ç—ã | ‚úÖ | ‚úÖ | ‚úÖ |
| –ë–∞–ª–∞–Ω—Å | ‚úÖ | ‚úÖ | ‚úÖ |

**–õ–æ–≥–∏–∫–∞:**
- **Mobile:** –¢–æ–ª—å–∫–æ —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ (—á–∞—Å—ã, –∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–æ—á–Ω—ã–µ, –∫ –≤—ã–ø–ª–∞—Ç–µ, –≤—ã–ø–ª–∞—Ç—ã, –±–∞–ª–∞–Ω—Å)
- **Tablet:** –°—Ä–µ–¥–Ω–∏–π –Ω–∞–±–æ—Ä (–¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –±–∞–∑–æ–≤–∞—è —Å—É–º–º–∞ –∏ –ø—Ä–µ–º–∏–∏)
- **Desktop:** –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä (–≤—Å–µ –∫–æ–ª–æ–Ω–∫–∏)

---

## üé® –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∏ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ

### PayrollTableConstants

```dart
class PayrollTableConstants {
  static const Color bonusColor = Color(0xFF2E7D32);      // –ó–µ–ª—ë–Ω—ã–π
  static const Color penaltyColor = Color(0xFFC62828);    // –ö—Ä–∞—Å–Ω—ã–π
  static const Color payoutColor = Color(0xFF1565C0);     // –°–∏–Ω–∏–π
  static const Color balanceColor = Color(0xFF4527A0);    // –§–∏–æ–ª–µ—Ç–æ–≤—ã–π
  
  static const double mobileColumnSpacing = 12;
  static const double tabletColumnSpacing = 16;
  static const double desktopColumnSpacing = 24;
}
```

### –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞

| –≠–ª–µ–º–µ–Ω—Ç | –¶–≤–µ—Ç | –ó–Ω–∞—á–µ–Ω–∏–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|---------|------|----------|---------------|
| **–ü—Ä–µ–º–∏–∏** | üü¢ #2E7D32 | –ó–µ–ª—ë–Ω—ã–π | –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è |
| **–®—Ç—Ä–∞—Ñ—ã** | üî¥ #C62828 | –ö—Ä–∞—Å–Ω—ã–π | –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è |
| **–í—ã–ø–ª–∞—Ç—ã** | üîµ #1565C0 | –°–∏–Ω–∏–π | –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–ø–ª–∞—Ç—ã |
| **–ë–∞–ª–∞–Ω—Å (+)** | üü¢ –ó–µ–ª—ë–Ω—ã–π | ‚Äî | –ó–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º |
| **–ë–∞–ª–∞–Ω—Å (-)** | üî¥ –ö—Ä–∞—Å–Ω—ã–π | ‚Äî | –ü–µ—Ä–µ–ø–ª–∞—Ç–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É |
| **–ë–∞–ª–∞–Ω—Å (0)** | ‚ö™ –°–µ—Ä—ã–π | ‚Äî | –†–∞—Å—á—ë—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã |
| **–ö –≤—ã–ø–ª–∞—Ç–µ** | ‚ö´ –ß—ë—Ä–Ω—ã–π | FontWeight.bold | –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ |

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –î–µ–Ω–µ–∂–Ω—ã–µ —Å—É–º–º—ã

```dart
NumberFormat.currency(
  locale: 'ru_RU',      // –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ñ–æ—Ä–º–∞—Ç
  symbol: '‚ÇΩ',          // –†—É–±–ª—å
  decimalDigits: 2,     // 2 –∑–Ω–∞–∫–∞ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π
)
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- `12345.67` ‚Üí `12 345,67 ‚ÇΩ`
- `1000.00` ‚Üí `1 000,00 ‚ÇΩ`
- `0.00` ‚Üí `0,00 ‚ÇΩ`

#### –î–∞—Ç—ã

```dart
DateFormat('dd.MM.yyyy').format(date)
DateFormat.yMMMM('ru').format(date)  // –î–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- `04.10.2025`
- `–û–∫—Ç—è–±—Ä—å 2025`

#### –ß–∞—Å—ã

```dart
hours % 1 == 0 
  ? hours.toInt().toString()        // "8"
  : hours.toStringAsFixed(1)        // "8.5"
```

---

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### 1. **–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–æ–∫**

#### const –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã

```dart
const PayrollBonusTableWidget({super.key});
const DataColumn(label: Text('–°–æ—Ç—Ä—É–¥–Ω–∏–∫'));
const SizedBox(height: 16);
```

#### select –≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞—Ö

```dart
// ‚ùå –ü–ª–æ—Ö–æ: –ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–∏ –ª—é–±–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ employeeProvider
final employees = ref.watch(employeeProvider).employees;

// ‚úÖ –•–æ—Ä–æ—à–æ: –ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ employees
final employees = ref.watch(employeeProvider.select((s) => s.employees));
```

### 2. **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**

#### FutureProvider –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```dart
final payoutsAsync = ref.watch(filteredPayrollPayoutsProvider);

return payoutsAsync.when(
  data: (payouts) { /* –†–µ–Ω–¥–µ—Ä–∏–º */ },
  loading: () => const CircularProgressIndicator(),
  error: (e, st) => Text('–û—à–∏–±–∫–∞: $e'),
);
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
- –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è UI

### 3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∫—Ä–æ–ª–ª–∏–Ω–≥–∞**

#### –î–≤–æ–π–Ω–æ–π Scrollbar

```dart
Scrollbar(
  controller: _verticalController,
  thumbVisibility: true,                    // –í—Å–µ–≥–¥–∞ –≤–∏–¥–∏–º
  child: SingleChildScrollView(
    controller: _verticalController,
    child: Scrollbar(
      controller: _horizontalController,
      thumbVisibility: needsHorizontalScroll,  // –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
      scrollbarOrientation: ScrollbarOrientation.bottom,
      child: SingleChildScrollView(
        controller: _horizontalController,
        scrollDirection: Axis.horizontal,
        // ...
      ),
    ),
  ),
)
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏–º
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–µ–Ω
- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 4. **ConstrainedBox –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —à–∏—Ä–∏–Ω—ã**

```dart
ConstrainedBox(
  constraints: BoxConstraints(
    minWidth: needsHorizontalScroll
      ? minTableWidth
      : constraints.maxWidth,
  ),
  child: DataTable(...),
)
```

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ –Ω–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é —à–∏—Ä–∏–Ω—É
- –ï—Å–ª–∏ –ø–æ–º–µ—â–∞–µ—Ç—Å—è ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å—é –¥–æ—Å—Ç—É–ø–Ω—É—é —à–∏—Ä–∏–Ω—É

### 5. **–ò–∑–º–µ—Ä–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**

| –î–µ–π—Å—Ç–≤–∏–µ | –í—Ä–µ–º—è | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|----------|-------|------------|
| –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (RPC) | 120-200ms | –í–∫–ª—é—á–∞—è —Å–µ—Ç–µ–≤—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ |
| –†–µ–Ω–¥–µ—Ä —Ç–∞–±–ª–∏—Ü—ã (30 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤) | <50ms | –ß–∏—Å—Ç—ã–π —Ä–µ–Ω–¥–µ—Ä |
| –°–∫—Ä–æ–ª–ª —Ç–∞–±–ª–∏—Ü—ã | 60 FPS | –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è |
| –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (refresh) | ~200ms | RPC + invalidate + —Ä–µ–Ω–¥–µ—Ä |

---

## üìù –ú–æ–¥–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã

### –û–±–∑–æ—Ä –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω

–ú–æ–¥—É–ª—å –§–û–¢ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 3 —Ç–∏–ø–∞ –º–æ–¥–∞–ª—å–Ω—ã—Ö —Ñ–æ—Ä–º:

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ |
|------|------------|------------|
| `payroll_transaction_form_modal.dart` | –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–º–∏–π –∏ —à—Ç—Ä–∞—Ñ–æ–≤ | 528 |
| `payroll_payout_form_modal.dart` | –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–ª–∞—Ç (—ç—Ç–∞–ø 1) | 751 |
| `payroll_payout_amount_modal.dart` | –£–∫–∞–∑–∞–Ω–∏–µ —Å—É–º–º –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –≤—ã–ø–ª–∞—Ç (—ç—Ç–∞–ø 2) | 716 |

**–û–±—â–∏–π –æ–±—ä—ë–º –∫–æ–¥–∞ –º–æ–¥–∞–ª—å–Ω—ã—Ö —Ñ–æ—Ä–º:** ~1995 —Å—Ç—Ä–æ–∫

### PayrollTransactionFormModal

**–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ –¥–ª—è –ø—Ä–µ–º–∏–π –∏ —à—Ç—Ä–∞—Ñ–æ–≤**

#### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

1. **–ü–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º —á–µ—Ä–µ–∑ PayrollTransactionType**
   ```dart
   enum PayrollTransactionType { bonus, penalty }
   ```

2. **–ï–¥–∏–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è**
   ```dart
   Future<void> _saveTransaction() async {
     if (_type == PayrollTransactionType.bonus) {
       await _saveBonus(uuid, amount, reason, date);
     } else {
       await _savePenalty(uuid, amount, reason, date);
     }
   }
   ```

3. **–ü–æ–ª—è:**
   - –î–∞—Ç–∞ (DatePicker)
   - –°–æ—Ç—Ä—É–¥–Ω–∏–∫ (DropdownTypeAheadField)
   - –û–±—ä–µ–∫—Ç (DropdownTypeAheadField)
   - –°—É–º–º–∞ (TextFormField —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π)
   - –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ (TextFormField, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

4. **–í–∞–ª–∏–¥–∞—Ü–∏—è:**
   - –î–∞—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞
   - –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
   - –û–±—ä–µ–∫—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
   - –°—É–º–º–∞ > 0

### PayrollPayoutFormModal

**–§–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã–ø–ª–∞—Ç (–ø–µ—Ä–≤—ã–π —ç—Ç–∞–ø)**

#### –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã:

1. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (isEditing = true):**
   - –û–¥–∏–Ω–æ—á–Ω—ã–π –≤—ã–±–æ—Ä —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
   - –ü–æ–ª–µ —Å—É–º–º—ã –≤–∏–¥–Ω–æ —Å—Ä–∞–∑—É
   - –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"

2. **–ú–∞—Å—Å–æ–≤—ã–µ –≤—ã–ø–ª–∞—Ç—ã (isEditing = false):**
   - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
   - –ü–æ–ª–µ —Å—É–º–º—ã —Å–∫—Ä—ã—Ç–æ
   - –ö–Ω–æ–ø–∫–∞ "–î–∞–ª–µ–µ" ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç PayrollPayoutAmountModal

#### –ü–æ–ª—è:

- –î–∞—Ç–∞ –≤—ã–ø–ª–∞—Ç—ã (DatePicker)
- –°–æ—Ç—Ä—É–¥–Ω–∏–∫(–∏) (Single/Multi DropDownTextField)
- –°—É–º–º–∞ (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏)
- –°–ø–æ—Å–æ–± –≤—ã–ø–ª–∞—Ç—ã (DropdownTypeAheadField)
  - –ö–∞—Ä—Ç–∞
  - –ù–∞–ª–∏—á–Ω—ã–µ
  - –ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥
- –¢–∏–ø –æ–ø–ª–∞—Ç—ã (DropdownTypeAheadField)
  - –ó–∞—Ä–ø–ª–∞—Ç–∞
  - –ê–≤–∞–Ω—Å
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### –ö–ª–∞—Å—Å—ã PaymentMethod –∏ PaymentType:

```dart
class PaymentMethod {
  final String value;          // 'card', 'cash', 'bank_transfer'
  final String displayName;    // '–ö–∞—Ä—Ç–∞', '–ù–∞–ª–∏—á–Ω—ã–µ', '–ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥'
  static const List<PaymentMethod> values = [...];
}

class PaymentType {
  final String value;          // 'salary', 'advance'
  final String displayName;    // '–ó–∞—Ä–ø–ª–∞—Ç–∞', '–ê–≤–∞–Ω—Å'
  static const List<PaymentType> values = [...];
}
```

### PayrollPayoutAmountModal

**–í—Ç–æ—Ä–æ–π —ç—Ç–∞–ø –º–∞—Å—Å–æ–≤—ã—Ö –≤—ã–ø–ª–∞—Ç ‚Äî —É–∫–∞–∑–∞–Ω–∏–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö —Å—É–º–º**

#### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

1. **–°–ø–∏—Å–æ–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤**
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ ‚Äî –ø–æ–ª–µ –≤–≤–æ–¥–∞ —Å—É–º–º—ã
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∏–∑ —Å–ø–∏—Å–∫–∞

2. **–ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å**
   ```dart
   GestureDetector(
     onTap: balance > 0 ? () {
       _amountControllers[employee.id]?.text = balance.toString();
       _updateTotal();
     } : null,
     child: Container(...), // –ë–µ–π–¥–∂ —Å –±–∞–ª–∞–Ω—Å–æ–º
   )
   ```
   - –ï—Å–ª–∏ –±–∞–ª–∞–Ω—Å > 0 ‚Äî –º–æ–∂–Ω–æ –∫–ª–∏–∫–Ω—É—Ç—å –∏ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–∏—Ç—å —Å—É–º–º—É
   - –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è: –∑–µ–ª—ë–Ω—ã–π/–∫—Ä–∞—Å–Ω—ã–π/—Å–µ—Ä—ã–π

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Å—á—ë—Ç –∏—Ç–æ–≥–æ–≤–æ–π —Å—É–º–º—ã**
   ```dart
   ValueListenableBuilder<double>(
     valueListenable: _totalAmount,
     builder: (context, total, child) {
       return Text(numberFormat.format(total));
     },
   )
   ```

4. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å**
   - –î–∞—Ç–∞ –≤—ã–ø–ª–∞—Ç—ã
   - –°–ø–æ—Å–æ–± –≤—ã–ø–ª–∞—Ç—ã
   - –¢–∏–ø –æ–ø–ª–∞—Ç—ã
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

#### –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Å—Å–æ–≤—ã—Ö –≤—ã–ø–ª–∞—Ç:

```dart
Future<void> _savePayouts() async {
  final payouts = <PayrollPayoutModel>[];
  
  // –°–æ–∑–¥–∞–µ–º –≤—ã–ø–ª–∞—Ç—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
  for (final employee in _currentEmployees) {
    final amountText = _amountControllers[employee.id]?.text ?? '';
    if (amountText.isNotEmpty) {
      final amount = double.parse(amountText.replaceAll(',', '.'));
      if (amount > 0) {
        payouts.add(PayrollPayoutModel(...));
      }
    }
  }
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ –≤—ã–ø–ª–∞—Ç—ã
  for (final payout in payouts) {
    await createUseCase(payout);
  }
  
  // –ó–∞–∫—Ä—ã–≤–∞–µ–º –æ–±–∞ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–Ω–∞
  Navigator.pop(context); // –í—Ç–æ—Ä–æ–µ –æ–∫–Ω–æ
  Navigator.pop(context); // –ü–µ—Ä–≤–æ–µ –æ–∫–Ω–æ
}
```

### –û–±—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –º–æ–¥–∞–ª—å–Ω—ã—Ö —Ñ–æ—Ä–º

#### 1. –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

```dart
final modalContent = Container(
  margin: isDesktop
      ? const EdgeInsets.only(top: 48)
      : EdgeInsets.only(
          top: kToolbarHeight + MediaQuery.of(context).padding.top),
  clipBehavior: Clip.antiAlias,
  decoration: BoxDecoration(
    color: theme.colorScheme.surface,
    borderRadius: const BorderRadius.vertical(top: Radius.circular(32)),
    boxShadow: [
      BoxShadow(
        color: Colors.black.withValues(alpha: 0.18),
        blurRadius: 24,
        offset: const Offset(0, -8),
      ),
    ],
    border: Border.all(
      color: theme.colorScheme.outline.withValues(alpha: 0.12),
      width: 1.5,
    ),
  ),
  child: DraggableScrollableSheet(...),
);

if (isDesktop) {
  return Align(
    alignment: Alignment.topCenter,
    child: ConstrainedBox(
      constraints: BoxConstraints(maxWidth: screenWidth * 0.5),
      child: modalContent,
    ),
  );
} else {
  return modalContent;
}
```

#### 2. DraggableScrollableSheet

```dart
DraggableScrollableSheet(
  initialChildSize: 1.0,
  minChildSize: 0.5,
  maxChildSize: 1.0,
  expand: false,
  builder: (context, scrollController) => SingleChildScrollView(
    controller: scrollController,
    child: Padding(
      padding: EdgeInsets.only(
        bottom: MediaQuery.of(context).viewInsets.bottom,
      ),
      child: ...,
    ),
  ),
)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ü–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
- –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–≤–∞–π–ø–æ–º –≤–Ω–∏–∑

#### 3. –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π

```dart
Row(
  children: [
    Expanded(
      child: OutlinedButton(
        onPressed: () => Navigator.pop(context),
        style: OutlinedButton.styleFrom(
          minimumSize: const Size.fromHeight(44),
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(12),
          ),
        ),
        child: const Text('–û—Ç–º–µ–Ω–∞'),
      ),
    ),
    const SizedBox(width: 16),
    Expanded(
      child: ElevatedButton(
        onPressed: _isSaving ? null : _saveTransaction,
        style: ElevatedButton.styleFrom(
          minimumSize: const Size.fromHeight(44),
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(12),
          ),
        ),
        child: _isSaving
            ? const SizedBox(
                height: 20,
                width: 20,
                child: CupertinoActivityIndicator(),
              )
            : Text(_isEditing ? '–û–±–Ω–æ–≤–∏—Ç—å' : '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å'),
      ),
    ),
  ],
)
```

#### 4. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏

```dart
final _isSaving = ValueNotifier<bool>(false);

ValueListenableBuilder<bool>(
  valueListenable: _isSaving,
  builder: (context, isSaving, child) {
    return ElevatedButton(
      onPressed: isSaving ? null : _saveTransaction,
      child: isSaving
          ? const CupertinoActivityIndicator()
          : const Text('–°–æ—Ö—Ä–∞–Ω–∏—Ç—å'),
    );
  },
)
```

---

## üîç –ê—É–¥–∏—Ç: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

### ‚ùå –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –¥—É–±–ª–∏

#### 1. **–ú–µ—Ç–æ–¥—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π (3 —Ä–∞–∑–∞)**

**–î—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤:**
- `payroll_payout_form_modal.dart`
- `payroll_payout_amount_modal.dart`

```dart
// –î—É–±–ª—å 1
String _getMethodDisplayName(String method) {
  switch (method) {
    case 'card': return '–ö–∞—Ä—Ç–∞';
    case 'cash': return '–ù–∞–ª–∏—á–Ω—ã–µ';
    case 'bank_transfer': return '–ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥';
    default: return '–ù–∞–ª–∏—á–Ω—ã–µ';
  }
}

// –î—É–±–ª—å 2
String _getTypeDisplayName(String type) {
  switch (method) {
    case 'salary': return '–ó–∞—Ä–ø–ª–∞—Ç–∞';
    case 'advance': return '–ê–≤–∞–Ω—Å';
    default: return '–ó–∞—Ä–ø–ª–∞—Ç–∞';
  }
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å–ø–æ—Å–æ–±–∞/—Ç–∏–ø–∞ –ø—Ä–∏–¥—ë—Ç—Å—è –º–µ–Ω—è—Ç—å –≤ 2 –º–µ—Å—Ç–∞—Ö.

**–†–µ—à–µ–Ω–∏–µ:** –í—ã–Ω–µ—Å—Ç–∏ –≤ —É—Ç–∏–ª–∏—Ç–Ω—ã–π –∫–ª–∞—Å—Å `lib/features/fot/presentation/utils/payout_utils.dart`

```dart
class PayoutUtils {
  static String getMethodDisplayName(String method) { ... }
  static String getTypeDisplayName(String type) { ... }
}
```

---

#### 2. **–î–µ–∫–æ—Ä–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (3 —Ä–∞–∑–∞)**

**–î—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤:**
- `payroll_transaction_form_modal.dart`
- `payroll_payout_form_modal.dart`
- `payroll_payout_amount_modal.dart`

```dart
// –û–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫–æ–¥ –≤ 3 —Ñ–∞–π–ª–∞—Ö
final modalContent = Container(
  margin: isDesktop
      ? const EdgeInsets.only(top: 48)
      : EdgeInsets.only(
          top: kToolbarHeight + MediaQuery.of(context).padding.top),
  clipBehavior: Clip.antiAlias,
  decoration: BoxDecoration(
    color: theme.colorScheme.surface,
    borderRadius: const BorderRadius.vertical(top: Radius.circular(32)),
    boxShadow: [
      BoxShadow(
        color: Colors.black.withValues(alpha: 0.18),
        blurRadius: 24,
        offset: const Offset(0, -8),
      ),
    ],
    border: Border.all(
      color: theme.colorScheme.outline.withValues(alpha: 0.12),
      width: 1.5,
    ),
  ),
  child: ...,
);
```

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å `ModalContainerWrapper` –≤ `lib/core/widgets/`

```dart
class ModalContainerWrapper extends StatelessWidget {
  final Widget child;
  final bool isDesktop;
  final double screenWidth;
  
  const ModalContainerWrapper({
    required this.child,
    required this.isDesktop,
    required this.screenWidth,
  });
  
  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final modalContent = Container(
      // ... –≤—Å—è –¥–µ–∫–æ—Ä–∞—Ü–∏—è
      child: child,
    );
    
    if (isDesktop) {
      return Align(
        alignment: Alignment.topCenter,
        child: ConstrainedBox(
          constraints: BoxConstraints(maxWidth: screenWidth * 0.5),
          child: modalContent,
        ),
      );
    }
    return modalContent;
  }
}
```

---

#### 3. **–ú–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç—ã —Å –±–∞–ª–∞–Ω—Å–æ–º (2 —Ä–∞–∑–∞)**

**–î—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤:**
- `payroll_payout_amount_modal.dart`
- `lib/features/fot/presentation/widgets/utils/balance_utils.dart` (–≤–æ–∑–º–æ–∂–Ω–æ)

```dart
// –í payroll_payout_amount_modal.dart
Color _getBalanceColor(double balance, ThemeData theme) {
  if (balance > 0) return Colors.green.shade600;
  else if (balance < 0) return Colors.red.shade600;
  else return theme.colorScheme.outline;
}

IconData _getBalanceIcon(double balance) {
  if (balance > 0) return Icons.trending_up;
  else if (balance < 0) return Icons.trending_down;
  else return Icons.trending_flat;
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –£–∂–µ –µ—Å—Ç—å `balance_utils.dart` —Å –ø–æ–¥–æ–±–Ω–æ–π –ª–æ–≥–∏–∫–æ–π!

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `balance_utils.dart` –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –º–µ—Ç–æ–¥—ã.

---

#### 4. **–¢–∞–±–ª–∏—Ü—ã –ø—Ä–µ–º–∏–π –∏ —à—Ç—Ä–∞—Ñ–æ–≤ (95% –∏–¥–µ–Ω—Ç–∏—á–Ω—ã)**

**–§–∞–π–ª—ã:**
- `payroll_bonus_table_widget.dart` (280 —Å—Ç—Ä–æ–∫)
- `payroll_penalty_table_widget.dart` (286 —Å—Ç—Ä–æ–∫)

**–†–∞–∑–ª–∏—á–∏—è —Ç–æ–ª—å–∫–æ –≤:**
- –ü—Ä–æ–≤–∞–π–¥–µ—Ä–µ: `filteredBonusesProvider` vs `filteredPenaltiesProvider`
- Use case: `deleteBonusUseCaseProvider` vs `deletePenaltyUseCaseProvider`
- –¢–µ–∫—Å—Ç–µ: "–£–¥–∞–ª–∏—Ç—å –ø—Ä–µ–º–∏—é?" vs "–£–¥–∞–ª–∏—Ç—å —à—Ç—Ä–∞—Ñ?"
- –¢–∏–ø–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: `PayrollTransactionType.bonus` vs `PayrollTransactionType.penalty`

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –≤–∏–¥–∂–µ—Ç:

```dart
class PayrollTransactionTableWidget extends ConsumerWidget {
  final PayrollTransactionType type;
  
  const PayrollTransactionTableWidget({
    required this.type,
  });
  
  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final transactions = type == PayrollTransactionType.bonus
        ? ref.watch(filteredBonusesProvider)
        : ref.watch(filteredPenaltiesProvider);
    // ...
  }
}
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~280 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞, —É–ø—Ä–æ—â–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏.

---

### üü° –°—Ä–µ–¥–Ω–∏–µ –¥—É–±–ª–∏

#### 5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã (3 —Ä–∞–∑–∞)**

```dart
Future<void> _pickDate() async {
  final now = DateTime.now();
  final picked = await showDatePicker(
    context: context,
    initialDate: _selectedDate ?? now,
    firstDate: DateTime(now.year - 2),
    lastDate: DateTime(now.year + 2),
    locale: const Locale('ru'),
  );
  if (picked != null) {
    setState(() => _selectedDate = picked);
  }
}
```

**–†–µ—à–µ–Ω–∏–µ:** –í—ã–Ω–µ—Å—Ç–∏ –≤ —É—Ç–∏–ª–∏—Ç—É:

```dart
class DatePickerUtils {
  static Future<DateTime?> pickDate(
    BuildContext context,
    DateTime? initialDate,
  ) async { ... }
}
```

---

#### 6. **–ö–Ω–æ–ø–∫–∏ "–û—Ç–º–µ–Ω–∞" –∏ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" (3 —Ä–∞–∑–∞)**

```dart
Row(
  children: [
    Expanded(
      child: OutlinedButton(
        onPressed: () => Navigator.pop(context),
        style: OutlinedButton.styleFrom(
          minimumSize: const Size.fromHeight(44),
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(12),
          ),
        ),
        child: const Text('–û—Ç–º–µ–Ω–∞'),
      ),
    ),
    const SizedBox(width: 16),
    Expanded(
      child: ElevatedButton(...),
    ),
  ],
)
```

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å `ModalActionButtons` –≤–∏–¥–∂–µ—Ç:

```dart
class ModalActionButtons extends StatelessWidget {
  final VoidCallback onCancel;
  final VoidCallback onConfirm;
  final bool isLoading;
  final String confirmText;
  
  const ModalActionButtons({
    required this.onCancel,
    required this.onConfirm,
    this.isLoading = false,
    this.confirmText = '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å',
  });
  
  @override
  Widget build(BuildContext context) { ... }
}
```

---

### üü¢ –ù–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –¥—É–±–ª–∏

#### 7. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (–º–Ω–æ–≥–æ —Ä–∞–∑)**

```dart
final fio = [
  employee.lastName,
  employee.firstName,
  if (employee.middleName != null && employee.middleName!.isNotEmpty)
    employee.middleName!
].join(' ');
```

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –≥–µ—Ç—Ç–µ—Ä –≤ –º–æ–¥–µ–ª—å `Employee`:

```dart
extension EmployeeExtension on Employee {
  String get fullName => [
    lastName,
    firstName,
    if (middleName != null && middleName!.isNotEmpty) middleName!
  ].join(' ');
}
```

---

## üêõ –ê—É–¥–∏—Ç: –ú—ë—Ä—Ç–≤—ã–π –∫–æ–¥

### ‚ùå –ú—ë—Ä—Ç–≤—ã–π –∫–æ–¥ –Ω–∞–π–¥–µ–Ω

#### 1. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã**

**`payroll_table_widget.dart`:**
```dart
import 'package:intl/intl.dart';  // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è DateFormat
```

**`payroll_transaction_form_modal.dart`:**
```dart
import 'package:uuid/uuid.dart';  // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è uuid.v4()
```

**`payroll_payout_form_modal.dart`:**
```dart
import 'package:dropdown_textfield/dropdown_textfield.dart';  // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
```

**–í—ã–≤–æ–¥:** –ú—ë—Ä—Ç–≤—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ‚úÖ

---

#### 2. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**

**`payroll_payout_amount_modal.dart`:**
```dart
const PayrollPayoutAmountModal({
  super.key,
  required this.selectedEmployees,
  required this.payoutDate,
  required this.method,
  required this.type,
  required this.comment,  // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –ø–∞–Ω–µ–ª–∏
});
```

**–í—ã–≤–æ–¥:** –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è ‚úÖ

---

#### 3. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫–∞–∑–∞–ª–∞:**
- –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- –ù–µ—Ç –ª–∏—à–Ω–∏—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
- –í—Å–µ `ValueNotifier` –ø–æ–¥–ø–∏—Å–∞–Ω—ã

**–í—ã–≤–æ–¥:** –ú—ë—Ä—Ç–≤—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ‚úÖ

---

#### 4. **–ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥**

**–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞:** –ù–µ –Ω–∞–π–¥–µ–Ω–æ ‚úÖ

---

## ‚ö†Ô∏è –ê—É–¥–∏—Ç: –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ mounted –ø–æ—Å–ª–µ async**

**–ü—Ä–æ–±–ª–µ–º–∞ –≤ `payroll_transaction_form_modal.dart`:**

```dart
Future<void> _saveTransaction() async {
  // ...
  try {
    // await –æ–ø–µ—Ä–∞—Ü–∏–∏...
    
    if (mounted) {  // ‚úÖ –ï—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞
      Navigator.pop(context);
      _invalidateProviders();
      SnackBarUtils.showSuccess(context, '...');
    }
  } catch (e) {
    if (mounted) {  // ‚úÖ –ï—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞
      SnackBarUtils.showError(context, '–û—à–∏–±–∫–∞: ${e.toString()}');
    }
  } finally {
    if (mounted) setState(() => _isSaving = false);  // ‚úÖ –ï—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞
  }
}
```

**–í—ã–≤–æ–¥:** –ü—Ä–æ–±–ª–µ–º –Ω–µ—Ç, –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `mounted` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç ‚úÖ

---

#### 2. **Dispose –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤**

**–ü—Ä–æ–≤–µ—Ä–∫–∞ `payroll_payout_form_modal.dart`:**

```dart
@override
void dispose() {
  _commentController.dispose();      // ‚úÖ
  _amountController.dispose();       // ‚úÖ
  _singleEmployeeController.dispose(); // ‚úÖ
  _multiEmployeeController.dispose();  // ‚úÖ
  _methodController.dispose();       // ‚úÖ
  _typeController.dispose();         // ‚úÖ
  _isSaving.dispose();               // ‚úÖ
  super.dispose();
}
```

**–í—ã–≤–æ–¥:** –í—Å–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è ‚úÖ

---

### üü° –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å —É–ª—É—á—à–µ–Ω–∞**

**`payroll_transaction_form_modal.dart` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—É–º–º—ã:**

```dart
validator: (value) {
  if (value == null || value.isEmpty) return '–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É';
  final num? n = num.tryParse(value.replaceAll(',', '.'));
  if (n == null || n <= 0) return '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—É–º–º–∞';
  return null;
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

```dart
validator: (value) {
  if (value == null || value.isEmpty) return '–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É';
  final num? n = num.tryParse(value.replaceAll(',', '.'));
  if (n == null || n <= 0) return '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—É–º–º–∞';
  if (n > 10000000) return '–°—É–º–º–∞ —Å–ª–∏—à–∫–æ–º –≤–µ–ª–∏–∫–∞';  // –î–æ–±–∞–≤–∏—Ç—å –ª–∏–º–∏—Ç
  return null;
}
```

---

#### 4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ —É–¥–∞–ª–µ–Ω–∏—è**

**`payroll_bonus_table_widget.dart`:**

```dart
onPressed: () async {
  Navigator.of(ctx).pop();
  final deleteBonus = ref.read(deleteBonusUseCaseProvider);
  await deleteBonus(bonus.id);  // ‚ùå –ù–µ—Ç try-catch
  ref.invalidate(allBonusesProvider);
  ref.invalidate(employeeAggregatedBalanceProvider);
  if (context.mounted) {
    SnackBarUtils.showSuccess(context, '–ü—Ä–µ–º–∏—è —É–¥–∞–ª–µ–Ω–∞');
  }
}
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**

```dart
onPressed: () async {
  Navigator.of(ctx).pop();
  try {
    final deleteBonus = ref.read(deleteBonusUseCaseProvider);
    await deleteBonus(bonus.id);
    ref.invalidate(allBonusesProvider);
    ref.invalidate(employeeAggregatedBalanceProvider);
    if (context.mounted) {
      SnackBarUtils.showSuccess(context, '–ü—Ä–µ–º–∏—è —É–¥–∞–ª–µ–Ω–∞');
    }
  } catch (e) {
    if (context.mounted) {
      SnackBarUtils.showError(context, '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è: $e');
    }
  }
}
```

---

### üü¢ –ù–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 5. **–•–∞—Ä–¥–∫–æ–¥ magic numbers**

```dart
maxWidth: screenWidth * 0.5,  // –•–∞—Ä–¥–∫–æ–¥
blurRadius: 24,                // –•–∞—Ä–¥–∫–æ–¥
alpha: 0.18,                   // –•–∞—Ä–¥–∫–æ–¥
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í—ã–Ω–µ—Å—Ç–∏ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã.

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### 1. **–°–æ–∑–¥–∞—Ç—å —É—Ç–∏–ª–∏—Ç–Ω—ã–π –∫–ª–∞—Å—Å PayoutUtils**

**–§–∞–π–ª:** `lib/features/fot/presentation/utils/payout_utils.dart`

```dart
/// –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤—ã–ø–ª–∞—Ç–∞–º–∏ –≤ –º–æ–¥—É–ª–µ –§–û–¢.
class PayoutUtils {
  /// –ü–æ–ª—É—á–∞–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–ø–æ—Å–æ–±–∞ –≤—ã–ø–ª–∞—Ç—ã.
  static String getMethodDisplayName(String method) {
    switch (method) {
      case 'card':
        return '–ö–∞—Ä—Ç–∞';
      case 'cash':
        return '–ù–∞–ª–∏—á–Ω—ã–µ';
      case 'bank_transfer':
        return '–ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥';
      default:
        return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
    }
  }

  /// –ü–æ–ª—É—á–∞–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ –≤—ã–ø–ª–∞—Ç—ã.
  static String getTypeDisplayName(String type) {
    switch (type) {
      case 'salary':
        return '–ó–∞—Ä–ø–ª–∞—Ç–∞';
      case 'advance':
        return '–ê–≤–∞–Ω—Å';
      default:
        return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
    }
  }
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```dart
// –í payroll_payout_form_modal.dart
String _getMethodDisplayName(String method) =>
    PayoutUtils.getMethodDisplayName(method);

// –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:
Text(PayoutUtils.getMethodDisplayName(widget.method))
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~30 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞, —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è.

---

#### 2. **–û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–µ–º–∏–π –∏ —à—Ç—Ä–∞—Ñ–æ–≤**

**–°–æ–∑–¥–∞—Ç—å:** `lib/features/fot/presentation/widgets/payroll_transaction_table_widget.dart`

```dart
/// –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –§–û–¢ (–ø—Ä–µ–º–∏–π –∏ —à—Ç—Ä–∞—Ñ–æ–≤).
class PayrollTransactionTableWidget extends ConsumerWidget {
  /// –¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–ø—Ä–µ–º–∏—è –∏–ª–∏ —à—Ç—Ä–∞—Ñ).
  final PayrollTransactionType type;

  const PayrollTransactionTableWidget({
    super.key,
    required this.type,
  });

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final theme = Theme.of(context);
    final employeeState = ref.watch(employeeProvider);
    final objectState = ref.watch(objectProvider);
    final employees = employeeState.employees;
    final objects = objectState.objects;

    // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
    final transactions = type == PayrollTransactionType.bonus
        ? ref.watch(filteredBonusesProvider)
        : ref.watch(filteredPenaltiesProvider);

    return transactions.when(
      data: (data) => _buildTable(context, theme, data, employees, objects),
      loading: () => const Center(child: CircularProgressIndicator()),
      error: (e, st) => Center(child: Text('–û—à–∏–±–∫–∞: $e')),
    );
  }

  Widget _buildTable(
    BuildContext context,
    ThemeData theme,
    List<dynamic> transactions,
    List<dynamic> employees,
    List<dynamic> objects,
  ) {
    // –û–±—â–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã
    return DataTable(
      columns: [
        const DataColumn(label: Text('–°–æ—Ç—Ä—É–¥–Ω–∏–∫')),
        const DataColumn(label: Text('–û–±—ä–µ–∫—Ç')),
        const DataColumn(label: Text('–°—É–º–º–∞'), numeric: true),
        const DataColumn(label: Text('–î–∞—Ç–∞')),
        const DataColumn(label: Text('–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ')),
        const DataColumn(label: Text('')),
      ],
      rows: [
        for (int i = 0; i < transactions.length; i++)
          _buildDataRow(context, transactions[i], employees, objects, i),
      ],
    );
  }

  DataRow _buildDataRow(
    BuildContext context,
    dynamic transaction,
    List<dynamic> employees,
    List<dynamic> objects,
    int index,
  ) {
    // –õ–æ–≥–∏–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å—Ç—Ä–æ–∫–∏
    // ...
  }

  String get _deleteDialogTitle => type == PayrollTransactionType.bonus
      ? '–£–¥–∞–ª–∏—Ç—å –ø—Ä–µ–º–∏—é?'
      : '–£–¥–∞–ª–∏—Ç—å —à—Ç—Ä–∞—Ñ?';

  String get _deleteSuccessMessage => type == PayrollTransactionType.bonus
      ? '–ü—Ä–µ–º–∏—è —É–¥–∞–ª–µ–Ω–∞'
      : '–®—Ç—Ä–∞—Ñ —É–¥–∞–ª—ë–Ω';
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```dart
// –í–º–µ—Å—Ç–æ PayrollBonusTableWidget
PayrollTransactionTableWidget(type: PayrollTransactionType.bonus)

// –í–º–µ—Å—Ç–æ PayrollPenaltyTableWidget
PayrollTransactionTableWidget(type: PayrollTransactionType.penalty)
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~280 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞, –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–∞–≤–∫–∏.

---

#### 3. **–°–æ–∑–¥–∞—Ç—å ModalContainerWrapper**

**–§–∞–π–ª:** `lib/core/widgets/modal_container_wrapper.dart`

```dart
/// –û–±—ë—Ä—Ç–∫–∞ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω —Å –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–π —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–µ–π.
///
/// –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Ç–µ–Ω—å—é, —Å–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–º–∏ —É–≥–ª–∞–º–∏ –∏
/// –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –¥–ª—è desktop –∏ mobile.
class ModalContainerWrapper extends StatelessWidget {
  /// –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞.
  final Widget child;

  /// –°–æ–∑–¥–∞—ë—Ç –æ–±—ë—Ä—Ç–∫—É –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞.
  const ModalContainerWrapper({
    super.key,
    required this.child,
  });

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context);
    final isDesktop = MediaQuery.of(context).size.width >= 900;
    final screenWidth = MediaQuery.of(context).size.width;

    final modalContent = Container(
      margin: isDesktop
          ? const EdgeInsets.only(top: 48)
          : EdgeInsets.only(
              top: kToolbarHeight + MediaQuery.of(context).padding.top,
            ),
      clipBehavior: Clip.antiAlias,
      decoration: BoxDecoration(
        color: theme.colorScheme.surface,
        borderRadius: const BorderRadius.vertical(top: Radius.circular(32)),
        boxShadow: [
          BoxShadow(
            color: Colors.black.withValues(alpha: 0.18),
            blurRadius: 24,
            offset: const Offset(0, -8),
          ),
        ],
        border: Border.all(
          color: theme.colorScheme.outline.withValues(alpha: 0.12),
          width: 1.5,
        ),
      ),
      child: child,
    );

    if (isDesktop) {
      return Align(
        alignment: Alignment.topCenter,
        child: ConstrainedBox(
          constraints: BoxConstraints(maxWidth: screenWidth * 0.5),
          child: modalContent,
        ),
      );
    } else {
      return modalContent;
    }
  }
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```dart
@override
Widget build(BuildContext context) {
  return ModalContainerWrapper(
    child: DraggableScrollableSheet(
      initialChildSize: 1.0,
      minChildSize: 0.5,
      maxChildSize: 1.0,
      expand: false,
      builder: (context, scrollController) => SingleChildScrollView(
        controller: scrollController,
        child: Padding(
          padding: EdgeInsets.only(
            bottom: MediaQuery.of(context).viewInsets.bottom,
          ),
          child: Padding(
            padding: const EdgeInsets.all(24.0),
            child: Form(...),
          ),
        ),
      ),
    ),
  );
}
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~60 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ √ó 3 —Ñ–∞–π–ª–∞ = ~180 —Å—Ç—Ä–æ–∫.

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –°—Ä–µ–¥–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

#### 4. **–î–æ–±–∞–≤–∏—Ç—å try-catch –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è**

**–í —Ñ–∞–π–ª–∞—Ö:**
- `payroll_bonus_table_widget.dart`
- `payroll_penalty_table_widget.dart`
- `payroll_payout_table_widget.dart`

**–î–æ–±–∞–≤–∏—Ç—å –æ–±—ë—Ä—Ç–∫—É:**

```dart
try {
  final deleteUseCase = ref.read(...);
  await deleteUseCase(id);
  ref.invalidate(...);
  if (context.mounted) {
    SnackBarUtils.showSuccess(context, '–£–¥–∞–ª–µ–Ω–æ');
  }
} catch (e) {
  if (context.mounted) {
    SnackBarUtils.showError(context, '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è: $e');
  }
}
```

---

#### 5. **–°–æ–∑–¥–∞—Ç—å DatePickerUtils**

**–§–∞–π–ª:** `lib/core/utils/date_picker_utils.dart`

```dart
class DatePickerUtils {
  static Future<DateTime?> pickDate(
    BuildContext context, {
    DateTime? initialDate,
    int yearsBack = 2,
    int yearsForward = 2,
  }) async {
    final now = DateTime.now();
    return await showDatePicker(
      context: context,
      initialDate: initialDate ?? now,
      firstDate: DateTime(now.year - yearsBack),
      lastDate: DateTime(now.year + yearsForward),
      locale: const Locale('ru'),
    );
  }
}
```

---

#### 6. **–°–æ–∑–¥–∞—Ç—å ModalActionButtons**

**–§–∞–π–ª:** `lib/core/widgets/modal_action_buttons.dart`

```dart
class ModalActionButtons extends StatelessWidget {
  final VoidCallback onCancel;
  final VoidCallback onConfirm;
  final bool isLoading;
  final String confirmText;
  final String cancelText;

  const ModalActionButtons({
    super.key,
    required this.onCancel,
    required this.onConfirm,
    this.isLoading = false,
    this.confirmText = '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å',
    this.cancelText = '–û—Ç–º–µ–Ω–∞',
  });

  @override
  Widget build(BuildContext context) {
    return Row(
      children: [
        Expanded(
          child: OutlinedButton(
            onPressed: onCancel,
            style: OutlinedButton.styleFrom(
              minimumSize: const Size.fromHeight(44),
              shape: RoundedRectangleBorder(
                borderRadius: BorderRadius.circular(12),
              ),
              textStyle: const TextStyle(
                fontSize: 16,
                fontWeight: FontWeight.bold,
              ),
            ),
            child: Text(cancelText),
          ),
        ),
        const SizedBox(width: 16),
        Expanded(
          child: ElevatedButton(
            onPressed: isLoading ? null : onConfirm,
            style: ElevatedButton.styleFrom(
              minimumSize: const Size.fromHeight(44),
              shape: RoundedRectangleBorder(
                borderRadius: BorderRadius.circular(12),
              ),
              textStyle: const TextStyle(
                fontSize: 16,
                fontWeight: FontWeight.bold,
              ),
            ),
            child: isLoading
                ? const SizedBox(
                    height: 20,
                    width: 20,
                    child: CupertinoActivityIndicator(),
                  )
                : Text(confirmText),
          ),
        ),
      ],
    );
  }
}
```

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ù–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### 7. **–í—ã–Ω–µ—Å—Ç–∏ magic numbers –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã**

**–°–æ–∑–¥–∞—Ç—å:** `lib/features/fot/presentation/widgets/modal_constants.dart`

```dart
class ModalConstants {
  static const double desktopMaxWidthFactor = 0.5;
  static const double shadowBlurRadius = 24.0;
  static const double shadowAlpha = 0.18;
  static const double borderAlpha = 0.12;
  static const double borderWidth = 1.5;
  static const double borderRadius = 32.0;
  static const EdgeInsets desktopMargin = EdgeInsets.only(top: 48);
  static const double horizontalPadding = 24.0;
  static const double verticalPadding = 24.0;
}
```

---

### –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —É–ª—É—á—à–µ–Ω–∏–π

| # | –£–ª—É—á—à–µ–Ω–∏–µ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –≠–∫–æ–Ω–æ–º–∏—è —Å—Ç—Ä–æ–∫ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –í—Ä–µ–º—è |
|---|-----------|-----------|----------------|-----------|-------|
| 1 | PayoutUtils | üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–π | ~30 | –ù–∏–∑–∫–∞—è | 15 –º–∏–Ω |
| 2 | –û–±—ä–µ–¥–∏–Ω–∏—Ç—å Bonus/Penalty —Ç–∞–±–ª–∏—Ü—ã | üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–π | ~280 | –°—Ä–µ–¥–Ω—è—è | 1 —á–∞—Å |
| 3 | ModalContainerWrapper | üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–π | ~180 | –ù–∏–∑–∫–∞—è | 30 –º–∏–Ω |
| 4 | –î–æ–±–∞–≤–∏—Ç—å try-catch | üü° –°—Ä–µ–¥–Ω–∏–π | ~30 | –ù–∏–∑–∫–∞—è | 20 –º–∏–Ω |
| 5 | DatePickerUtils | üü° –°—Ä–µ–¥–Ω–∏–π | ~20 | –ù–∏–∑–∫–∞—è | 15 –º–∏–Ω |
| 6 | ModalActionButtons | üü° –°—Ä–µ–¥–Ω–∏–π | ~60 | –ù–∏–∑–∫–∞—è | 20 –º–∏–Ω |
| 7 | –í—ã–Ω–µ—Å—Ç–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã | üü¢ –ù–∏–∑–∫–∏–π | ~0 | –ù–∏–∑–∫–∞—è | 10 –º–∏–Ω |

**–ò—Ç–æ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è:** ~600 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞  
**–û–±—â–µ–µ –≤—Ä–µ–º—è –Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥:** ~3 —á–∞—Å–∞

---

## ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–µ–π (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ)

**–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 5 –æ–∫—Ç—è–±—Ä—è 2025 –≥–æ–¥–∞  
**–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:** ~1 —á–∞—Å  

### üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### 1. ‚úÖ –°–æ–∑–¥–∞–Ω PayoutUtils

**–§–∞–π–ª:** `lib/features/fot/presentation/utils/payout_utils.dart`

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- `getMethodDisplayName(String method)` ‚Äî –µ–¥–∏–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å–ø–æ—Å–æ–±–æ–≤ –≤—ã–ø–ª–∞—Ç
- `getTypeDisplayName(String type)` ‚Äî –µ–¥–∏–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤ –≤—ã–ø–ª–∞—Ç

**–î–æ:**
```dart
// –î—É–±–ª–∏—Ä–æ–≤–∞–ª–æ—Å—å –≤ 2 —Ñ–∞–π–ª–∞—Ö
String _getMethodDisplayName(String method) {
  switch (method) {
    case 'card': return '–ö–∞—Ä—Ç–∞';
    case 'cash': return '–ù–∞–ª–∏—á–Ω—ã–µ';
    case 'bank_transfer': return '–ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥';
    default: return '–ù–∞–ª–∏—á–Ω—ã–µ';
  }
}
```

**–ü–æ—Å–ª–µ:**
```dart
// –û–¥–∏–Ω —Ä–∞–∑ –≤ utils/payout_utils.dart
static String getMethodDisplayName(String method) {
  switch (method) {
    case 'card': return '–ö–∞—Ä—Ç–∞';
    case 'cash': return '–ù–∞–ª–∏—á–Ω—ã–µ';
    case 'bank_transfer': return '–ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥';
    default: return '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–ø–æ—Å–æ–±';
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª–∞—Ö
String _getMethodDisplayName(String method) =>
    PayoutUtils.getMethodDisplayName(method);
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~30 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

---

#### 2. ‚úÖ –°–æ–∑–¥–∞–Ω ModalContainerWrapper

**–§–∞–π–ª:** `lib/core/widgets/modal_container_wrapper.dart`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω —Å:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π –¥–ª—è desktop/mobile
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–µ–π (—Ç–µ–Ω—å, –≥—Ä–∞–Ω–∏—Ü—ã, —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è)
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º

**–î–æ:**
```dart
// –î—É–±–ª–∏—Ä–æ–≤–∞–ª–æ—Å—å –≤ 3 —Ñ–∞–π–ª–∞—Ö (~60 —Å—Ç—Ä–æ–∫ √ó 3 = 180 —Å—Ç—Ä–æ–∫)
final modalContent = Container(
  margin: isDesktop
      ? const EdgeInsets.only(top: 48)
      : EdgeInsets.only(
          top: kToolbarHeight + MediaQuery.of(context).padding.top),
  clipBehavior: Clip.antiAlias,
  decoration: BoxDecoration(
    color: theme.colorScheme.surface,
    borderRadius: const BorderRadius.vertical(top: Radius.circular(32)),
    boxShadow: [...],
    border: Border.all(...),
  ),
  child: DraggableScrollableSheet(...),
);

if (isDesktop) {
  return Align(
    alignment: Alignment.topCenter,
    child: ConstrainedBox(
      constraints: BoxConstraints(maxWidth: screenWidth * 0.5),
      child: modalContent,
    ),
  );
} else {
  return modalContent;
}
```

**–ü–æ—Å–ª–µ:**
```dart
// –û–¥–∏–Ω —Ä–∞–∑ –≤ core/widgets/modal_container_wrapper.dart
return ModalContainerWrapper(
  child: DraggableScrollableSheet(...),
);
```

**–≠–∫–æ–Ω–æ–º–∏—è:** ~180 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

---

#### 3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –º–æ–¥–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã

**–§–∞–π–ª—ã:**
1. `payroll_transaction_form_modal.dart`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ModalContainerWrapper`
   
2. `payroll_payout_form_modal.dart`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `PayoutUtils` –¥–ª—è –º–µ—Ç–æ–¥–æ–≤ `_getMethodDisplayName()` –∏ `_getTypeDisplayName()`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ModalContainerWrapper`
   
3. `payroll_payout_amount_modal.dart`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `PayoutUtils` –¥–ª—è –º–µ—Ç–æ–¥–æ–≤ `_getMethodDisplayName()` –∏ `_getTypeDisplayName()`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ModalContainerWrapper`

**–ò–º–ø–æ—Ä—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã:**
```dart
import '../../../../core/widgets/modal_container_wrapper.dart';
import '../utils/payout_utils.dart';
```

---

#### 4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —É–¥–∞–ª–µ–Ω–∏—è

**–§–∞–π–ª—ã:**
1. `payroll_bonus_table_widget.dart`
2. `payroll_penalty_table_widget.dart`

**–î–æ:**
```dart
onPressed: () async {
  Navigator.of(ctx).pop();
  final deleteBonus = ref.read(deleteBonusUseCaseProvider);
  await deleteBonus(bonus.id);
  // ... invalidate providers
  if (context.mounted) {
    SnackBarUtils.showSuccess(context, '–ü—Ä–µ–º–∏—è —É–¥–∞–ª–µ–Ω–∞');
  }
}
```

**–ü–æ—Å–ª–µ:**
```dart
onPressed: () async {
  Navigator.of(ctx).pop();
  try {
    final deleteBonus = ref.read(deleteBonusUseCaseProvider);
    await deleteBonus(bonus.id);
    // ... invalidate providers
    if (context.mounted) {
      SnackBarUtils.showSuccess(context, '–ü—Ä–µ–º–∏—è —É–¥–∞–ª–µ–Ω–∞');
    }
  } catch (e) {
    if (context.mounted) {
      SnackBarUtils.showError(context, '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è: $e');
    }
  }
}
```

**–£–ª—É—á—à–µ–Ω–∏–µ:** –¢–µ–ø–µ—Ä—å –æ—à–∏–±–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

### üìä –°–≤–æ–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç

| # | –£–ª—É—á—à–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª—ã | –≠–∫–æ–Ω–æ–º–∏—è —Å—Ç—Ä–æ–∫ |
|---|-----------|--------|-------|----------------|
| 1 | PayoutUtils | ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ | 1 —Å–æ–∑–¥–∞–Ω, 2 –æ–±–Ω–æ–≤–ª–µ–Ω–æ | ~30 |
| 2 | ModalContainerWrapper | ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ | 1 —Å–æ–∑–¥–∞–Ω, 3 –æ–±–Ω–æ–≤–ª–µ–Ω–æ | ~180 |
| 3 | Try-catch –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è | ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ | 2 –æ–±–Ω–æ–≤–ª–µ–Ω–æ | ~0 (–∫–∞—á–µ—Å—Ç–≤–æ) |

**–ò—Ç–æ–≥–æ:**
- **–°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤:** 2
- **–û–±–Ω–æ–≤–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤:** 5
- **–≠–∫–æ–Ω–æ–º–∏—è –∫–æ–¥–∞:** ~210 —Å—Ç—Ä–æ–∫
- **–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:** ~1 —á–∞—Å

---

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

#### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –≤ 2 —Ñ–∞–π–ª–∞—Ö
- ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–∫–æ—Ä–∞—Ü–∏–∏ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –≤ 3 —Ñ–∞–π–ª–∞—Ö
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ —É–¥–∞–ª–µ–Ω–∏—è
- ‚ùå –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (–∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ 3+ –º–µ—Å—Ç–∞—Ö)

#### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–∞–≤–∫–∏ –¥–ª—è –º–µ—Ç–æ–¥–æ–≤ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —É–¥–∞–ª–µ–Ω–∏—è —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- ‚úÖ –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (–∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ 1 –º–µ—Å—Ç–µ)

---

### üìã –û—Å—Ç–∞–≤—à–∏–µ—Å—è —É–ª—É—á—à–µ–Ω–∏—è (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É)

#### üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

5. **DatePickerUtils** ‚Äî –µ–¥–∏–Ω—ã–π –º–µ—Ç–æ–¥ –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã (~20 —Å—Ç—Ä–æ–∫)
6. **ModalActionButtons** ‚Äî –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–Ω–æ–ø–∫–∏ (~60 —Å—Ç—Ä–æ–∫)

#### üü¢ –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

7. **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è magic numbers** (~0 —Å—Ç—Ä–æ–∫, –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞)

#### üî¥ –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—Å–ª–æ–∂–Ω–∞—è –∑–∞–¥–∞—á–∞):

8. **PayrollTransactionTableWidget** ‚Äî –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–µ–º–∏–π/—à—Ç—Ä–∞—Ñ–æ–≤ (~280 —Å—Ç—Ä–æ–∫)
   - –¢—Ä–µ–±—É–µ—Ç —Ç—â–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
   - –í—Ä–µ–º—è: ~1-2 —á–∞—Å–∞

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

#### 1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–ª–æ–Ω–∫–∏**

**–®–∞–≥–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å –≤ `_buildAdaptiveColumns()` –≤ `PayrollTableWidget`
2. –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥ –≤ `PayrollTableCellBuilder`
3. –î–æ–±–∞–≤–∏—Ç—å –≤ `_buildDesktopCells()`, `_buildTabletCells()`, `_buildMobileCells()`
4. –û–±–Ω–æ–≤–∏—Ç—å `PayrollTotals` –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
5. –û–±–Ω–æ–≤–∏—Ç—å –∏—Ç–æ–≥–æ–≤—É—é —Å—Ç—Ä–æ–∫—É

**–ü—Ä–∏–º–µ—Ä: –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É "–ù–î–§–õ"**

```dart
// 1. –í _buildAdaptiveColumns()
if (isDesktop) {
  columns.addAll([
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
    const DataColumn(label: Text('–ù–î–§–õ'), numeric: true),
  ]);
}

// 2. –í PayrollTableCellBuilder
static DataCell buildTaxCell(double tax, ThemeData theme) {
  return DataCell(
    Text(
      _numberFormat.format(tax),
      style: theme.textTheme.bodyMedium?.copyWith(
        color: Colors.orange.shade600,
        fontWeight: FontWeight.w500,
      ),
    ),
  );
}

// 3. –í _buildDesktopCells()
return [
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
  PayrollTableCellBuilder.buildTaxCell(payroll.tax, theme),
];

// 4. –í PayrollTotals
class PayrollTotals {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
  double tax = 0;
}

// 5. –í _updateTotals()
totals.tax += payroll.tax;

// 6. –í _buildDesktopTotalCells()
return [
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
  PayrollTableCellBuilder.buildCurrencyCell(totals.tax, 
      fontWeight: FontWeight.bold),
];
```

#### 2. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ —ç–ª–µ–º–µ–Ω—Ç–∞**

```dart
// –í PayrollTableConstants
static const Color myColor = Color(0xFFRRGGBB);
```

#### 3. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ breakpoints**

```dart
// –í ResponsiveUtils
static bool isMobile(BuildContext context) {
  return MediaQuery.of(context).size.width < 500;  // –ë—ã–ª–æ 600
}
```

#### 4. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã**

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `payroll_my_table_widget.dart`
2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ `payroll_bonus_table_widget.dart`
3. –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∏ –º–æ–¥–µ–ª–∏
4. –î–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é (tabs)

### –î–ª—è –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤

#### 1. **–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞**

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–∑ `PayrollTableConstants`:
- –ó–µ–ª—ë–Ω—ã–π (#2E7D32) ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–µ–º–∏–π –∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞
- –ö—Ä–∞—Å–Ω—ã–π (#C62828) ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è —à—Ç—Ä–∞—Ñ–æ–≤ –∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞
- –°–∏–Ω–∏–π (#1565C0) ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –≤—ã–ø–ª–∞—Ç
- –ß—ë—Ä–Ω—ã–π (–∂–∏—Ä–Ω—ã–π) ‚Äî –¥–ª—è –∏—Ç–æ–≥–æ–≤—ã—Ö —Å—É–º–º

#### 2. **–û—Ç—Å—Ç—É–ø—ã**

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
- Mobile: –º–µ–Ω—å—à–µ (6-12px)
- Tablet: —Å—Ä–µ–¥–Ω–∏–µ (8-16px)
- Desktop: –±–æ–ª—å—à–µ (12-24px)

#### 3. **–í—ã—Å–æ—Ç–∞ —Å—Ç—Ä–æ–∫**

- **–ó–∞–≥–æ–ª–æ–≤–æ–∫:** 48px
- **–°—Ç—Ä–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö:** 52px (min –∏ max –æ–¥–∏–Ω–∞–∫–æ–≤—ã –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è)

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 1. **Unit-—Ç–µ—Å—Ç—ã –¥–ª—è —Å—Ç—Ä–æ–∏—Ç–µ–ª–µ–π**

```dart
test('buildCurrencyCell —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å—É–º–º—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ', () {
  final cell = PayrollTableCellBuilder.buildCurrencyCell(1234.56);
  
  expect(cell, isA<DataCell>());
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...
});
```

#### 2. **Widget-—Ç–µ—Å—Ç—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü**

```dart
testWidgets('PayrollTableWidget –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ', (tester) async {
  await tester.pumpWidget(
    ProviderScope(
      overrides: [
        // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
        employeeProvider.overrideWith(...),
      ],
      child: MaterialApp(
        home: PayrollTableWidget(payrolls: mockPayrolls),
      ),
    ),
  );
  
  expect(find.text('–§–û–¢'), findsOneWidget);
  // ...
});
```

#### 3. **Integration-—Ç–µ—Å—Ç—ã**

```dart
testWidgets('–£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–º–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', (tester) async {
  // ... setup
  
  await tester.tap(find.byIcon(Icons.more_vert));
  await tester.pumpAndSettle();
  
  await tester.tap(find.text('–£–¥–∞–ª–∏—Ç—å'));
  await tester.pumpAndSettle();
  
  await tester.tap(find.text('–£–¥–∞–ª–∏—Ç—å')); // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
  await tester.pumpAndSettle();
  
  expect(find.text('–ü—Ä–µ–º–∏—è —É–¥–∞–ª–µ–Ω–∞'), findsOneWidget);
});
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **–§–∞–π–ª–æ–≤** | 6 |
| **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞** | ~2058 |
| **–¢–∏–ø–æ–≤ —è—á–µ–µ–∫** | 10 |
| **–¢–∞–±–ª–∏—Ü** | 4 (–§–û–¢, –ø—Ä–µ–º–∏–∏, —à—Ç—Ä–∞—Ñ—ã, –≤—ã–ø–ª–∞—Ç—ã) |
| **Breakpoints** | 3 (mobile, tablet, desktop) |
| **–ü—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤** | 7+ |
| **ScrollControllers** | 2 (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π, –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π) |
| **–ö–æ–ª–æ–Ω–æ–∫ (max)** | 10 (–≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ –Ω–∞ desktop) |
| **–¶–≤–µ—Ç–æ–≤—ã—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç** | 4 |
| **–§–æ—Ä–º–∞—Ç—Ç–µ—Ä–æ–≤** | 2 (currency, date) |

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü

- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è desktop/tablet/mobile
- [ ] –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `PayrollTableCellBuilder` –¥–ª—è —è—á–µ–µ–∫
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –ø—É—Å—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ `LayoutBuilder`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –¥–≤–æ–π–Ω–æ–π —Å–∫—Ä–æ–ª–ª–∏–Ω–≥ (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π + –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π)
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `const` –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ)
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `CupertinoAlertDialog` –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å `SnackBar` –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö (mobile/tablet/desktop)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å–∫—Ä–æ–ª–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 60 FPS)
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

## üéØ –ò—Ç–æ–≥–∏

### –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

‚úÖ **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –∫–æ–ª–æ–Ω–∫–∏  
‚úÖ **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:** –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö  
‚úÖ **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** CellBuilder –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ  
‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä, –º–∏–Ω–∏–º—É–º –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–æ–∫  
‚úÖ **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ:** –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü  
‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å:** –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å  
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å:** –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ  

### –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

üîÑ **Pagination:** –ù–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤ (>100 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤)  
üîÑ **Virtual Scrolling:** –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏  
üîÑ **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:** –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –∫–æ–ª–æ–Ω–∫–∞–º  
üîÑ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:** –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö  
üîÑ **–≠–∫—Å–ø–æ—Ä—Ç:** –ù–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ Excel/PDF  
üîÑ **–ì—Ä—É–ø–ø total:** –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∏—Ç–æ–≥–∏ –ø–æ –æ—Ç–¥–µ–ª–∞–º  

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 4 –æ–∫—Ç—è–±—Ä—è 2025 –≥–æ–¥–∞  
**–ê–≤—Ç–æ—Ä:** Cursor AI Assistant  
**–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤:** –û–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Ñ–∞–π–ª–∞–º –º–æ–¥—É–ª—è –≤ `lib/features/fot/presentation/widgets/`

