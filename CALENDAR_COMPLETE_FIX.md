# üîß –ü–û–õ–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å–º–µ–Ω –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

## üéØ –ù–ê–ô–î–ï–ù–ù–ê–Ø –ò –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

### ‚ùå –ë–´–õ–ê –û–®–ò–ë–ö–ê: AnimatedSwitcher –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è

**–§–∞–π–ª:** `lib/features/home/presentation/widgets/shifts_calendar_widgets.dart`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```dart
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - ValueKey(false) –¥–ª—è –≤—Å–µ—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
? Builder(builder: ...)
: shiftsAsync.when(
    loading: () => SingleChildScrollView(key: ValueKey(false), ...),
    error: (...) => SingleChildScrollView(key: const ValueKey(false), ...),
    data: (shifts) => SingleChildScrollView(key: const ValueKey(false), ...),
  )
```

**–ü–æ—á–µ–º—É —ç—Ç–æ —Å–ª–æ–º–∞–ª–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—å:**
- `AnimatedSwitcher` –æ–∂–∏–¥–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ `ValueKey` –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
- –í—Å–µ —Ç—Ä–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è (loading/error/data) –∏–º–µ–ª–∏ **–æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–ª—é—á** `ValueKey(false)`
- –í–∏–¥–∂–µ—Ç **–ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–ª—Å—è**, —Ç–∞–∫ –∫–∞–∫ –Ω–µ –º–æ–≥ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ
- –†–µ–∑—É–ª—å—Ç–∞—Ç: **–ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤–º–µ—Å—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö**

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

### –†–µ—à–µ–Ω–∏–µ: –Ø–≤–Ω–æ –∑–∞–¥–∞—Ç—å –∫–ª—é—á–∏ –¥–ª—è front/back —Å—Ç–æ—Ä–æ–Ω

```dart
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Ä–∞–∑–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
child: _flipped
    ? Builder(
        key: const ValueKey('back_side'),  // ‚Üê –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –¥–ª—è –¥–µ—Ç–∞–ª–µ–π
        builder: (context) { ... }
      )
    : shiftsAsync.when(                     // ‚Üê Loading/Error/Data - –æ–¥–Ω–∞ —Å—Ç–æ—Ä–æ–Ω–∞
        loading: () => ...,
        error: (...) => ...,
        data: (shifts) => ...,
      ),
```

**–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. `back_side` (–¥–µ—Ç–∞–ª–∏ –¥–Ω—è) –∏–º–µ–µ—Ç —Å–≤–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á
2. `front_side` (–∫–∞–ª–µ–Ω–¥–∞—Ä—å) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ `when()` –±–µ–∑ —è–≤–Ω–æ–≥–æ –∫–ª—é—á–∞
3. `AnimatedSwitcher` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–º–µ–Ω—É —Å–æ—Å—Ç–æ—è–Ω–∏–π
4. –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ—Ä–æ—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üìä –°–¢–ê–¢–£–° –¶–ï–ü–ò –î–ê–ù–ù–´–•

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–æ–±–ª–µ–º–∞ |
|-----------|--------|---------|
| `shiftsSupabaseProvider` | ‚úÖ | - |
| `shiftsDataSourceProvider` | ‚úÖ | - |
| `shiftsRepositoryProvider` | ‚úÖ | - |
| `shiftsForMonthProvider` | ‚úÖ | –ó–∞–≥—Ä—É–∂–∞–µ—Ç 33 —Ä–∞–±–æ—Ç—ã –∑–∞ –º–µ—Å—è—Ü |
| `ShiftsDataSourceImpl.getShiftsForMonth()` | ‚úÖ | –ê–≥—Ä–µ–≥–∏—Ä—É–µ—Ç 18 –¥–Ω–µ–π —Å —Å—É–º–º–∞–º–∏ |
| `ShiftsCalendarFlipCard` | ‚úÖ | –¢–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ñ–ª–∏–ø |
| `ShiftsHeatmap` | ‚úÖ | –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—å |
| `AnimatedSwitcher` | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û | –¢–µ–ø–µ—Ä—å –Ω–µ –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ |

---

## üöÄ –î–ê–õ–¨–ù–ï–ô–®–ò–ï –î–ï–ô–°–¢–í–ò–Ø

1. –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
flutter clean
flutter run -v
```

2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ - –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
üîç –ó–∞–ø—Ä–æ—Å —Å–º–µ–Ω –∫–∞–ª–µ–Ω–¥–∞—Ä—è: –æ—Ç 2025-10-01 –¥–æ 2025-10-31
üì¶ –ü–æ–ª—É—á–µ–Ω–æ —Ä–∞–±–æ—Ç –∏–∑ Supabase: 33
üìä –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–æ –¥–Ω–µ–π —Å –¥–∞–Ω–Ω—ã–º–∏: 18
üìä ShiftsHeatmap –æ–±—Ä–∞–±–æ—Ç–∫–∞:
   –í—Ö–æ–¥—è—â–∏—Ö —Å–º–µ–Ω: 18
   –î–Ω–µ–π —Å –¥–∞–Ω–Ω—ã–º–∏: 18
   Max –∑–Ω–∞—á–µ–Ω–∏–µ: 732162
   –î–Ω–∏: 1, 2, 3, 4, 5, ...
```

3. –ù–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—å –¥–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å:
- ‚úÖ –ß–∏—Å–ª–∞ –º–µ—Å—è—Ü–∞ –≤ –≤–∏–¥–µ –∫–≤–∞–¥—Ä–∞—Ç–∏–∫–æ–≤
- ‚úÖ –î–Ω–∏ —Å –¥–∞–Ω–Ω—ã–º–∏ (—Å–∏–Ω–∏–µ/–∑–µ–ª—ë–Ω—ã–µ)
- ‚úÖ –î–Ω–∏ –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö (–∫—Ä–∞—Å–Ω—ã–µ)
- ‚úÖ –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –¥–µ–Ω—å - –ø–æ–∫–∞–∑–∞—Ç—å –¥–µ—Ç–∞–ª–∏

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
