# 🎯 Как выбрать тип агрегации (группировки)

## 📱 На экране

### ШАГ 1: Нажимаешь кнопку "Фильтры" (🔧 иконка) в AppBar
```
┌──────────────────────────────────┐
│ [🔙] Выгрузка данных      [📅][🔧][📥]
└──────────────────────────────────┘
                              ↑ Нажать здесь
```

### ШАГ 2: Откроется всплывающее меню
```
┌─────────────────────────────────┐
│ Фильтры                          │
├─────────────────────────────────┤
│ Объект: [Выберите...]           │
│                                 │
│ Договор: [Выберите...]          │
│                                 │
│ Система: [Выберите...]          │
│                                 │
│ Подсистема: [Выберите...]       │
│                                 │
│ Группировка данных:      ← ТУТ! │
│ ┌────────────┬────────────┐     │
│ │ Детальная  │  Краткая   │     │
│ │  (9 полей) │ (6 полей)  │     │
│ └────────────┴────────────┘     │
│                                 │
│        [Сброс] [Сформировать]   │
└─────────────────────────────────┘
```

### ШАГ 3: Выбираешь один из вариантов:

**Детальная (9 полей)** — по умолчанию
```
Объект | Договор | Система | Подсистема | Участок | Этаж | № позиции | Наименование | Ед. изм.
```

**Краткая (6 полей)** — группирует больше
```
Объект | Договор | Система | Подсистема | № позиции | Наименование
```

### ШАГ 4: Нажимаешь "Сформировать"
```
Отчёт загружается и группируется по выбранному типу
```

---

## 🔍 Примеры группировки

### Детальная (9 полей)
```
Дом А | Д-1 | ВК | Электро | Зал 1 | 1 | 1.1 | Монтаж | м | 5 | 100 | 500
Дом А | Д-1 | ВК | электро | Зал 2 | 1 | 1.1 | Монтаж | м | 3 | 100 | 300
Дом А | Д-1 | ВК | электро | Зал 1 | 2 | 1.2 | Проводка | м | 10 | 50 | 500
```

↓ В таблице показываются ВСЕ строки (нет агрегации по этажам)

### Краткая (6 полей)
```
Дом А | Д-1 | ВК | электро | 1.1 | Монтаж | м | 8 | 100 | 800
Дом А | Д-1 | ВК | электро | 1.2 | Проводка | м | 10 | 50 | 500
```

↓ Строки с одинаковыми объект+договор+система+подсистема+позиция+работа ОБЪЕДИНЯЮТСЯ

---

## 💾 Excel

Оба типа работают и в Excel:
1. Выбираешь тип группировки в фильтрах
2. Нажимаешь "Сформировать"
3. Нажимаешь 📥 (Excel) кнопку
4. Выбираешь колонки (если нужно)
5. Нажимаешь "Экспорт"

**Результат:** Excel файл с данными в выбранном уровне группировки

---

## 🎮 Кнопки

| Кнопка | Что делает |
|--------|-----------|
| 📅 (Calendar) | Выбрать период дат |
| 🔧 (Settings) | Открыть фильтры (ТУТ выбираешь группировку) |
| 📥 (Download) | Экспорт в Excel |

---

## ❓ Часто задаваемые вопросы

**Q: Какой выбрать по умолчанию?**
A: Детальная (показывает все данные)

**Q: Потеряются ли данные при выборе "Краткая"?**
A: Нет! Данные только группируются, ничего не теряется

**Q: Можно ли менять тип после загрузки?**
A: Да! Изменишь выбор → нажмешь "Сформировать" → отчёт пересчитается

**Q: Какой тип быстрее?**
A: Примерно одинаково, разница микросекунды

